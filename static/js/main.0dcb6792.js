/*! For license information please see main.0dcb6792.js.LICENSE.txt */
(()=>{"use strict";var e={49:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var _=b.prototype=new y;_.constructor=b,m(_,v.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,C={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:C.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+T(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),I(o,t,i,"",function(e){return e})):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+T(a=e[c],c);l+=I(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,i,u=s+T(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},j={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:j,ReactCurrentOwner:C};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=C.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},119:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},170:(e,t,n)=>{n.d(t,{cY:()=>w,FA:()=>B,g:()=>U,gz:()=>re,vA:()=>i,Hk:()=>s,K3:()=>a,u:()=>d,KA:()=>c,Uj:()=>u,gR:()=>G,Fy:()=>k,tD:()=>ie,A4:()=>h,bD:()=>X,dI:()=>ae,hp:()=>ne,T9:()=>b,Tj:()=>v,yU:()=>y,XA:()=>_,mS:()=>m,Ku:()=>ue,ZQ:()=>T,qc:()=>Y,sr:()=>D,zJ:()=>x,c1:()=>A,Im:()=>$,lT:()=>R,zW:()=>F,jZ:()=>I,$g:()=>M,lV:()=>j,nr:()=>O,Ov:()=>L,Cv:()=>K,$L:()=>W,kH:()=>J,gE:()=>C,Am:()=>ee,I9:()=>te,yw:()=>Q,OE:()=>ce,kj:()=>le,As:()=>H,P1:()=>N,eX:()=>V});const r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},o=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new l;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(e){const t=o(e);return a.encodeByteArray(t,!0)},u=function(e){return c(e).replace(/\./g,"")},d=function(e){try{return a.decodeString(e,!0)}catch(Fr){console.error("base64Decode failed: ",Fr)}return null};function h(e){return p(void 0,e)}function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&f(n)&&(e[n]=p(e[n],t[n]));return e}function f(e){return"__proto__"!==e}function m(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const g=()=>{try{return m().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/vacation-manager-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Fr){return}const t=e&&d(e[1]);return t&&JSON.parse(t)})()}catch(Fr){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Fr))}},v=e=>{var t,n;return null===(n=null===(t=g())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},y=e=>{const t=v(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},b=()=>{var e;return null===(e=g())||void 0===e?void 0:e.config},_=e=>{var t;return null===(t=g())||void 0===t?void 0:t["_".concat(e)]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function x(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function C(e){return(await fetch(e,{credentials:"include"})).ok}function k(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}const E={};let S=!1;function N(e,t){if("undefined"===typeof window||"undefined"===typeof document||!x(window.location.host)||E[e]===t||E[e]||S)return;function n(e){return"__firebase__banner__".concat(e)}E[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(E))E[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{S=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function T(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function I(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())}function P(){var e;const t=null===(e=g())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Fr){return!1}}function A(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function D(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function j(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function R(){const e=T();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function M(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN}function O(){return!P()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){return!P()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function F(){try{return"object"===typeof indexedDB}catch(Fr){return!1}}function V(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class U extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,U.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,B.prototype.create)}}class B{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(z,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new U(n,s,t)}}const z=/\{\$([^}]+)}/g;function W(e){return JSON.parse(e)}function H(e){return JSON.stringify(e)}const q=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=W(d(s[0])||""),n=W(d(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(Fr){}return{header:t,claims:n,data:r,signature:i}},K=function(e){const t=q(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},Y=function(e){const t=q(e).claims;return"object"===typeof t&&!0===t.admin};function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Q(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function $(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function J(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function X(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Z(n)&&Z(s)){if(!X(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Z(e){return null!==e&&"object"===typeof e}function ee(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function te(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function ne(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class re{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function ie(e,t){const n=new se(e,t);return n.subscribe.bind(n)}class se{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=oe),void 0===r.error&&(r.error=oe),void 0===r.complete&&(r.complete=oe);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Fr){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Fr){"undefined"!==typeof console&&console.error&&console.error(Fr)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oe(){}function ae(e,t){return"".concat(e," failed: ").concat(t," argument ")}const le=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);if(s>=55296&&s<=56319){const t=s-55296;r++,i(r<e.length,"Surrogate pair missing trail surrogate.");s=65536+(t<<10)+(e.charCodeAt(r)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},ce=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ue(e){return e&&e._delegate?e._delegate:e}},253:(e,t,n)=>{n.d(t,{h1:()=>a,uA:()=>i});var r=n(170);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Fr){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Fr){if(r)return null;throw Fr}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(Fr){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Fr){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},340:(e,t,n)=>{e.exports=n(761)},345:(e,t,n)=>{var r=n(950),i=n(340);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),N=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,L=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(qr){var t=qr.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var V=!1;function U(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Jr){var r=Jr}Reflect.construct(e,[],t)}else{try{t.call()}catch(Jr){r=Jr}e.call(t.prototype)}else{try{throw Error()}catch(Jr){r=Jr}e()}}catch(Jr){if(Jr&&r&&"string"===typeof Jr.stack){for(var i=Jr.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case x:return"Portal";case E:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(qr){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(ii){return e.body}}function Q(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Ce=null;function ke(e){if(e=Ai(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=ji(t),we(e.stateNode,e.type,t))}}function Ee(e){xe?Ce?Ce.push(e):Ce=[e]:xe=e}function Se(){if(xe){var e=xe,t=Ce;if(Ce=xe=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ne(e,t){return e(t)}function Te(){}var Ie=!1;function Pe(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ne(e,t,n)}finally{Ie=!1,(null!==xe||null!==Ce)&&(Te(),Se())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=ji(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){De=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(Kr){De=!1}function Re(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(Xr){this.onError(Xr)}}var Me=!1,Oe=null,Le=!1,Fe=null,Ve={onError:function(e){Me=!0,Oe=e}};function Ue(e,t,n,r,i,s,o,a,l){Me=!1,Oe=null,Re.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Ge=i.unstable_shouldYield,Qe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,Ze=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/at|0)|0},ot=Math.log,at=Math.LN2;var lt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ut(a):0!==(s&=o)&&(r=ut(s))}else 0!==(o=n&~i)?r=ut(o):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,xt,Ct,kt,Et=!1,St=[],Nt=null,Tt=null,It=null,Pt=new Map,At=new Map,Dt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ai(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=Pi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void kt(e.priority,function(){xt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ai(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Lt(e)&&n.delete(t)}function Vt(){Et=!1,null!==Nt&&Lt(Nt)&&(Nt=null),null!==Tt&&Lt(Tt)&&(Tt=null),null!==It&&Lt(It)&&(It=null),Pt.forEach(Ft),At.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return Ut(t,e)}if(0<St.length){Ut(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&Ut(Nt,e),null!==Tt&&Ut(Tt,e),null!==It&&Ut(It,e),Pt.forEach(t),At.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Dt.shift()}var zt=_.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=yt,s=zt.transition;zt.transition=null;try{yt=1,Kt(e,t,n,r)}finally{yt=i,zt.transition=s}}function qt(e,t,n,r){var i=yt,s=zt.transition;zt.transition=null;try{yt=4,Kt(e,t,n,r)}finally{yt=i,zt.transition=s}}function Kt(e,t,n,r){if(Wt){var i=Gt(e,t,n,r);if(null===i)Zr(e,t,r,Yt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nt=Mt(Nt,e,t,n,r,i),!0;case"dragenter":return Tt=Mt(Tt,e,t,n,r,i),!0;case"mouseover":return It=Mt(It,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,At.set(s,Mt(At.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var s=Ai(i);if(null!==s&&_t(s),null===(s=Gt(e,t,n,r))&&Zr(e,t,r,Yt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var Yt=null;function Gt(e,t,n,r){if(Yt=null,null!==(e=Pi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Xe:return 1;case Ze:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Xt=null;function Zt(){if(Xt)return Xt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var sn,on,an,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=rn(ln),un=L({},ln,{view:0,detail:0}),dn=rn(un),hn=L({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==an&&(an&&"mousemove"===e.type?(sn=e.screenX-an.screenX,on=e.screenY-an.screenY):on=sn=0,an=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=rn(hn),fn=rn(L({},hn,{dataTransfer:0})),mn=rn(L({},un,{relatedTarget:0})),gn=rn(L({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=rn(vn),bn=rn(L({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function kn(){return Cn}var En=L({},un,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=rn(En),Nn=rn(L({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=rn(L({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),In=rn(L({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=rn(Pn),Dn=[9,13,27,32],jn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Mn=u&&"TextEvent"in window&&!Rn,On=u&&(!jn||Rn&&8<Rn&&11>=Rn),Ln=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ee(r),0<(t=ti(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Yn(e){Lr(e,0)}function Gn(e){if(Y(Di(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Xn="oninput"in document;if(!Xn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Xn="function"===typeof Zn.oninput}Jn=Xn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function er(){qn&&(qn.detachEvent("onpropertychange",tr),Kn=qn=null)}function tr(e){if("value"===e.propertyName&&Gn(Kn)){var t=[];Hn(t,Kn,e,_e(e)),Pe(Yn,t)}}function nr(e,t,n){"focusin"===e?(er(),Kn=n,(qn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Kn)}function ir(e,t){if("click"===e)return Gn(t)}function sr(e,t){if("input"===e||"change"===e)return Gn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ar(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(Yr){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,vr=null,yr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==mr||mr!==G(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&ar(vr,r)||(vr=r,0<(r=ti(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},xr={},Cr={};function kr(e){if(xr[e])return xr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return xr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Er=kr("animationend"),Sr=kr("animationiteration"),Nr=kr("animationstart"),Tr=kr("transitionend"),Ir=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Ir.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var jr=Pr[Dr];Ar(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Ar(Er,"onAnimationEnd"),Ar(Sr,"onAnimationIteration"),Ar(Nr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ue.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Oe;Me=!1,Oe=null,Le||(Le=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Or(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Or(i,a,c),s=l}}}if(Le)throw e=Fe,Le=!1,Fe=null,e}function Ur(e,t){var n=t[Ni];void 0===n&&(n=t[Ni]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Br("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Qt(t)){case 1:var i=Ht;break;case 4:i=qt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=Pi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe(function(){var r=s,i=_e(n),o=[];e:{var a=Ir.get(e);if(void 0!==a){var l=cn,c=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Er:case Sr:case Nr:l=gn;break;case Tr:l=In;break;case"scroll":l=dn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Ae(f,h))&&u.push(ei(f,m,p)))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!Pi(c)&&!c[Si])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Pi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:Di(l),p=null==c?a:Di(c),(a=new u(m,f+"leave",l,n,i)).target=d,a.relatedTarget=p,m=null,Pi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=ni(p))f++;for(p=0,m=h;m;m=ni(m))p++;for(;0<f-p;)u=ni(u),f--;for(;0<p-f;)h=ni(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=ni(u),h=ni(h)}u=null}else u=null;null!==l&&ri(o,a,l,u,!1),null!==c&&null!==d&&ri(o,d,c,u,!0)}if("select"===(l=(a=r?Di(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Qn;else if(Wn(a))if($n)g=sr;else{g=rr;var v=nr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?Di(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(mr=v,gr=r,vr=null);break;case"focusout":vr=gr=mr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(o,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(On&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=Zt()):(Jt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(v=ti(r,b)).length&&(b=new bn(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!jn&&Vn(e,t)?(e=Zt(),Xt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=ti(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Lr(o,t)})}function ei(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ti(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ae(e,n))&&r.unshift(ei(e,s,i)),null!=(s=Ae(e,t))&&r.push(ei(e,s,i))),e=e.return}return r}function ni(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function ri(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ae(n,s))&&o.unshift(ei(n,l,a)):i||null!=(l=Ae(n,s))&&o.push(ei(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var si=/\r\n?/g,oi=/\u0000|\uFFFD/g;function ai(e){return("string"===typeof e?e:""+e).replace(si,"\n").replace(oi,"")}function li(e,t,n){if(t=ai(t),ai(e)!==t&&n)throw Error(s(425))}function ci(){}var ui=null,pi=null;function fi(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var mi="function"===typeof setTimeout?setTimeout:void 0,gi="function"===typeof clearTimeout?clearTimeout:void 0,vi="function"===typeof Promise?Promise:void 0,yi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof vi?function(e){return vi.resolve(null).then(e).catch(bi)}:mi;function bi(e){setTimeout(function(){throw e})}function _i(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function wi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function xi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),ki="__reactFiber$"+Ci,Ei="__reactProps$"+Ci,Si="__reactContainer$"+Ci,Ni="__reactEvents$"+Ci,Ti="__reactListeners$"+Ci,Ii="__reactHandles$"+Ci;function Pi(e){var t=e[ki];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Si]||n[ki]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xi(e);null!==e;){if(n=e[ki])return n;e=xi(e)}return t}n=(e=n).parentNode}return null}function Ai(e){return!(e=e[ki]||e[Si])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Di(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ji(e){return e[Ei]||null}var Ri=[],Mi=-1;function Oi(e){return{current:e}}function Li(e){0>Mi||(e.current=Ri[Mi],Ri[Mi]=null,Mi--)}function Fi(e,t){Mi++,Ri[Mi]=e.current,e.current=t}var Vi={},Ui=Oi(Vi),Bi=Oi(!1),zi=Vi;function Wi(e,t){var n=e.type.contextTypes;if(!n)return Vi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Hi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function qi(){Li(Bi),Li(Ui)}function Ki(e,t,n){if(Ui.current!==Vi)throw Error(s(168));Fi(Ui,t),Fi(Bi,n)}function Yi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,W(e)||"Unknown",i));return L({},n,r)}function Gi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vi,zi=Ui.current,Fi(Ui,e),Fi(Bi,Bi.current),!0}function Qi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Yi(e,t,zi),r.__reactInternalMemoizedMergedChildContext=e,Li(Bi),Li(Ui),Fi(Ui,e)):Li(Bi),Fi(Bi,n)}var $i=null,Ji=!1,Xi=!1;function Zi(e){null===$i?$i=[e]:$i.push(e)}function es(){if(!Xi&&null!==$i){Xi=!0;var e=0,t=yt;try{var n=$i;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}$i=null,Ji=!1}catch(Fr){throw null!==$i&&($i=$i.slice(e+1)),Ke(Xe,es),Fr}finally{yt=t,Xi=!1}}return null}var ts=[],ns=0,rs=null,is=0,ss=[],os=0,as=null,ls=1,cs="";function us(e,t){ts[ns++]=is,ts[ns++]=rs,rs=e,is=t}function ds(e,t,n){ss[os++]=ls,ss[os++]=cs,ss[os++]=as,as=e;var r=ls;e=cs;var i=32-st(r)-1;r&=~(1<<i),n+=1;var s=32-st(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ls=1<<32-st(t)+i|n<<i|r,cs=s+e}else ls=1<<s|n<<i|r,cs=e}function hs(e){null!==e.return&&(us(e,1),ds(e,1,0))}function ps(e){for(;e===rs;)rs=ts[--ns],ts[ns]=null,is=ts[--ns],ts[ns]=null;for(;e===as;)as=ss[--os],ss[os]=null,cs=ss[--os],ss[os]=null,ls=ss[--os],ss[os]=null}var fs=null,ms=null,gs=!1,vs=null;function ys(e,t){var n=Wc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function bs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,fs=e,ms=wi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,fs=e,ms=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==as?{id:ls,overflow:cs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Wc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,fs=e,ms=null,!0);default:return!1}}function _s(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ws(e){if(gs){var t=ms;if(t){var n=t;if(!bs(e,t)){if(_s(e))throw Error(s(418));t=wi(n.nextSibling);var r=fs;t&&bs(e,t)?ys(r,n):(e.flags=-4097&e.flags|2,gs=!1,fs=e)}}else{if(_s(e))throw Error(s(418));e.flags=-4097&e.flags|2,gs=!1,fs=e}}}function xs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;fs=e}function Cs(e){if(e!==fs)return!1;if(!gs)return xs(e),gs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!fi(e.type,e.memoizedProps)),t&&(t=ms)){if(_s(e))throw ks(),Error(s(418));for(;t;)ys(e,t),t=wi(t.nextSibling)}if(xs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ms=wi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ms=null}}else ms=fs?wi(e.stateNode.nextSibling):null;return!0}function ks(){for(var e=ms;e;)e=wi(e.nextSibling)}function Es(){ms=fs=null,gs=!1}function Ss(e){null===vs?vs=[e]:vs.push(e)}var Ns=_.ReactCurrentBatchConfig;function Ts(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Is(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ps(e){return(0,e._init)(e._payload)}function As(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=qc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Qc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===C?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&Ps(s)===t.type)?((r=i(t,n.props)).ref=Ts(e,t,n),r.return=e,r):((r=Kc(n.type,n.key,n.props,null,e.mode,r)).ref=Ts(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$c(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Yc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Qc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Kc(t.type,t.key,t.props,null,e.mode,n)).ref=Ts(e,null,t),n.return=e,n;case x:return(t=$c(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Yc(t,e.mode,n,null)).return=e,t;Is(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case D:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:d(e,t,n,r,null);Is(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,i,null);Is(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),gs&&us(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return gs&&us(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=f(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),gs&&us(i,m),c}function g(i,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),gs&&us(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return gs&&us(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(i,e)}),gs&&us(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===C&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===C){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Ps(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ts(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===C?((s=Yc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Kc(o.type,o.key,o.props,null,r.mode,l)).ref=Ts(r,s,o),l.return=r,r=l)}return a(r);case x:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=$c(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(M(o))return g(r,s,o,l);Is(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Qc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Ds=As(!0),js=As(!1),Rs=Oi(null),Ms=null,Os=null,Ls=null;function Fs(){Ls=Os=Ms=null}function Vs(e){var t=Rs.current;Li(Rs),e._currentValue=t}function Us(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Bs(e,t){Ms=e,Ls=Os=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Aa=!0),e.firstContext=null)}function zs(e){var t=e._currentValue;if(Ls!==e)if(e={context:e,memoizedValue:t,next:null},null===Os){if(null===Ms)throw Error(s(308));Os=e,Ms.dependencies={lanes:0,firstContext:e}}else Os=Os.next=e;return t}var Ws=null;function Hs(e){null===Ws?Ws=[e]:Ws.push(e)}function qs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Hs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ks(e,r)}function Ks(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ys=!1;function Gs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $s(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Js(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ul)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ks(e,n)}return null===(i=r.interleaved)?(t.next=t,Hs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ks(e,n)}function Xs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function eo(e,t,n,r){var i=e.updateQueue;Ys=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:Ys=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Gl|=o,e.lanes=o,e.memoizedState=d}}function to(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var no={},ro=Oi(no),io=Oi(no),so=Oi(no);function oo(e){if(e===no)throw Error(s(174));return e}function ao(e,t){switch(Fi(so,t),Fi(io,e),Fi(ro,no),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Li(ro),Fi(ro,t)}function lo(){Li(ro),Li(io),Li(so)}function co(e){oo(so.current);var t=oo(ro.current),n=le(t,e.type);t!==n&&(Fi(io,e),Fi(ro,n))}function uo(e){io.current===e&&(Li(ro),Li(io))}var ho=Oi(0);function po(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fo=[];function mo(){for(var e=0;e<fo.length;e++)fo[e]._workInProgressVersionPrimary=null;fo.length=0}var go=_.ReactCurrentDispatcher,vo=_.ReactCurrentBatchConfig,yo=0,bo=null,_o=null,wo=null,xo=!1,Co=!1,ko=0,Eo=0;function So(){throw Error(s(321))}function No(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function To(e,t,n,r,i,o){if(yo=o,bo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,go.current=null===e||null===e.memoizedState?da:ha,e=n(r,i),Co){o=0;do{if(Co=!1,ko=0,25<=o)throw Error(s(301));o+=1,wo=_o=null,t.updateQueue=null,go.current=pa,e=n(r,i)}while(Co)}if(go.current=ua,t=null!==_o&&null!==_o.next,yo=0,wo=_o=bo=null,xo=!1,t)throw Error(s(300));return e}function Io(){var e=0!==ko;return ko=0,e}function Po(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wo?bo.memoizedState=wo=e:wo=wo.next=e,wo}function Ao(){if(null===_o){var e=bo.alternate;e=null!==e?e.memoizedState:null}else e=_o.next;var t=null===wo?bo.memoizedState:wo.next;if(null!==t)wo=t,_o=e;else{if(null===e)throw Error(s(310));e={memoizedState:(_o=e).memoizedState,baseState:_o.baseState,baseQueue:_o.baseQueue,queue:_o.queue,next:null},null===wo?bo.memoizedState=wo=e:wo=wo.next=e}return wo}function Do(e,t){return"function"===typeof t?t(e):t}function jo(e){var t=Ao(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=_o,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((yo&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,bo.lanes|=d,Gl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,or(r,t.memoizedState)||(Aa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,bo.lanes|=o,Gl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=Ao(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);or(o,t.memoizedState)||(Aa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Mo(){}function Oo(e,t){var n=bo,r=Ao(),i=t(),o=!or(r.memoizedState,i);if(o&&(r.memoizedState=i,Aa=!0),r=r.queue,Go(Vo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==wo&&1&wo.memoizedState.tag){if(n.flags|=2048,Wo(9,Fo.bind(null,n,r,i,t),void 0,null),null===Bl)throw Error(s(349));0!==(30&yo)||Lo(n,t,i)}return i}function Lo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bo.updateQueue)?(t={lastEffect:null,stores:null},bo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Fo(e,t,n,r){t.value=n,t.getSnapshot=r,Uo(t)&&Bo(e)}function Vo(e,t,n){return n(function(){Uo(t)&&Bo(e)})}function Uo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(Yr){return!0}}function Bo(e){var t=Ks(e,1);null!==t&&fc(t,e,1,-1)}function zo(e){var t=Po();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:e},t.queue=e,e=e.dispatch=oa.bind(null,bo,e),[t.memoizedState,e]}function Wo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=bo.updateQueue)?(t={lastEffect:null,stores:null},bo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ho(){return Ao().memoizedState}function qo(e,t,n,r){var i=Po();bo.flags|=e,i.memoizedState=Wo(1|t,n,void 0,void 0===r?null:r)}function Ko(e,t,n,r){var i=Ao();r=void 0===r?null:r;var s=void 0;if(null!==_o){var o=_o.memoizedState;if(s=o.destroy,null!==r&&No(r,o.deps))return void(i.memoizedState=Wo(t,n,s,r))}bo.flags|=e,i.memoizedState=Wo(1|t,n,s,r)}function Yo(e,t){return qo(8390656,8,e,t)}function Go(e,t){return Ko(2048,8,e,t)}function Qo(e,t){return Ko(4,2,e,t)}function $o(e,t){return Ko(4,4,e,t)}function Jo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ko(4,4,Jo.bind(null,t,e),n)}function Zo(){}function ea(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&No(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ta(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&No(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function na(e,t,n){return 0===(21&yo)?(e.baseState&&(e.baseState=!1,Aa=!0),e.memoizedState=n):(or(n,t)||(n=ft(),bo.lanes|=n,Gl|=n,e.baseState=!0),t)}function ra(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=vo.transition;vo.transition={};try{e(!1),t()}finally{yt=n,vo.transition=r}}function ia(){return Ao().memoizedState}function sa(e,t,n){var r=pc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},aa(e))la(t,n);else if(null!==(n=qs(e,t,n,r))){fc(n,e,r,hc()),ca(n,t,r)}}function oa(e,t,n){var r=pc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(aa(e))la(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,or(a,o)){var l=t.interleaved;return null===l?(i.next=i,Hs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(Jr){}null!==(n=qs(e,t,i,r))&&(fc(n,e,r,i=hc()),ca(n,t,r))}}function aa(e){var t=e.alternate;return e===bo||null!==t&&t===bo}function la(e,t){Co=xo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ca(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var ua={readContext:zs,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},da={readContext:zs,useCallback:function(e,t){return Po().memoizedState=[e,void 0===t?null:t],e},useContext:zs,useEffect:Yo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=Po();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Po();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=sa.bind(null,bo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Po().memoizedState=e},useState:zo,useDebugValue:Zo,useDeferredValue:function(e){return Po().memoizedState=e},useTransition:function(){var e=zo(!1),t=e[0];return e=ra.bind(null,e[1]),Po().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=bo,i=Po();if(gs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Bl)throw Error(s(349));0!==(30&yo)||Lo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Yo(Vo.bind(null,r,o,e),[e]),r.flags|=2048,Wo(9,Fo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Po(),t=Bl.identifierPrefix;if(gs){var n=cs;t=":"+t+"R"+(n=(ls&~(1<<32-st(ls)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Eo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ha={readContext:zs,useCallback:ea,useContext:zs,useEffect:Go,useImperativeHandle:Xo,useInsertionEffect:Qo,useLayoutEffect:$o,useMemo:ta,useReducer:jo,useRef:Ho,useState:function(){return jo(Do)},useDebugValue:Zo,useDeferredValue:function(e){return na(Ao(),_o.memoizedState,e)},useTransition:function(){return[jo(Do)[0],Ao().memoizedState]},useMutableSource:Mo,useSyncExternalStore:Oo,useId:ia,unstable_isNewReconciler:!1},pa={readContext:zs,useCallback:ea,useContext:zs,useEffect:Go,useImperativeHandle:Xo,useInsertionEffect:Qo,useLayoutEffect:$o,useMemo:ta,useReducer:Ro,useRef:Ho,useState:function(){return Ro(Do)},useDebugValue:Zo,useDeferredValue:function(e){var t=Ao();return null===_o?t.memoizedState=e:na(t,_o.memoizedState,e)},useTransition:function(){return[Ro(Do)[0],Ao().memoizedState]},useMutableSource:Mo,useSyncExternalStore:Oo,useId:ia,unstable_isNewReconciler:!1};function fa(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ga={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hc(),i=pc(e),s=$s(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Js(e,s,i))&&(fc(t,e,i,r),Xs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hc(),i=pc(e),s=$s(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Js(e,s,i))&&(fc(t,e,i,r),Xs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hc(),r=pc(e),i=$s(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Js(e,i,r))&&(fc(t,e,r,n),Xs(t,e,r))}};function va(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!ar(n,r)||!ar(i,s))}function ya(e,t,n){var r=!1,i=Vi,s=t.contextType;return"object"===typeof s&&null!==s?s=zs(s):(i=Hi(t)?zi:Ui.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Wi(e,i):Vi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ga,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ga.enqueueReplaceState(t,t.state,null)}function _a(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Gs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=zs(s):(s=Hi(t)?zi:Ui.current,i.context=Wi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ma(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ga.enqueueReplaceState(i,i.state,null),eo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function wa(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(Qr){i="\nError generating stack: "+Qr.message+"\n"+Qr.stack}return{value:e,source:t,stack:i,digest:null}}function xa(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function Ca(e,t){try{console.error(t.value)}catch(qr){setTimeout(function(){throw qr})}}var ka="function"===typeof WeakMap?WeakMap:Map;function Ea(e,t,n){(n=$s(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){nc||(nc=!0,rc=r),Ca(0,t)},n}function Sa(e,t,n){(n=$s(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Ca(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){Ca(0,t),"function"!==typeof r&&(null===ic?ic=new Set([this]):ic.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Na(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ka;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Lc.bind(null,e,t,n),t.then(e,e))}function Ta(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ia(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$s(-1,1)).tag=2,Js(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Pa=_.ReactCurrentOwner,Aa=!1;function Da(e,t,n,r){t.child=null===e?js(t,null,n,r):Ds(t,e.child,n,r)}function ja(e,t,n,r,i){n=n.render;var s=t.ref;return Bs(t,i),r=To(e,t,n,r,s,i),n=Io(),null===e||Aa?(gs&&n&&hs(t),t.flags|=1,Da(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nl(e,t,i))}function Ra(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Hc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Kc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ma(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:ar)(o,r)&&e.ref===t.ref)return nl(e,t,i)}return t.flags|=1,(e=qc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ma(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ar(s,r)&&e.ref===t.ref){if(Aa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,nl(e,t,i);0!==(131072&e.flags)&&(Aa=!0)}}return Fa(e,t,n,r,i)}function Oa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fi(ql,Hl),Hl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fi(ql,Hl),Hl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Fi(ql,Hl),Hl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Fi(ql,Hl),Hl|=r;return Da(e,t,i,n),t.child}function La(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Fa(e,t,n,r,i){var s=Hi(n)?zi:Ui.current;return s=Wi(t,s),Bs(t,i),n=To(e,t,n,r,s,i),r=Io(),null===e||Aa?(gs&&r&&hs(t),t.flags|=1,Da(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nl(e,t,i))}function Va(e,t,n,r,i){if(Hi(n)){var s=!0;Gi(t)}else s=!1;if(Bs(t,i),null===t.stateNode)tl(e,t),ya(t,n,r),_a(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=zs(c):c=Wi(t,c=Hi(n)?zi:Ui.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&ba(t,o,r,c),Ys=!1;var h=t.memoizedState;o.state=h,eo(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Bi.current||Ys?("function"===typeof u&&(ma(t,n,u,r),l=t.memoizedState),(a=Ys||va(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Qs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:fa(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=zs(l):l=Wi(t,l=Hi(n)?zi:Ui.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&ba(t,o,r,l),Ys=!1,h=t.memoizedState,o.state=h,eo(t,r,o,i);var f=t.memoizedState;a!==d||h!==f||Bi.current||Ys?("function"===typeof p&&(ma(t,n,p,r),f=t.memoizedState),(c=Ys||va(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ua(e,t,n,r,s,i)}function Ua(e,t,n,r,i,s){La(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Qi(t,n,!1),nl(e,t,s);r=t.stateNode,Pa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ds(t,e.child,null,s),t.child=Ds(t,null,a,s)):Da(e,t,a,s),t.memoizedState=r.state,i&&Qi(t,n,!0),t.child}function Ba(e){var t=e.stateNode;t.pendingContext?Ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ki(0,t.context,!1),ao(e,t.containerInfo)}function za(e,t,n,r,i){return Es(),Ss(i),t.flags|=256,Da(e,t,n,r),t.child}var Wa,Ha,qa,Ka,Ya={dehydrated:null,treeContext:null,retryLane:0};function Ga(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qa(e,t,n){var r,i=t.pendingProps,o=ho.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Fi(ho,1&o),null===e)return ws(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Gc(l,i,0,null),e=Yc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ga(n),t.memoizedState=Ya,e):$a(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ja(e,t,a,r=xa(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Gc({mode:"visible",children:r.children},i,0,null),(o=Yc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ds(t,e.child,null,a),t.child.memoizedState=Ga(a),t.memoizedState=Ya,o);if(0===(1&t.mode))return Ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ja(e,t,a,r=xa(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),Aa||l){if(null!==(r=Bl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ks(e,i),fc(r,e,i,-1))}return Nc(),Ja(e,t,a,r=xa(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Vc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ms=wi(i.nextSibling),fs=t,gs=!0,vs=null,null!==e&&(ss[os++]=ls,ss[os++]=cs,ss[os++]=as,ls=e.id,cs=e.overflow,as=t),t=$a(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=qc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=qc(r,a):(a=Yc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ga(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ya,i}return e=(a=e.child).sibling,i=qc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function $a(e,t){return(t=Gc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ja(e,t,n,r){return null!==r&&Ss(r),Ds(t,e.child,null,n),(e=$a(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Xa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Us(e.return,t,n)}function Za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function el(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Da(e,t,r.children,n),0!==(2&(r=ho.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Xa(e,n,t);else if(19===e.tag)Xa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fi(ho,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===po(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===po(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Za(t,!0,n,null,s);break;case"together":Za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function tl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Gl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=qc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=qc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function rl(e,t){if(!gs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function il(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sl(e,t,n){var r=t.pendingProps;switch(ps(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return il(t),null;case 1:case 17:return Hi(t.type)&&qi(),il(t),null;case 3:return r=t.stateNode,lo(),Li(Bi),Li(Ui),mo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Cs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==vs&&(yc(vs),vs=null))),Ha(e,t),il(t),null;case 5:uo(t);var i=oo(so.current);if(n=t.type,null!==e&&null!=t.stateNode)qa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return il(t),null}if(e=oo(ro.current),Cs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ki]=t,r[Ei]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Ur(Rr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&li(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&li(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ci)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ki]=t,e[Ei]=r,Wa(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Ur(Rr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ci)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return il(t),null;case 6:if(e&&null!=t.stateNode)Ka(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=oo(so.current),oo(ro.current),Cs(t)){if(r=t.stateNode,n=t.memoizedProps,r[ki]=t,(o=r.nodeValue!==n)&&null!==(e=fs))switch(e.tag){case 3:li(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&li(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ki]=t,t.stateNode=r}return il(t),null;case 13:if(Li(ho),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(gs&&null!==ms&&0!==(1&t.mode)&&0===(128&t.flags))ks(),Es(),t.flags|=98560,o=!1;else if(o=Cs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[ki]=t}else Es(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;il(t),o=!1}else null!==vs&&(yc(vs),vs=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ho.current)?0===Kl&&(Kl=3):Nc())),null!==t.updateQueue&&(t.flags|=4),il(t),null);case 4:return lo(),Ha(e,t),null===e&&Wr(t.stateNode.containerInfo),il(t),null;case 10:return Vs(t.type._context),il(t),null;case 19:if(Li(ho),null===(o=t.memoizedState))return il(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)rl(o,!1);else{if(0!==Kl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=po(e))){for(t.flags|=128,rl(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fi(ho,1&ho.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>ec&&(t.flags|=128,r=!0,rl(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=po(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),rl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!gs)return il(t),null}else 2*$e()-o.renderingStartTime>ec&&1073741824!==n&&(t.flags|=128,r=!0,rl(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ho.current,Fi(ho,r?1&n|2:1&n),t):(il(t),null);case 22:case 23:return Cc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Hl)&&(il(t),6&t.subtreeFlags&&(t.flags|=8192)):il(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function ol(e,t){switch(ps(t),t.tag){case 1:return Hi(t.type)&&qi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return lo(),Li(Bi),Li(Ui),mo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return uo(t),null;case 13:if(Li(ho),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));Es()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Li(ho),null;case 4:return lo(),null;case 10:return Vs(t.type._context),null;case 22:case 23:return Cc(),null;default:return null}}Wa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ha=function(){},qa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,oo(ro.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ci)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ka=function(e,t,n,r){n!==r&&(t.flags|=4)};var al=!1,ll=!1,cl="function"===typeof WeakSet?WeakSet:Set,ul=null;function dl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(Yr){Oc(e,t,Yr)}else n.current=null}function hl(e,t,n){try{n()}catch(Yr){Oc(e,t,Yr)}}var pl=!1;function fl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&hl(t,n,s)}i=i.next}while(i!==r)}}function ml(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function gl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function vl(e){var t=e.alternate;null!==t&&(e.alternate=null,vl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ki],delete t[Ei],delete t[Ni],delete t[Ti],delete t[Ii])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yl(e){return 5===e.tag||3===e.tag||4===e.tag}function bl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||yl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function _l(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ci));else if(4!==r&&null!==(e=e.child))for(_l(e,t,n),e=e.sibling;null!==e;)_l(e,t,n),e=e.sibling}function wl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(wl(e,t,n),e=e.sibling;null!==e;)wl(e,t,n),e=e.sibling}var xl=null,Cl=!1;function kl(e,t,n){for(n=n.child;null!==n;)El(e,t,n),n=n.sibling}function El(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(Gr){}switch(n.tag){case 5:ll||dl(n,t);case 6:var r=xl,i=Cl;xl=null,kl(e,t,n),Cl=i,null!==(xl=r)&&(Cl?(e=xl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):xl.removeChild(n.stateNode));break;case 18:null!==xl&&(Cl?(e=xl,n=n.stateNode,8===e.nodeType?_i(e.parentNode,n):1===e.nodeType&&_i(e,n),Bt(e)):_i(xl,n.stateNode));break;case 4:r=xl,i=Cl,xl=n.stateNode.containerInfo,Cl=!0,kl(e,t,n),xl=r,Cl=i;break;case 0:case 11:case 14:case 15:if(!ll&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&hl(n,t,o),i=i.next}while(i!==r)}kl(e,t,n);break;case 1:if(!ll&&(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(Gr){Oc(n,t,Gr)}kl(e,t,n);break;case 21:kl(e,t,n);break;case 22:1&n.mode?(ll=(r=ll)||null!==n.memoizedState,kl(e,t,n),ll=r):kl(e,t,n);break;default:kl(e,t,n)}}function Sl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new cl),t.forEach(function(t){var r=Uc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function Nl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:xl=l.stateNode,Cl=!1;break e;case 3:case 4:xl=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===xl)throw Error(s(160));El(o,a,i),xl=null,Cl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(Jr){Oc(i,t,Jr)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Tl(t,e),t=t.sibling}function Tl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Nl(t,e),Il(e),4&r){try{fl(3,e,e.return),ml(3,e)}catch(Vr){Oc(e,e.return,Vr)}try{fl(5,e,e.return)}catch(Vr){Oc(e,e.return,Vr)}}break;case 1:Nl(t,e),Il(e),512&r&&null!==n&&dl(n,n.return);break;case 5:if(Nl(t,e),Il(e),512&r&&null!==n&&dl(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(Vr){Oc(e,e.return,Vr)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),ye(l,a);var u=ye(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?ue(i,h):"children"===d?de(i,h):b(i,d,h,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ei]=o}catch(Vr){Oc(e,e.return,Vr)}}break;case 6:if(Nl(t,e),Il(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(Vr){Oc(e,e.return,Vr)}}break;case 3:if(Nl(t,e),Il(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(Vr){Oc(e,e.return,Vr)}break;case 4:default:Nl(t,e),Il(e);break;case 13:Nl(t,e),Il(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Zl=$e())),4&r&&Sl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(ll=(u=ll)||d,Nl(t,e),ll=u):Nl(t,e),Il(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(ul=e,d=e.child;null!==d;){for(h=ul=d;null!==ul;){switch(f=(p=ul).child,p.tag){case 0:case 11:case 14:case 15:fl(4,p,p.return);break;case 1:dl(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(Vr){Oc(r,n,Vr)}}break;case 5:dl(p,p.return);break;case 22:if(null!==p.memoizedState){jl(h);continue}}null!==f?(f.return=p,ul=f):jl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",a))}catch(Vr){Oc(e,e.return,Vr)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(Vr){Oc(e,e.return,Vr)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Nl(t,e),Il(e),4&r&&Sl(e);case 21:}}function Il(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(yl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),wl(e,bl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;_l(e,bl(e),o);break;default:throw Error(s(161))}}catch(hi){Oc(e,e.return,hi)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Pl(e,t,n){ul=e,Al(e,t,n)}function Al(e,t,n){for(var r=0!==(1&e.mode);null!==ul;){var i=ul,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||al;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||ll;a=al;var c=ll;if(al=o,(ll=l)&&!c)for(ul=i;null!==ul;)l=(o=ul).child,22===o.tag&&null!==o.memoizedState?Rl(i):null!==l?(l.return=o,ul=l):Rl(i);for(;null!==s;)ul=s,Al(s,t,n),s=s.sibling;ul=i,al=a,ll=c}Dl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,ul=s):Dl(e)}}function Dl(e){for(;null!==ul;){var t=ul;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:ll||ml(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!ll)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:fa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&to(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}to(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}ll||512&t.flags&&gl(t)}catch(Hr){Oc(t,t.return,Hr)}}if(t===e){ul=null;break}if(null!==(n=t.sibling)){n.return=t.return,ul=n;break}ul=t.return}}function jl(e){for(;null!==ul;){var t=ul;if(t===e){ul=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ul=n;break}ul=t.return}}function Rl(e){for(;null!==ul;){var t=ul;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ml(4,t)}catch(hi){Oc(t,n,hi)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(hi){Oc(t,i,hi)}}var s=t.return;try{gl(t)}catch(hi){Oc(t,s,hi)}break;case 5:var o=t.return;try{gl(t)}catch(hi){Oc(t,o,hi)}}}catch(hi){Oc(t,t.return,hi)}if(t===e){ul=null;break}var a=t.sibling;if(null!==a){a.return=t.return,ul=a;break}ul=t.return}}var Ml,Ol=Math.ceil,Ll=_.ReactCurrentDispatcher,Fl=_.ReactCurrentOwner,Vl=_.ReactCurrentBatchConfig,Ul=0,Bl=null,zl=null,Wl=0,Hl=0,ql=Oi(0),Kl=0,Yl=null,Gl=0,Ql=0,$l=0,Jl=null,Xl=null,Zl=0,ec=1/0,tc=null,nc=!1,rc=null,ic=null,sc=!1,oc=null,ac=0,lc=0,cc=null,uc=-1,dc=0;function hc(){return 0!==(6&Ul)?$e():-1!==uc?uc:uc=$e()}function pc(e){return 0===(1&e.mode)?1:0!==(2&Ul)&&0!==Wl?Wl&-Wl:null!==Ns.transition?(0===dc&&(dc=ft()),dc):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function fc(e,t,n,r){if(50<lc)throw lc=0,cc=null,Error(s(185));gt(e,n,r),0!==(2&Ul)&&e===Bl||(e===Bl&&(0===(2&Ul)&&(Ql|=n),4===Kl&&bc(e,Wl)),mc(e,r),1===n&&0===Ul&&0===(1&t.mode)&&(ec=$e()+500,Ji&&es()))}function mc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-st(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ht(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Bl?Wl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ji=!0,Zi(e)}(_c.bind(null,e)):Zi(_c.bind(null,e)),yi(function(){0===(6&Ul)&&es()}),n=null;else{switch(bt(r)){case 1:n=Xe;break;case 4:n=Ze;break;case 16:default:n=et;break;case 536870912:n=nt}n=Bc(n,gc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gc(e,t){if(uc=-1,dc=0,0!==(6&Ul))throw Error(s(327));var n=e.callbackNode;if(Rc()&&e.callbackNode!==n)return null;var r=dt(e,e===Bl?Wl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Tc(e,r);else{t=r;var i=Ul;Ul|=2;var o=Sc();for(Bl===e&&Wl===t||(tc=null,ec=$e()+500,kc(e,t));;)try{Pc();break}catch(Gr){Ec(e,Gr)}Fs(),Ll.current=o,Ul=i,null!==zl?t=0:(Bl=null,Wl=0,t=Kl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=vc(e,i))),1===t)throw n=Yl,kc(e,0),bc(e,r),mc(e,$e()),n;if(6===t)bc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Tc(e,r))&&(0!==(o=pt(e))&&(r=o,t=vc(e,o))),1===t))throw n=Yl,kc(e,0),bc(e,r),mc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:jc(e,Xl,tc);break;case 3:if(bc(e,r),(130023424&r)===r&&10<(t=Zl+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){hc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=mi(jc.bind(null,e,Xl,tc),t);break}jc(e,Xl,tc);break;case 4:if(bc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ol(r/1960))-r)){e.timeoutHandle=mi(jc.bind(null,e,Xl,tc),r);break}jc(e,Xl,tc);break;default:throw Error(s(329))}}}return mc(e,$e()),e.callbackNode===n?gc.bind(null,e):null}function vc(e,t){var n=Jl;return e.current.memoizedState.isDehydrated&&(kc(e,t).flags|=256),2!==(e=Tc(e,t))&&(t=Xl,Xl=n,null!==t&&yc(t)),e}function yc(e){null===Xl?Xl=e:Xl.push.apply(Xl,e)}function bc(e,t){for(t&=~$l,t&=~Ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function _c(e){if(0!==(6&Ul))throw Error(s(327));Rc();var t=dt(e,0);if(0===(1&t))return mc(e,$e()),null;var n=Tc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=vc(e,r))}if(1===n)throw n=Yl,kc(e,0),bc(e,t),mc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Xl,tc),mc(e,$e()),null}function wc(e,t){var n=Ul;Ul|=1;try{return e(t)}finally{0===(Ul=n)&&(ec=$e()+500,Ji&&es())}}function xc(e){null!==oc&&0===oc.tag&&0===(6&Ul)&&Rc();var t=Ul;Ul|=1;var n=Vl.transition,r=yt;try{if(Vl.transition=null,yt=1,e)return e()}finally{yt=r,Vl.transition=n,0===(6&(Ul=t))&&es()}}function Cc(){Hl=ql.current,Li(ql)}function kc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,gi(n)),null!==zl)for(n=zl.return;null!==n;){var r=n;switch(ps(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&qi();break;case 3:lo(),Li(Bi),Li(Ui),mo();break;case 5:uo(r);break;case 4:lo();break;case 13:case 19:Li(ho);break;case 10:Vs(r.type._context);break;case 22:case 23:Cc()}n=n.return}if(Bl=e,zl=e=qc(e.current,null),Wl=Hl=t,Kl=0,Yl=null,$l=Ql=Gl=0,Xl=Jl=null,null!==Ws){for(t=0;t<Ws.length;t++)if(null!==(r=(n=Ws[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ws=null}return e}function Ec(e,t){for(;;){var n=zl;try{if(Fs(),go.current=ua,xo){for(var r=bo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}xo=!1}if(yo=0,wo=_o=bo=null,Co=!1,ko=0,Fl.current=null,null===n||null===n.return){Kl=1,Yl=t,zl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Wl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Ta(a);if(null!==f){f.flags&=-257,Ia(f,a,l,0,t),1&f.mode&&Na(o,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){Na(o,u,t),Nc();break e}c=Error(s(426))}else if(gs&&1&l.mode){var v=Ta(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Ia(v,a,l,0,t),Ss(wa(c,l));break e}}o=c=wa(c,l),4!==Kl&&(Kl=2),null===Jl?Jl=[o]:Jl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Zs(o,Ea(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ic||!ic.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Zs(o,Sa(o,l,t));break e}}o=o.return}while(null!==o)}Dc(n)}catch(_){t=_,zl===n&&null!==n&&(zl=n=n.return);continue}break}}function Sc(){var e=Ll.current;return Ll.current=ua,null===e?ua:e}function Nc(){0!==Kl&&3!==Kl&&2!==Kl||(Kl=4),null===Bl||0===(268435455&Gl)&&0===(268435455&Ql)||bc(Bl,Wl)}function Tc(e,t){var n=Ul;Ul|=2;var r=Sc();for(Bl===e&&Wl===t||(tc=null,kc(e,t));;)try{Ic();break}catch(Fr){Ec(e,Fr)}if(Fs(),Ul=n,Ll.current=r,null!==zl)throw Error(s(261));return Bl=null,Wl=0,Kl}function Ic(){for(;null!==zl;)Ac(zl)}function Pc(){for(;null!==zl&&!Ge();)Ac(zl)}function Ac(e){var t=Ml(e.alternate,e,Hl);e.memoizedProps=e.pendingProps,null===t?Dc(e):zl=t,Fl.current=null}function Dc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=sl(n,t,Hl)))return void(zl=n)}else{if(null!==(n=ol(n,t)))return n.flags&=32767,void(zl=n);if(null===e)return Kl=6,void(zl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(zl=t);zl=t=e}while(null!==t);0===Kl&&(Kl=5)}function jc(e,t,n){var r=yt,i=Vl.transition;try{Vl.transition=null,yt=1,function(e,t,n,r){do{Rc()}while(null!==oc);if(0!==(6&Ul))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Bl&&(zl=Bl=null,Wl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||sc||(sc=!0,Bc(et,function(){return Rc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Vl.transition,Vl.transition=null;var a=yt;yt=1;var l=Ul;Ul|=4,Fl.current=null,function(e,t){if(ui=Wt,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(di){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=a),p===o&&++d===r&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pi={focusedElem:e,selectionRange:n},Wt=!1,ul=t;null!==ul;)if(e=(t=ul).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,ul=e;else for(;null!==ul;){t=ul;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:fa(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(di){Oc(t,t.return,di)}if(null!==(e=t.sibling)){e.return=t.return,ul=e;break}ul=t.return}m=pl,pl=!1}(e,n),Tl(n,e),pr(pi),Wt=!!ui,pi=ui=null,e.current=n,Pl(n,e,i),Qe(),Ul=l,yt=a,Vl.transition=o}else e.current=n;if(sc&&(sc=!1,oc=e,ac=i),o=e.pendingLanes,0===o&&(ic=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),mc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(nc)throw nc=!1,e=rc,rc=null,e;0!==(1&ac)&&0!==e.tag&&Rc(),o=e.pendingLanes,0!==(1&o)?e===cc?lc++:(lc=0,cc=e):lc=0,es()}(e,t,n,r)}finally{Vl.transition=i,yt=r}return null}function Rc(){if(null!==oc){var e=bt(ac),t=Vl.transition,n=yt;try{if(Vl.transition=null,yt=16>e?16:e,null===oc)var r=!1;else{if(e=oc,oc=null,ac=0,0!==(6&Ul))throw Error(s(331));var i=Ul;for(Ul|=4,ul=e.current;null!==ul;){var o=ul,a=o.child;if(0!==(16&ul.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ul=u;null!==ul;){var d=ul;switch(d.tag){case 0:case 11:case 15:fl(8,d,o)}var h=d.child;if(null!==h)h.return=d,ul=h;else for(;null!==ul;){var p=(d=ul).sibling,f=d.return;if(vl(d),d===u){ul=null;break}if(null!==p){p.return=f,ul=p;break}ul=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}ul=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,ul=a;else e:for(;null!==ul;){if(0!==(2048&(o=ul).flags))switch(o.tag){case 0:case 11:case 15:fl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,ul=y;break e}ul=o.return}}var b=e.current;for(ul=b;null!==ul;){var _=(a=ul).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,ul=_;else e:for(a=b;null!==ul;){if(0!==(2048&(l=ul).flags))try{switch(l.tag){case 0:case 11:case 15:ml(9,l)}}catch(x){Oc(l,l.return,x)}if(l===a){ul=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,ul=w;break e}ul=l.return}}if(Ul=i,es(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(x){}r=!0}return r}finally{yt=n,Vl.transition=t}}return!1}function Mc(e,t,n){e=Js(e,t=Ea(0,t=wa(n,t),1),1),t=hc(),null!==e&&(gt(e,1,t),mc(e,t))}function Oc(e,t,n){if(3===e.tag)Mc(e,e,n);else for(;null!==t;){if(3===t.tag){Mc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ic||!ic.has(r))){t=Js(t,e=Sa(t,e=wa(n,e),1),1),e=hc(),null!==t&&(gt(t,1,e),mc(t,e));break}}t=t.return}}function Lc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hc(),e.pingedLanes|=e.suspendedLanes&n,Bl===e&&(Wl&n)===n&&(4===Kl||3===Kl&&(130023424&Wl)===Wl&&500>$e()-Zl?kc(e,0):$l|=n),mc(e,t)}function Fc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=hc();null!==(e=Ks(e,t))&&(gt(e,t,n),mc(e,n))}function Vc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Fc(e,n)}function Uc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Fc(e,n)}function Bc(e,t){return Ke(e,t)}function zc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wc(e,t,n,r){return new zc(e,t,n,r)}function Hc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qc(e,t){var n=e.alternate;return null===n?((n=Wc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Hc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case C:return Yc(n.children,i,o,t);case k:a=8,i|=8;break;case E:return(e=Wc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case I:return(e=Wc(13,n,t,i)).elementType=I,e.lanes=o,e;case P:return(e=Wc(19,n,t,i)).elementType=P,e.lanes=o,e;case j:return Gc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:a=10;break e;case N:a=9;break e;case T:a=11;break e;case A:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Wc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Yc(e,t,n,r){return(e=Wc(7,e,r,t)).lanes=n,e}function Gc(e,t,n,r){return(e=Wc(22,e,r,t)).elementType=j,e.lanes=n,e.stateNode={isHidden:!1},e}function Qc(e,t,n){return(e=Wc(6,e,null,t)).lanes=n,e}function $c(e,t,n){return(t=Wc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xc(e,t,n,r,i,s,o,a,l){return e=new Jc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Wc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gs(s),e}function Zc(e){if(!e)return Vi;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Hi(n))return Yi(e,n,t)}return t}function eu(e,t,n,r,i,s,o,a,l){return(e=Xc(n,r,!0,e,0,s,0,a,l)).context=Zc(null),n=e.current,(s=$s(r=hc(),i=pc(n))).callback=void 0!==t&&null!==t?t:null,Js(n,s,i),e.current.lanes=i,gt(e,i,r),mc(e,r),e}function tu(e,t,n,r){var i=t.current,s=hc(),o=pc(i);return n=Zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=$s(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Js(i,t,o))&&(fc(e,i,o,s),Xs(e,i,o)),o}function nu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ru(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function iu(e,t){ru(e,t),(e=e.alternate)&&ru(e,t)}Ml=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Bi.current)Aa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Aa=!1,function(e,t,n){switch(t.tag){case 3:Ba(t),Es();break;case 5:co(t);break;case 1:Hi(t.type)&&Gi(t);break;case 4:ao(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Fi(Rs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Fi(ho,1&ho.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Qa(e,t,n):(Fi(ho,1&ho.current),null!==(e=nl(e,t,n))?e.sibling:null);Fi(ho,1&ho.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return el(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fi(ho,ho.current),r)break;return null;case 22:case 23:return t.lanes=0,Oa(e,t,n)}return nl(e,t,n)}(e,t,n);Aa=0!==(131072&e.flags)}else Aa=!1,gs&&0!==(1048576&t.flags)&&ds(t,is,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;tl(e,t),e=t.pendingProps;var i=Wi(t,Ui.current);Bs(t,n),i=To(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hi(r)?(o=!0,Gi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Gs(t),i.updater=ga,t.stateNode=i,i._reactInternals=t,_a(t,r,e,n),t=Ua(null,t,r,!0,o,n)):(t.tag=0,gs&&o&&hs(t),Da(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(tl(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Hc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=fa(r,e),i){case 0:t=Fa(null,t,r,e,n);break e;case 1:t=Va(null,t,r,e,n);break e;case 11:t=ja(null,t,r,e,n);break e;case 14:t=Ra(null,t,r,fa(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:fa(r,i),n);case 1:return r=t.type,i=t.pendingProps,Va(e,t,r,i=t.elementType===r?i:fa(r,i),n);case 3:e:{if(Ba(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Qs(e,t),eo(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=za(e,t,r,n,i=wa(Error(s(423)),t));break e}if(r!==i){t=za(e,t,r,n,i=wa(Error(s(424)),t));break e}for(ms=wi(t.stateNode.containerInfo.firstChild),fs=t,gs=!0,vs=null,n=js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Es(),r===i){t=nl(e,t,n);break e}Da(e,t,r,n)}t=t.child}return t;case 5:return co(t),null===e&&ws(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,fi(r,i)?a=null:null!==o&&fi(r,o)&&(t.flags|=32),La(e,t),Da(e,t,a,n),t.child;case 6:return null===e&&ws(t),null;case 13:return Qa(e,t,n);case 4:return ao(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ds(t,null,r,n):Da(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ja(e,t,r,i=t.elementType===r?i:fa(r,i),n);case 7:return Da(e,t,t.pendingProps,n),t.child;case 8:case 12:return Da(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Fi(Rs,r._currentValue),r._currentValue=a,null!==o)if(or(o.value,a)){if(o.children===i.children&&!Bi.current){t=nl(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=$s(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Us(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Us(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Da(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Bs(t,n),r=r(i=zs(i)),t.flags|=1,Da(e,t,r,n),t.child;case 14:return i=fa(r=t.type,t.pendingProps),Ra(e,t,r,i=fa(r.type,i),n);case 15:return Ma(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fa(r,i),tl(e,t),t.tag=1,Hi(r)?(e=!0,Gi(t)):e=!1,Bs(t,n),ya(t,r,i),_a(t,r,i,n),Ua(null,t,r,!0,e,n);case 19:return el(e,t,n);case 22:return Oa(e,t,n)}throw Error(s(156,t.tag))};var su="function"===typeof reportError?reportError:function(e){console.error(e)};function ou(e){this._internalRoot=e}function au(e){this._internalRoot=e}function lu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function cu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function uu(){}function du(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=nu(o);a.call(e)}}tu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=nu(o);s.call(e)}}var o=eu(t,r,e,0,null,!1,0,"",uu);return e._reactRootContainer=o,e[Si]=o.current,Wr(8===e.nodeType?e.parentNode:e),xc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=nu(l);a.call(e)}}var l=Xc(e,0,!1,null,0,!1,0,"",uu);return e._reactRootContainer=l,e[Si]=l.current,Wr(8===e.nodeType?e.parentNode:e),xc(function(){tu(t,l,n,r)}),l}(n,t,e,i,r);return nu(o)}au.prototype.render=ou.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));tu(e,t,null,null)},au.prototype.unmount=ou.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;xc(function(){tu(null,e,null,null)}),t[Si]=null}},au.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ot(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),mc(t,$e()),0===(6&Ul)&&(ec=$e()+500,es()))}break;case 13:xc(function(){var t=Ks(e,1);if(null!==t){var n=hc();fc(t,e,1,n)}}),iu(e,1)}},wt=function(e){if(13===e.tag){var t=Ks(e,134217728);if(null!==t)fc(t,e,134217728,hc());iu(e,134217728)}},xt=function(e){if(13===e.tag){var t=pc(e),n=Ks(e,t);if(null!==n)fc(n,e,t,hc());iu(e,t)}},Ct=function(){return yt},kt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ji(r);if(!i)throw Error(s(90));Y(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=wc,Te=xc;var hu={usingClientEntryPoint:!1,Events:[Ai,Di,ji,Ee,Se,wc]},pu={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fu={bundleType:pu.bundleType,version:pu.version,rendererPackageName:pu.rendererPackageName,rendererConfig:pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:pu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{rt=mu.inject(fu),it=mu}catch(Kr){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!lu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!lu(e))throw Error(s(299));var n=!1,r="",i=su;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Xc(e,1,!1,null,0,n,0,r,i),e[Si]=t.current,Wr(8===e.nodeType?e.parentNode:e),new ou(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return xc(e)},t.hydrate=function(e,t,n){if(!cu(t))throw Error(s(200));return du(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!lu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=su;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=eu(t,null,e,1,null!=n?n:null,i,0,o,a),e[Si]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new au(t)},t.render=function(e,t,n){if(!cu(t))throw Error(s(200));return du(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!cu(e))throw Error(s(40));return!!e._reactRootContainer&&(xc(function(){du(null,null,e,!1,function(){e._reactRootContainer=null,e[Si]=null})}),!0)},t.unstable_batchedUpdates=wc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!cu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return du(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,n)=>{var r=n(119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},379:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(705);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},414:(e,t,n)=>{e.exports=n(654)},514:(e,t,n)=>{n.d(t,{j2:()=>Ms,database:()=>Os,Jt:()=>Ds.Jt,Ye:()=>Ls,ref:()=>Ds.KR,set:()=>Ds.hZ});var r=n(913);(0,r.KO)("firebase","11.10.0","app");var i,s=n(551),o=n(253),a=n(624),l=n(170),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function o(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return l;if(0>e)return f(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var l=o(0),c=o(1),d=o(16777216);function h(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function f(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(c)}function m(e,t){return e.add(f(t))}function g(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function y(e,t){if(h(t))throw Error("division by zero");if(h(e))return new v(l,l);if(p(e))return t=y(f(e),t),new v(f(t.g),f(t.h));if(p(t))return t=y(e,f(t)),new v(f(t.g),t.h);if(30<e.g.length){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;0>=r.l(e);)n=b(n),r=b(r);var i=_(n,1),s=_(r,1);for(r=_(r,2),n=_(n,2);!h(r);){var o=s.add(r);0>=o.l(e)&&(i=i.add(n),s=o),r=_(r,1),n=_(n,1)}return t=m(e,i.j(t)),new v(i,t)}for(i=l;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=a(n)).j(t);p(o)||0<o.l(e);)o=(s=a(n-=r)).j(t);h(s)&&(s=c),i=i.add(s),e=m(e,o)}return new v(i,e)}function b(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function _(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(p(this))return-f(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(h(this))return"0";if(p(this))return"-"+f(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=y(n,t).g,s=((0<(n=m(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(h(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=m(this,e))?-1:h(e)?0:1},e.abs=function(){return p(this)?f(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(h(this)||h(e))return l;if(p(this))return p(e)?f(this).j(f(e)):f(f(this).j(e));if(p(e))return f(this.j(f(e)));if(0>this.l(d)&&0>e.l(d))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var o=this.i(i)>>>16,c=65535&this.i(i),u=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=c*m,g(n,2*i+2*s),n[2*i+2*s+1]+=o*m,g(n,2*i+2*s+1),n[2*i+2*s+1]+=c*u,g(n,2*i+2*s+1),n[2*i+2*s+2]+=o*u,g(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return y(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,u.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return f(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=l,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+o),n);8>o?(o=a(Math.pow(n,o)),i=i.j(o).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},i=u.Integer=r}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,p,f,m,g,v,y,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function x(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function C(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function k(e){return/^[\s\xa0]*$/.test(e)}function E(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function S(e){return S[" "](e),e}S[" "]=function(){};var N=-1!=E().indexOf("Gecko")&&!(-1!=E().toLowerCase().indexOf("webkit")&&-1==E().indexOf("Edge"))&&!(-1!=E().indexOf("Trident")||-1!=E().indexOf("MSIE"))&&-1==E().indexOf("Edge");function T(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function I(e){const t={};for(const n in e)t[n]=e[n];return t}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<P.length;t++)n=P[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function D(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function j(e){i.setTimeout(()=>{throw e},0)}function R(){var e=V;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var M=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new O,e=>e.reset());class O{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let L,F=!1,V=new class{constructor(){this.h=this.g=null}add(e,t){const n=M.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},U=()=>{const e=i.Promise.resolve(void 0);L=()=>{e.then(B)}};var B=()=>{for(var e;e=R();){try{e.h.call(e.g)}catch(qr){j(qr)}var t=M;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}F=!1};function z(){this.s=this.s,this.C=this.C}function W(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},W.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(qr){}return e}();function q(e,t){if(W.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(N){e:{try{S(t.nodeName);var i=!0;break e}catch(Qr){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:K[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&q.aa.h.call(this)}}w(q,W);var K={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),G=0;function Q(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++G,this.da=this.fa=!1}function $(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function J(e){this.src=e,this.g={},this.h=0}function X(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&($(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}J.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Z(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Q(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,i){if(r&&r.once)return ie(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ne(e,t[s],n,r,i);return null}return n=de(n),e&&e[Y]?e.K(t,n,o(r)?!!r.capture:!!r,i):re(e,t,n,!1,r,i)}function re(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=ce(e);if(l||(e[ee]=l=new J(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)H||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ae(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ie(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ie(e,t[s],n,r,i);return null}return n=de(n),e&&e[Y]?e.L(t,n,o(r)?!!r.capture:!!r,i):re(e,t,n,!0,r,i)}function se(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)se(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=de(n),e&&e[Y]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z(s=e.g[t],n,r,i))&&($(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z(t,n,r,i)),(n=-1<e?t[e]:null)&&oe(n))}function oe(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[Y])X(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ae(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ce(t))?(X(n,e),0==n.h&&(n.src=null,t[ee]=null)):$(e)}}}function ae(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new q(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&oe(e),e=n.call(r,t)}return e}function ce(e){return(e=e[ee])instanceof J?e:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(e){return"function"===typeof e?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function he(){z.call(this),this.i=new J(this),this.M=this,this.F=null}function pe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new W(t,e);else if(t instanceof W)t.target=t.target||e;else{var i=t;A(t=new W(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=fe(o,r,!0,t)&&i}if(i=fe(o=t.g=e,r,!0,t)&&i,i=fe(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=fe(o=t.g=n[s],r,!1,t)&&i}function fe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&X(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function me(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ge(e){e.g=me(()=>{e.g=null,e.i&&(e.i=!1,ge(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}w(he,z),he.prototype[Y]=!0,he.prototype.removeEventListener=function(e,t,n,r){se(this,e,t,n,r)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$(n[r]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ve extends z{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(e){z.call(this),this.h=e,this.g={}}w(ye,z);var be=[];function _e(e){T(e.g,function(e,t){this.g.hasOwnProperty(t)&&oe(e)},e),e.g={}}ye.prototype.N=function(){ye.aa.N.call(this),_e(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=i.JSON.stringify,xe=i.JSON.parse,Ce=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function ke(){}function Ee(e){return e.h||(e.h=e.i())}function Se(){}ke.prototype.h=null;var Ne={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Te(){W.call(this,"d")}function Ie(){W.call(this,"c")}w(Te,W),w(Ie,W);var Pe={},Ae=null;function De(){return Ae=Ae||new he}function je(e){W.call(this,Pe.La,e)}function Re(e){const t=De();pe(t,new je(t))}function Me(e,t){W.call(this,Pe.STAT_EVENT,e),this.stat=t}function Oe(e){const t=De();pe(t,new Me(t,e))}function Le(e,t){W.call(this,Pe.Ma,e),this.size=t}function Fe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ve(){this.g=!0}function Ue(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return we(n)}catch(Xr){return t}}(e,n)+(r?" "+r:"")})}Pe.La="serverreachability",w(je,W),Pe.STAT_EVENT="statevent",w(Me,W),Pe.Ma="timingevent",w(Le,W),Ve.prototype.xa=function(){this.g=!1},Ve.prototype.info=function(){};var Be,ze={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},We={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function He(){}function qe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ke}function Ke(){this.i=null,this.g="",this.h=!1}w(He,ke),He.prototype.g=function(){return new XMLHttpRequest},He.prototype.i=function(){return{}},Be=new He;var Ye={},Ge={};function Qe(e,t,n){e.L=1,e.v=wt(gt(t)),e.m=n,e.P=!0,$e(e,null)}function $e(e,t){e.F=Date.now(),Ze(e),e.A=gt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Rt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Ke,e.g=xn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ve(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(be[0]=i.toString()),i=be);for(var s=0;s<i.length;s++){var o=ne(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?I(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Re(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Je(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Xe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ge:(n=Number(t.substring(n,r)),isNaN(n)?Ye:(r+=1)+n>t.length?Ge:(t=t.slice(r,r+n),e.C=r+n,t))}function Ze(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fe(c(e.ba,e),t)}function tt(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||vn(e.j,e)}function rt(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,_e(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function it(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(Jr){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;gn(n),on(n)}pn(n),Oe(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Fe(c(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(Jr){}n.ca=void 0}}else bn(n,11)}else if((e.K||n.g==e)&&gn(n),!k(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ut(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,_t(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=wn(r,r.J?r.ia:null,r.W),o.K){dt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(tt(a),Ze(a)),r.g=o}else hn(r);0<n.i.length&&ln(n)}else"stop"!=c[0]&&"close"!=c[0]||bn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?bn(n,7):sn(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Re()}catch(Jr){}}qe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==en(e)?t.j():this.Y(e)},qe.prototype.Y=function(e){try{if(e==this.g)e:{const h=en(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||tn(this.g)))){this.J||4!=h||7==t||Re(),tt(this);var n=this.g.Z();this.X=n;t:if(Je(this)){var r=tn(this.g);e="";var s=r.length,o=4==en(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rt(this),nt(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Oe(12),rt(this),nt(this);break e}Ue(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,it(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Xe(this,a),e==Ge){4==h&&(this.s=4,Oe(14),n=!1),Ue(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ye){this.s=4,Oe(15),Ue(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ue(this.i,this.l,e,null),it(this,e)}if(Je(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Oe(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),fn(d),d.M=!0,Oe(11))}}else Ue(this.i,this.l,a,"[Invalid Chunked Response]"),rt(this),nt(this)}else Ue(this.i,this.l,a,null),it(this,a);4==h&&rt(this),this.o&&!this.J&&(4==h?vn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=en(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(k(e[r]))continue;var n=D(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),rt(this),nt(this)}}}catch(ci){}},qe.prototype.cancel=function(){this.J=!0,rt(this)},qe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Re(),Oe(17)),rt(this),this.s=2,nt(this)):et(this,this.S-e)};var st=class{constructor(e,t){this.g=e,this.map=t}};function ot(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function at(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ut(e,t){e.g?e.g.add(t):e.h=t}function dt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return x(e.i)}function pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}ot.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ft=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof mt){this.h=e.h,vt(this,e.j),this.o=e.o,this.g=e.g,yt(this,e.s),this.l=e.l;var t=e.i,n=new Pt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bt(this,n),this.m=e.m}else e&&(t=String(e).match(ft))?(this.h=!1,vt(this,t[1]||"",!0),this.o=xt(t[2]||""),this.g=xt(t[3]||"",!0),yt(this,t[4]),this.l=xt(t[5]||"",!0),bt(this,t[6]||"",!0),this.m=xt(t[7]||"")):(this.h=!1,this.i=new Pt(null,this.h))}function gt(e){return new mt(e)}function vt(e,t,n){e.j=n?xt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function bt(e,t,n){t instanceof Pt?(e.i=t,function(e,t){t&&!e.j&&(At(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Dt(this,t),Rt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Ct(t,Tt)),e.i=new Pt(t,e.h))}function _t(e,t,n){e.i.set(t,n)}function wt(e){return _t(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ct(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function kt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ct(t,Et,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(Ct(t,Et,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ct(n,"/"==n.charAt(0)?Nt:St,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Ct(n,It)),e.join("")};var Et=/[#\/\?@]/g,St=/[#\?:]/g,Nt=/[#\?]/g,Tt=/[#\?@]/g,It=/#/g;function Pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function At(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Dt(e,t){At(e),t=Mt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function jt(e,t){return At(e),t=Mt(e,t),e.g.has(t)}function Rt(e,t,n){Dt(e,t),0<n.length&&(e.i=null,e.g.set(Mt(e,t),x(n)),e.h+=n.length)}function Mt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ot(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(Qr){}}function Lt(){this.g=new Ce}function Ft(e,t,n){const r=n||"";try{pt(e,function(e,n){let i=e;o(e)&&(i=we(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(Fr){throw t.push(r+"type="+encodeURIComponent("_badmap")),Fr}}function Vt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ut(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Bt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function zt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Wt(e)}function Wt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ht(e){let t="";return T(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ht(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):_t(e,t,n))}function Kt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Pt.prototype).add=function(e,t){At(this),this.i=null,e=Mt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){At(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){At(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){At(this);let t=[];if("string"===typeof e)jt(this,e)&&(t=t.concat(this.g.get(Mt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return At(this),this.i=null,jt(this,e=Mt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},w(Vt,ke),Vt.prototype.g=function(){return new Ut(this.l,this.j)},Vt.prototype.i=function(e){return function(){return e}}({}),w(Ut,he),(e=Ut.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Wt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wt(this)),this.g&&(this.readyState=3,Wt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?zt(this):Wt(this),3==this.readyState&&Bt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,zt(this))},e.Qa=function(e){this.g&&(this.response=e,zt(this))},e.ga=function(){this.g&&zt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),w(Kt,he);var Yt=/^https?$/i,Gt=["POST","PUT"];function Qt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,$t(e),Xt(e)}function $t(e){e.A||(e.A=!0,pe(e,"complete"),pe(e,"error"))}function Jt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=en(e)||2!=e.Z()))if(e.u&&4==en(e))me(e.Ea,0,e);else if(pe(e,"readystatechange"),4==en(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(ft)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Yt.test(o?o.toLowerCase():"")}n=s}if(n)pe(e,"complete"),pe(e,"success");else{e.m=6;try{var a=2<en(e)?e.g.statusText:""}catch(Xr){a=""}e.l=a+" ["+e.Z()+"]",$t(e)}}finally{Xt(e)}}}function Xt(e,t){if(e.g){Zt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||pe(e,"ready");try{n.onreadystatechange=r}catch(Fr){}}}function Zt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function en(e){return e.g?e.g.readyState:0}function tn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ii){return null}}function nn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function rn(e){this.Aa=0,this.i=[],this.j=new Ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nn("baseRetryDelayMs",5e3,e),this.cb=nn("retryDelaySeedMs",1e4,e),this.Wa=nn("forwardChannelMaxRetries",2,e),this.wa=nn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new ot(e&&e.concurrentRequestLimit),this.Da=new Lt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function sn(e){if(an(e),3==e.G){var t=e.U++,n=gt(e.I);if(_t(n,"SID",e.K),_t(n,"RID",t),_t(n,"TYPE","terminate"),un(e,n),(t=new qe(e,e.j,t)).L=2,t.v=wt(gt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(Yr){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=xn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}_n(e)}function on(e){e.g&&(fn(e),e.g.cancel(),e.g=null)}function an(e){on(e),e.u&&(i.clearTimeout(e.u),e.u=null),gn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function ln(e){if(!at(e.h)&&!e.s){e.s=!0;var t=e.Ga;L||U(),F||(L(),F=!0),V.add(t,e),e.B=0}}function cn(e,t){var n;n=t?t.l:e.U++;const r=gt(e.I);_t(r,"SID",e.K),_t(r,"RID",n),_t(r,"AID",e.T),un(e,r),e.m&&e.o&&qt(r,e.m,e.o),n=new qe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=dn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ut(e.h,n),Qe(n,r,t)}function un(e,t){e.H&&T(e.H,function(e,n){_t(t,n,e)}),e.l&&pt({},function(e,n){_t(t,n,e)})}function dn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Ft(a,e,"req"+n+"_")}catch(ci){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function hn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;L||U(),F||(L(),F=!0),V.add(t,e),e.v=0}}function pn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Fe(c(e.Fa,e),yn(e,e.v)),e.v++,!0)}function fn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function mn(e){e.g=new qe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=gt(e.qa);_t(t,"RID","rpc"),_t(t,"SID",e.K),_t(t,"AID",e.T),_t(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&_t(t,"TO",e.ja),_t(t,"TYPE","xmlhttp"),un(e,t),e.m&&e.o&&qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=wt(gt(t)),n.m=null,n.P=!0,$e(n,e)}function gn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function vn(e,t){var n=null;if(e.g==t){gn(e),fn(e),e.g=null;var r=2}else{if(!ct(e.h,t))return;n=t.D,dt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;pe(r=De(),new Le(r,n)),ln(e)}else hn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Fe(c(e.Ga,e,t),yn(e,e.B)),e.B++,!0))}(e,t)||2==r&&pn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:bn(e,5);break;case 4:bn(e,10);break;case 3:bn(e,6);break;default:bn(e,2)}}function yn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function bn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new mt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||vt(r,"https"),wt(r),t?function(e,t){const n=new Ve;if(i.Image){const r=new Image;r.onload=u(Ot,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ot,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ot,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ot,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ve;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ot(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ot(0,0,!0,t):Ot(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ot(0,0,!1,t)})}(r.toString(),n)}else Oe(2);e.G=0,e.l&&e.l.sa(t),_n(e),an(e)}function _n(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(C(e.ka,t),C(e.ka,e.i),e.h.i.length=0,x(e.i),e.i.length=0),e.l.ra()}}function wn(e,t,n){var r=n instanceof mt?gt(n):new mt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),yt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new mt(null);r&&vt(o,r),t&&(o.g=t),s&&yt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&_t(r,n,t),_t(r,"VER",e.la),un(e,r),r}function xn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Kt(new Vt({eb:n})):new Kt(e.pa)).Ha(e.J),t}function Cn(){}function kn(){}function En(e,t){he.call(this),this.g=new rn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!k(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Tn(this)}function Sn(e){Te.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Nn(){Ie.call(this),this.status=1}function Tn(e){this.g=e}(e=Kt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Be.g(),this.v=this.o?Ee(this.o):Ee(Be),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Qr){return void Qt(this,Qr)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Gt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zt(this),this.u=!0,this.g.send(e),this.u=!1}catch(Qr){Qt(this,Qr)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,pe(this,"complete"),pe(this,"abort"),Xt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xt(this,!0)),Kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<en(this)?this.g.status:-1}catch(Kr){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Kr){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),xe(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=rn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Oe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=wn(this,null,this.W),ln(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new qe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=I(s),A(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=dn(this,i,t),_t(n=gt(this.I),"RID",e),_t(n,"CVER",22),this.D&&_t(n,"X-HTTP-Session-Id",this.D),un(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ht(s)))+"&"+t:this.m&&qt(n,this.m,s)),ut(this.h,i),this.Ua&&_t(n,"TYPE","init"),this.P?(_t(n,"$req",t),_t(n,"SID","null"),i.T=!0,Qe(i,n,null)):Qe(i,n,t),this.G=2}}else 3==this.G&&(e?cn(this,e):0==this.i.length||at(this.h)||cn(this))},e.Fa=function(){if(this.u=null,mn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Fe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),on(this),mn(this))},e.Za=function(){null!=this.C&&(this.C=null,on(this),pn(this),Oe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Cn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},kn.prototype.g=function(e,t){return new En(e,t)},w(En,he),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){sn(this.g)},En.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=we(e),e=n);t.i.push(new st(t.Ya++,e)),3==t.G&&ln(t)},En.prototype.N=function(){this.g.l=null,delete this.j,sn(this.g),delete this.g,En.aa.N.call(this)},w(Sn,Te),w(Nn,Ie),w(Tn,Cn),Tn.prototype.ua=function(){pe(this.g,"a")},Tn.prototype.ta=function(e){pe(this.g,new Sn(e))},Tn.prototype.sa=function(e){pe(this.g,new Nn)},Tn.prototype.ra=function(){pe(this.g,"b")},kn.prototype.createWebChannel=kn.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,y=_.createWebChannelTransport=function(){return new kn},v=_.getStatEventTarget=function(){return De()},g=_.Event=Pe,m=_.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ze.NO_ERROR=0,ze.TIMEOUT=8,ze.HTTP_ERROR=6,f=_.ErrorCode=ze,We.COMPLETE="complete",p=_.EventType=We,Se.EventType=Ne,Ne.OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",he.prototype.listen=he.prototype.K,h=_.WebChannel=Se,_.FetchXmlHttpFactory=Vt,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,d=_.XhrIo=Kt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const w="@firebase/firestore",x="4.8.0";class C{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}C.UNAUTHENTICATED=new C(null),C.GOOGLE_CREDENTIALS=new C("google-credentials-uid"),C.FIRST_PARTY=new C("first-party-uid"),C.MOCK_USER=new C("mock-user");let k="11.10.0";const E=new a.Vy("@firebase/firestore");function S(){return E.logLevel}function N(e){if(E.logLevel<=a.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(P);E.debug("Firestore (".concat(k,"): ").concat(e),...i)}}function T(e){if(E.logLevel<=a.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(P);E.error("Firestore (".concat(k,"): ").concat(e),...i)}}function I(e){if(E.logLevel<=a.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(P);E.warn("Firestore (".concat(k,"): ").concat(e),...i)}}function P(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Vr){return e}}function A(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,D(e,r,n)}function D(e,t,n){let r="FIRESTORE (".concat(k,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw T(r),new Error(r)}function j(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||D(t,i,r)}function R(e,t){return e}const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class L{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class F{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(C.UNAUTHENTICATED))}shutdown(){}}class U{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class B{constructor(e){this.t=e,this.currentUser=C.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){j(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new L;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new L,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new L)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(j("string"==typeof t.accessToken,31837,{l:t}),new F(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return j(null===e||"string"==typeof e,2055,{h:e}),new C(e)}}class z{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=C.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class W{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new z(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(C.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,r.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){j(void 0===this.o,3512);const n=e=>{null!=e.error&&N("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,N("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new H(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(j("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new H(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function K(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Y(){return new TextEncoder}class G{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=K(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Q(e,t){return e<t?-1:e>t?1:0}function $(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Q(r,i);{const s=Y(),o=X(s.encode(J(e,n)),s.encode(J(t,n)));return 0!==o?o:Q(r,i)}}n+=r>65535?2:1}return Q(e.length,t.length)}function J(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function X(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Q(e[n],t[n]);return Q(e.length,t.length)}function Z(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const ee="__name__";class te{constructor(e,t,n){void 0===t?t=0:t>e.length&&A(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&A(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===te.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof te?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=te.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Q(e.length,t.length)}static compareSegments(e,t){const n=te.isNumericId(e),r=te.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?te.extractNumericId(e).compare(te.extractNumericId(t)):$(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return i.fromString(e.substring(4,e.length-2))}}class ne extends te{construct(e,t,n){return new ne(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new O(M.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new ne(e)}static emptyPath(){return new ne([])}}const re=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ie extends te{construct(e,t,n){return new ie(e,t,n)}static isValidIdentifier(e){return re.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ie.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ee}static keyField(){return new ie([ee])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new O(M.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new O(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new O(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new O(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ie(t)}static emptyPath(){return new ie([])}}class se{constructor(e){this.path=e}static fromPath(e){return new se(ne.fromString(e))}static fromName(e){return new se(ne.fromString(e).popFirst(5))}static empty(){return new se(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ne.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new ne(e.slice()))}}function oe(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ae(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":A(12329,{type:typeof e})}function le(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new O(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ae(e);throw new O(M.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function ce(e,t){const n={typeString:e};return t&&(n.value=t),n}function ue(e,t){if(!oe(e))throw new O(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new O(M.INVALID_ARGUMENT,n);return!0}const de=-62135596800,he=1e6;class pe{static now(){return pe.fromMillis(Date.now())}static fromDate(e){return pe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*he);return new pe(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<de)throw new O(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/he}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ue(e,pe._jsonSchema))return new pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-de;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pe._jsonSchemaVersion="firestore/timestamp/1.0",pe._jsonSchema={type:ce("string",pe._jsonSchemaVersion),seconds:ce("number"),nanoseconds:ce("number")};class fe{static fromTimestamp(e){return new fe(e)}static min(){return new fe(new pe(0,0))}static max(){return new fe(new pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const me=-1;class ge{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ge.UNKNOWN_ID=-1;function ve(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(1e9===r?new pe(n+1,0):new pe(n,r));return new be(i,se.empty(),t)}function ye(e){return new be(e.readTime,e.key,me)}class be{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new be(fe.min(),se.empty(),me)}static max(){return new be(fe.max(),se.empty(),me)}}function _e(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=se.comparator(e.documentKey,t.documentKey),0!==n?n:Q(e.largestBatchId,t.largestBatchId))}class we{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&A(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(e){return xe.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.reject(t)}static resolve(e){return new xe((t,n)=>{t(e)})}static reject(e){return new xe((t,n)=>{n(e)})}static waitFor(e){return new xe((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=xe.resolve(!1);for(const n of e)t=t.next(e=>e?xe.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new xe((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new xe((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ce(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ke(e){return"IndexedDbTransactionError"===e.name}class Ee{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ee.ue=-1;const Se=-1;function Ne(e){return null==e}function Te(e){return 0===e&&1/e==-1/0}const Ie="remoteDocuments",Pe="owner",Ae="mutationQueues",De="mutations";const je="documentMutations",Re="remoteDocumentsV14",Me="remoteDocumentGlobal",Oe="targets",Le="targetDocuments",Fe="targetGlobal",Ve="collectionParents",Ue="clientMetadata",Be="bundles",ze="namedQueries",We="indexConfiguration",He="indexState",qe="indexEntries",Ke="documentOverlays",Ye="globals",Ge=[Ae,De,je,Ie,Oe,Pe,Fe,Le,Ue,Me,Ve,Be,ze],Qe=[Ae,De,je,Re,Oe,Pe,Fe,Le,Ue,Me,Ve,Be,ze,Ke],$e=Qe,Je=[...$e,We,He,qe];function Xe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ze(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function et(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class tt{constructor(e,t){this.comparator=e,this.root=t||rt.EMPTY}insert(e,t){return new tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nt(this.root,e,this.comparator,!1)}getReverseIterator(){return new nt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nt(this.root,e,this.comparator,!0)}}class nt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:rt.RED,this.left=null!=r?r:rt.EMPTY,this.right=null!=i?i:rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new rt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return rt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw A(43730,{key:this.key,value:this.value});if(this.right.isRed())throw A(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw A(27949);return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1,rt.EMPTY=new class{constructor(){this.size=0}get key(){throw A(57766)}get value(){throw A(16141)}get color(){throw A(16727)}get left(){throw A(29726)}get right(){throw A(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new rt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class it{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new st(this.data.getIterator())}getIteratorFrom(e){return new st(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof it))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new it(this.comparator);return t.data=e,t}}class st{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ot{constructor(e){this.fields=e,e.sort(ie.comparator)}static empty(){return new ot([])}unionWith(e){let t=new it(ie.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ot(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Z(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class at extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new at("Invalid base64 string: "+e):e}}(e);return new lt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const ct=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ut(e){if(j(!!e,39018),"string"==typeof e){let t=0;const n=ct.exec(e);if(j(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:dt(e.seconds),nanos:dt(e.nanos)}}function dt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ht(e){return"string"==typeof e?lt.fromBase64String(e):lt.fromUint8Array(e)}const pt="server_timestamp",ft="__type__",mt="__previous_value__",gt="__local_write_time__";function vt(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[ft])||void 0===n?void 0:n.stringValue)===pt}function yt(e){const t=e.mapValue.fields[mt];return vt(t)?yt(t):t}function bt(e){const t=ut(e.mapValue.fields[gt].timestampValue);return new pe(t.seconds,t.nanos)}const _t="(default)";class wt{constructor(e,t){this.projectId=e,this.database=t||_t}static empty(){return new wt("","")}get isDefaultDatabase(){return this.database===_t}isEqual(e){return e instanceof wt&&e.projectId===this.projectId&&e.database===this.database}}const xt="__type__",Ct="__max__",kt={mapValue:{fields:{__type__:{stringValue:Ct}}}},Et="__vector__",St="value";function Nt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?vt(e)?4:Ut(e)?9007199254740991:Ft(e)?10:11:A(28295,{value:e})}function Tt(e,t){if(e===t)return!0;const n=Nt(e);if(n!==Nt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bt(e).isEqual(bt(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ut(e.timestampValue),r=ut(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ht(e.bytesValue).isEqual(ht(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return dt(e.geoPointValue.latitude)===dt(t.geoPointValue.latitude)&&dt(e.geoPointValue.longitude)===dt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return dt(e.integerValue)===dt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=dt(e.doubleValue),r=dt(t.doubleValue);return n===r?Te(n)===Te(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Z(e.arrayValue.values||[],t.arrayValue.values||[],Tt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Xe(n)!==Xe(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Tt(n[i],r[i])))return!1;return!0}(e,t);default:return A(52216,{left:e})}}function It(e,t){return void 0!==(e.values||[]).find(e=>Tt(e,t))}function Pt(e,t){if(e===t)return 0;const n=Nt(e),r=Nt(t);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=dt(e.integerValue||e.doubleValue),r=dt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return At(e.timestampValue,t.timestampValue);case 4:return At(bt(e),bt(t));case 5:return $(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ht(e),r=ht(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Q(n[i],r[i]);if(0!==e)return e}return Q(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Q(dt(e.latitude),dt(t.latitude));return 0!==n?n:Q(dt(e.longitude),dt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Dt(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[St])||void 0===n?void 0:n.arrayValue,c=null===(r=a[St])||void 0===r?void 0:r.arrayValue,u=Q((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Dt(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===kt.mapValue&&t===kt.mapValue)return 0;if(e===kt.mapValue)return 1;if(t===kt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=$(r[o],s[o]);if(0!==e)return e;const t=Pt(n[r[o]],i[s[o]]);if(0!==t)return t}return Q(r.length,s.length)}(e.mapValue,t.mapValue);default:throw A(23264,{le:n})}}function At(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Q(e,t);const n=ut(e),r=ut(t),i=Q(n.seconds,r.seconds);return 0!==i?i:Q(n.nanos,r.nanos)}function Dt(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Pt(n[i],r[i]);if(e)return e}return Q(n.length,r.length)}function jt(e){return Rt(e)}function Rt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ut(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ht(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return se.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Rt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Rt(e.fields[i]));return n+"}"}(e.mapValue):A(61005,{value:e})}function Mt(e){return!!e&&"integerValue"in e}function Ot(e){return!!e&&"arrayValue"in e}function Lt(e){return!!e&&"mapValue"in e}function Ft(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[xt])||void 0===n?void 0:n.stringValue)===Et}function Vt(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ze(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Vt(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Vt(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ut(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ct}class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Lt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vt(t)}setAll(e){let t=ie.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Vt(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Lt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Lt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ze(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Bt(Vt(this.value))}}class zt{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new zt(e,0,fe.min(),fe.min(),fe.min(),Bt.empty(),0)}static newFoundDocument(e,t,n,r){return new zt(e,1,t,fe.min(),n,r,0)}static newNoDocument(e,t){return new zt(e,2,t,fe.min(),fe.min(),Bt.empty(),0)}static newUnknownDocument(e,t){return new zt(e,3,t,fe.min(),fe.min(),Bt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Wt{constructor(e,t){this.position=e,this.inclusive=t}}function Ht(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?se.comparator(se.fromName(o.referenceValue),n.key):Pt(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function qt(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Tt(e.position[n],t.position[n]))return!1;return!0}class Kt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Yt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Gt{}class Qt extends Gt{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new rn(e,t,n):"array-contains"===t?new ln(e,n):"in"===t?new cn(e,n):"not-in"===t?new un(e,n):"array-contains-any"===t?new dn(e,n):new Qt(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new sn(e,n):new on(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Pt(t,this.value)):null!==t&&Nt(this.value)===Nt(t)&&this.matchesComparison(Pt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return A(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $t extends Gt{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new $t(e,t)}matches(e){return Jt(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Jt(e){return"and"===e.op}function Xt(e){return Zt(e)&&Jt(e)}function Zt(e){for(const t of e.filters)if(t instanceof $t)return!1;return!0}function en(e){if(e instanceof Qt)return e.field.canonicalString()+e.op.toString()+jt(e.value);if(Xt(e))return e.filters.map(e=>en(e)).join(",");{const t=e.filters.map(e=>en(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function tn(e,t){return e instanceof Qt?function(e,t){return t instanceof Qt&&e.op===t.op&&e.field.isEqual(t.field)&&Tt(e.value,t.value)}(e,t):e instanceof $t?function(e,t){return t instanceof $t&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&tn(n,t.filters[r]),!0)}(e,t):void A(19439)}function nn(e){return e instanceof Qt?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(jt(e.value))}(e):e instanceof $t?function(e){return e.op.toString()+" {"+e.getFilters().map(nn).join(" ,")+"}"}(e):"Filter"}class rn extends Qt{constructor(e,t,n){super(e,t,n),this.key=se.fromName(n.referenceValue)}matches(e){const t=se.comparator(e.key,this.key);return this.matchesComparison(t)}}class sn extends Qt{constructor(e,t){super(e,"in",t),this.keys=an("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class on extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=an("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function an(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>se.fromName(e.referenceValue))}class ln extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ot(t)&&It(t.arrayValue,this.value)}}class cn extends Qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&It(this.value.arrayValue,t)}}class un extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(It(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!It(this.value.arrayValue,t)}}class dn extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ot(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>It(this.value.arrayValue,e))}}class hn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Pe=null}}function pn(e){return new hn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function fn(e){const t=R(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>en(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ne(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>jt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>jt(e)).join(",")),t.Pe=e}return t.Pe}function mn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Yt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!tn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qt(e.startAt,t.startAt)&&qt(e.endAt,t.endAt)}class gn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function vn(e,t,n,r,i,s,o,a){return new gn(e,t,n,r,i,s,o,a)}function yn(e){return new gn(e)}function bn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function _n(e){return null!==e.collectionGroup}function wn(e){const t=R(e);if(null===t.Te){t.Te=[];const e=new Set;for(const i of t.explicitOrderBy)t.Te.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new it(ie.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new Kt(r,n))}),e.has(ie.keyField().canonicalString())||t.Te.push(new Kt(ie.keyField(),n))}return t.Te}function xn(e){const t=R(e);return t.Ie||(t.Ie=Cn(t,wn(e))),t.Ie}function Cn(e,t){if("F"===e.limitType)return pn(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Kt(e.field,t)});const n=e.endAt?new Wt(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Wt(e.startAt.position,e.startAt.inclusive):null;return pn(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function kn(e,t,n){return new gn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function En(e,t){return mn(xn(e),xn(t))&&e.limitType===t.limitType}function Sn(e){return"".concat(fn(xn(e)),"|lt:").concat(e.limitType)}function Nn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>nn(e)).join(", "),"]")),Ne(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>jt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>jt(e)).join(",")),"Target(".concat(t,")")}(xn(e)),"; limitType=").concat(e.limitType,")")}function Tn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):se.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of wn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ht(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wn(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ht(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wn(e),t))}(e,t)}function In(e){return(t,n)=>{let r=!1;for(const i of wn(e)){const e=Pn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Pn(e,t,n){const r=e.field.isKeyField()?se.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Pt(r,i):A(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return A(19790,{direction:e.dir})}}class An{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ze(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return et(this.inner)}size(){return this.innerSize}}const Dn=new tt(se.comparator);function jn(){return Dn}const Rn=new tt(se.comparator);function Mn(){let e=Rn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function On(e){let t=Rn;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Ln(){return Vn()}function Fn(){return Vn()}function Vn(){return new An(e=>e.toString(),(e,t)=>e.isEqual(t))}new tt(se.comparator);const Un=new it(se.comparator);function Bn(){let e=Un;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const zn=new it(Q);function Wn(){return zn}function Hn(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Te(t)?"-0":t}}function qn(e){return{integerValue:""+e}}class Kn{constructor(){this._=void 0}}function Yn(e,t,n){return e instanceof $n?function(e,t){const n={fields:{[ft]:{stringValue:pt},[gt]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&vt(t)&&(t=yt(t)),t&&(n.fields[mt]=t),{mapValue:n}}(n,t):e instanceof Jn?Xn(e,t):e instanceof Zn?er(e,t):function(e,t){const n=Qn(e,t),r=nr(n)+nr(e.Ee);return Mt(n)&&Mt(e.Ee)?qn(r):Hn(e.serializer,r)}(e,t)}function Gn(e,t,n){return e instanceof Jn?Xn(e,t):e instanceof Zn?er(e,t):n}function Qn(e,t){return e instanceof tr?function(e){return Mt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class $n extends Kn{}class Jn extends Kn{constructor(e){super(),this.elements=e}}function Xn(e,t){const n=rr(t);for(const r of e.elements)n.some(e=>Tt(e,r))||n.push(r);return{arrayValue:{values:n}}}class Zn extends Kn{constructor(e){super(),this.elements=e}}function er(e,t){let n=rr(t);for(const r of e.elements)n=n.filter(e=>!Tt(e,r));return{arrayValue:{values:n}}}class tr extends Kn{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function nr(e){return dt(e.integerValue||e.doubleValue)}function rr(e){return Ot(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class or{}function ar(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new gr(e.key,ir.none()):new dr(e.key,e.data,ir.none());{const n=e.data,r=Bt.empty();let i=new it(ie.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new hr(e.key,r,new ot(i.toArray()),ir.none())}}function lr(e,t,n){e instanceof dr?function(e,t,n){const r=e.value.clone(),i=fr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof hr?function(e,t,n){if(!sr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=fr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(pr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function cr(e,t,n,r){return e instanceof dr?function(e,t,n,r){if(!sr(e.precondition,t))return n;const i=e.value.clone(),s=mr(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof hr?function(e,t,n,r){if(!sr(e.precondition,t))return n;const i=mr(e.fieldTransforms,r,t),s=t.data;return s.setAll(pr(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return sr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ur(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Z(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Jn&&t instanceof Jn||e instanceof Zn&&t instanceof Zn?Z(e.elements,t.elements,Tt):e instanceof tr&&t instanceof tr?Tt(e.Ee,t.Ee):e instanceof $n&&t instanceof $n}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class dr extends or{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class hr extends or{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function pr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function fr(e,t,n){const r=new Map;j(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Gn(o,a,n[i]))}return r}function mr(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Yn(e,s,t))}return r}class gr extends or{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&lr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=cr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=cr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Fn();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=ar(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(fe.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bn())}isEqual(e){return this.batchId===e.batchId&&Z(this.mutations,e.mutations,(e,t)=>ur(e,t))&&Z(this.baseMutations,e.baseMutations,(e,t)=>ur(e,t))}}class yr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var br,_r;function wr(e){if(void 0===e)return T("GRPC error has no .code"),M.UNKNOWN;switch(e){case br.OK:return M.OK;case br.CANCELLED:return M.CANCELLED;case br.UNKNOWN:return M.UNKNOWN;case br.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case br.INTERNAL:return M.INTERNAL;case br.UNAVAILABLE:return M.UNAVAILABLE;case br.UNAUTHENTICATED:return M.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case br.NOT_FOUND:return M.NOT_FOUND;case br.ALREADY_EXISTS:return M.ALREADY_EXISTS;case br.PERMISSION_DENIED:return M.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case br.ABORTED:return M.ABORTED;case br.OUT_OF_RANGE:return M.OUT_OF_RANGE;case br.UNIMPLEMENTED:return M.UNIMPLEMENTED;case br.DATA_LOSS:return M.DATA_LOSS;default:return A(39323,{code:e})}}(_r=br||(br={}))[_r.OK=0]="OK",_r[_r.CANCELLED=1]="CANCELLED",_r[_r.UNKNOWN=2]="UNKNOWN",_r[_r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_r[_r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_r[_r.NOT_FOUND=5]="NOT_FOUND",_r[_r.ALREADY_EXISTS=6]="ALREADY_EXISTS",_r[_r.PERMISSION_DENIED=7]="PERMISSION_DENIED",_r[_r.UNAUTHENTICATED=16]="UNAUTHENTICATED",_r[_r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_r[_r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_r[_r.ABORTED=10]="ABORTED",_r[_r.OUT_OF_RANGE=11]="OUT_OF_RANGE",_r[_r.UNIMPLEMENTED=12]="UNIMPLEMENTED",_r[_r.INTERNAL=13]="INTERNAL",_r[_r.UNAVAILABLE=14]="UNAVAILABLE",_r[_r.DATA_LOSS=15]="DATA_LOSS";new i([4294967295,4294967295],0);Error;class xr{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cr(e){return j(!!e,49232),fe.fromTimestamp(function(e){const t=ut(e);return new pe(t.seconds,t.nanos)}(e))}function kr(e,t){const n=function(e){return new ne(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Er(e){const t=ne.fromString(e);return j(Ar(t),10190,{key:t.toString()}),t}function Sr(e){const t=Er(e);return 4===t.length?ne.emptyPath():Nr(t)}function Nr(e){return j(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Tr(e){let t=Sr(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){j(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ir(e);return t instanceof $t&&Xt(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Kt(Pr(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ne(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Wt(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Wt(n,t)}(n.endAt)),vn(t,i,o,s,a,"F",l,c)}function Ir(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Pr(e.unaryFilter.field);return Qt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Pr(e.unaryFilter.field);return Qt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Pr(e.unaryFilter.field);return Qt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Pr(e.unaryFilter.field);return Qt.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return A(61313);default:return A(60726)}}(e):void 0!==e.fieldFilter?function(e){return Qt.create(Pr(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return A(58110);default:return A(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return $t.create(e.compositeFilter.filters.map(e=>Ir(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return A(1026)}}(e.compositeFilter.op))}(e):A(30097,{filter:e})}function Pr(e){return ie.fromServerFormat(e.fieldPath)}function Ar(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Dr{constructor(e){this.gt=e}}function jr(e){const t=Tr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?kn(t,t.limit,"L"):t}class Rr{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(dt(e.integerValue));else if("doubleValue"in e){const n=dt(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),Te(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=ut(n)),t.Mt("".concat(n.seconds||"")),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ht(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?Ut(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Ft(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):A(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;const i=e.fields||{};this.Ct(t,53);const s=St,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(dt(o)),this.xt(s,t),this.Dt(i[s],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),se.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}Rr.Ut=new Rr;class Mr{constructor(){this.Dn=new Or}addToCollectionParentIndex(e,t){return this.Dn.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(be.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(be.min())}updateCollectionGroup(e,t,n){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class Or{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new it(ne.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new it(ne.comparator)).toArray()}}new Uint8Array(0);const Lr=41943040;class Ur{static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(Lr,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);class Br{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Br(0)}static ur(){return new Br(-1)}}const zr=1048576;class Wr{constructor(){this.changes=new An(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?xe.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Gr{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $r{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&cr(n.mutation,e,ot.empty(),pe.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Bn()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bn();const r=Ln();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Mn();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Ln();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Bn()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=jn();const s=Vn(),o=Vn();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof hr)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),cr(o.mutation,t,o.mutation.getFieldMask(),pe.now())):s.set(t.key,ot.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Gr(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Vn();let r=new tt((e,t)=>e-t),i=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ot.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Bn()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Fn();l.forEach(e=>{if(!i.has(e)){const r=ar(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return xe.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return se.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_n(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):xe.resolve(Ln());let o=me,a=i;return s.next(t=>xe.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?xe.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Bn())).next(e=>({batchId:o,changes:On(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new se(t)).next(e=>{let t=Mn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Mn();return this.indexManager.getCollectionParents(e,i).next(o=>xe.forEach(o,o=>{const a=function(e,t){return new gn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,zt.newInvalidDocument(r)))});let n=Mn();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&cr(s.mutation,r,ot.empty(),pe.now()),Tn(t,r)&&(n=n.insert(e,r))}),n})}}class Zr{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return xe.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Cr(e.createTime)}}(t)),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:jr(e.bundledQuery),readTime:Cr(e.readTime)}}(t)),xe.resolve()}}class ei{constructor(){this.overlays=new tt(se.comparator),this.kr=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ln();return xe.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),xe.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),xe.resolve()}getOverlaysForCollection(e,t,n){const r=Ln(),i=t.length+1,s=new se(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return xe.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new tt((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Ln(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Ln(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return xe.resolve(o)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new yr(t,n));let i=this.kr.get(t);void 0===i&&(i=Bn(),this.kr.set(t,i)),this.kr.set(t,i.add(n.key))}}class ti{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xe.resolve()}}class ni{constructor(){this.qr=new it(ri.Qr),this.$r=new it(ri.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new ri(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new ri(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new se(new ne([])),n=new ri(t,e),r=new ri(t,e+1),i=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new se(new ne([])),n=new ri(t,e),r=new ri(t,e+1);let i=Bn();return this.$r.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new ri(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ri{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return se.comparator(e.key,t.key)||Q(e.Hr,t.Hr)}static Ur(e,t){return Q(e.Hr,t.Hr)||se.comparator(e.key,t.key)}}class si{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new it(ri.Qr)}checkEmpty(e){return xe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new vr(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Yr=this.Yr.add(new ri(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return xe.resolve(s)}lookupMutationBatch(e,t){return xe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return xe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(0===this.mutationQueue.length?Se:this.er-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ri(t,0),r=new ri(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),xe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new it(Q);return t.forEach(e=>{const t=new ri(e,0),r=new ri(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),xe.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;se.isDocumentKey(i)||(i=i.child(""));const s=new ri(new se(i),0);let o=new it(Q);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)},s),xe.resolve(this.ei(o))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){j(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return xe.forEach(t.mutations,r=>{const i=new ri(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new ri(t,0),r=this.Yr.firstAfterOrEqual(n);return xe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oi{constructor(e){this.ni=e,this.docs=new tt(se.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return xe.resolve(n?n.document.mutableCopy():zt.newInvalidDocument(t))}getEntries(e,t){let n=jn();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():zt.newInvalidDocument(e))}),xe.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=jn();const s=t.path,o=new se(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||_e(ye(o),n)<=0||(r.has(o.key)||Tn(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return xe.resolve(i)}getAllFromCollectionGroup(e,t,n,r){A(9500)}ri(e,t){return xe.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ai(this)}getSize(e){return xe.resolve(this.size)}}class ai extends Wr{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),xe.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class li{constructor(e){this.persistence=e,this.ii=new An(e=>fn(e),mn),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.si=0,this.oi=new ni,this.targetCount=0,this._i=Br.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),xe.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Br(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.hr(t),xe.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.ii.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),xe.waitFor(i).next(()=>r)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return xe.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),xe.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),xe.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return xe.resolve(n)}containsKey(e,t){return xe.resolve(this.oi.containsKey(t))}}class ui{constructor(e,t){this.ai={},this.overlays={},this.ui=new Ee(0),this.ci=!1,this.ci=!0,this.li=new ti,this.referenceDelegate=e(this),this.hi=new li(this),this.indexManager=new Mr,this.remoteDocumentCache=function(e){return new oi(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new Dr(t),this.Ti=new Zr(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ei,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new si(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){N("MemoryPersistence","Starting transaction:",e);const r=new di(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return xe.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class di extends we{constructor(e){super(),this.currentSequenceNumber=e}}class hi{constructor(e){this.persistence=e,this.Ai=new ni,this.Ri=null}static Vi(e){return new hi(e)}get mi(){if(this.Ri)return this.Ri;throw A(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),xe.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.mi,n=>{const r=se.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,fe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return xe.or([()=>xe.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class pi{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=Bn(),r=Bn();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new pi(e,t.fromCache,n,r)}}class fi{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mi{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(0,l.nr)()?8:Ce((0,l.ZQ)())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ps(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ys(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new fi;return this.ws(e,t,n).next(r=>{if(i.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>i.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(S()<=a.$b.DEBUG&&N("QueryEngine","SDK will not create cache indexes for query:",Nn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),xe.resolve()):(S()<=a.$b.DEBUG&&N("QueryEngine","Query:",Nn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(S()<=a.$b.DEBUG&&N("QueryEngine","The SDK decides to create cache indexes for query:",Nn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(t))):xe.resolve())}ps(e,t){if(bn(t))return xe.resolve(null);let n=xn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=kn(t,null,"F"),n=xn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Bn(...r);return this.gs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.bs(t,r);return this.Ds(t,s,i,n.readTime)?this.ps(e,kn(t,null,"F")):this.vs(e,s,t,n)}))})))}ys(e,t,n,r){return bn(t)||r.isEqual(fe.min())?xe.resolve(null):this.gs.getDocuments(e,n).next(i=>{const s=this.bs(t,i);return this.Ds(t,s,n,r)?xe.resolve(null):(S()<=a.$b.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nn(t)),this.vs(e,s,t,ve(r,me)).next(e=>e))})}bs(e,t){let n=new it(In(e));return t.forEach((t,r)=>{Tn(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ws(e,t,n){return S()<=a.$b.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",Nn(t)),this.gs.getDocumentsMatchingQuery(e,t,be.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const gi="LocalStore";class vi{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new tt(Q),this.Ms=new An(e=>fn(e),mn),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $r(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function yi(e,t,n,r){return new vi(e,t,n,r)}async function bi(e,t){const n=R(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Bn();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Bs:e,removedBatchIds:i,addedBatchIds:s}))})})}class _i{constructor(){this.activeTargetIds=Wn()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wi{constructor(){this.Fo=new _i,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new _i,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xi{xo(e){}shutdown(){}}const Ci="ConnectivityMonitor";class ki{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){N(Ci,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){N(Ci,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ei=null;function Si(){return null===Ei?Ei=268435456+Math.round(2147483648*Math.random()):Ei++,"0x"+Ei.toString(16)}const Ni="RestConnection",Ti={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ii{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.Ko=this.databaseId.database===_t?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,i){const s=Si(),o=this.Go(e,t.toUriEncodedString());N(Ni,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(a,r,i);const{host:c}=new URL(o),u=(0,l.zJ)(c);return this.jo(e,o,a,n,u).then(t=>(N(Ni,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw I(Ni,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Jo(e,t,n,r,i,s){return this.Wo(e,t,n,r,i)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+k,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=Ti[e];return"".concat(this.$o,"/v1/").concat(t,":").concat(n)}terminate(){}}class Pi{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Ai="WebChannelConnection";class Di extends Ii{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,i){const s=Si();return new Promise((i,o)=>{const a=new d;a.setWithCredentials(!0),a.listenOnce(p.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case f.NO_ERROR:const t=a.getResponseJson();N(Ai,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case f.TIMEOUT:N(Ai,"RPC '".concat(e,"' ").concat(s," timed out")),o(new O(M.DEADLINE_EXCEEDED,"Request time out"));break;case f.HTTP_ERROR:const n=a.getStatus();if(N(Ai,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(t)>=0?t:M.UNKNOWN}(t.status);o(new O(e,t.message))}else o(new O(M.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new O(M.UNAVAILABLE,"Connection failed."));break;default:A(9055,{c_:e,streamId:s,l_:a.getLastErrorCode(),h_:a.getLastError()})}}finally{N(Ai,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);N(Ai,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}P_(e,t,n){const r=Si(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=y(),o=v(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.zo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");N(Ai,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.T_(u);let d=!1,p=!1;const f=new Pi({Ho:t=>{p?N(Ai,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(N(Ai,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),N(Ai,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Yo:()=>u.close()}),b=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(u,h.EventType.OPEN,()=>{p||(N(Ai,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.s_())}),b(u,h.EventType.CLOSE,()=>{p||(p=!0,N(Ai,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.__(),this.I_(u))}),b(u,h.EventType.ERROR,t=>{p||(p=!0,I(Ai,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.__(new O(M.UNAVAILABLE,"The operation could not be completed")))}),b(u,h.EventType.MESSAGE,t=>{var n;if(!p){const i=t.data[0];j(!!i,16349);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){N(Ai,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=br[e];if(void 0!==t)return wr(t)}(t),i=o.message;void 0===n&&(n=M.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),p=!0,f.__(new O(n,i)),u.close()}else N(Ai,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.a_(i)}}),b(o,g.STAT_EVENT,t=>{t.stat===m.PROXY?N(Ai,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===m.NOPROXY&&N(Ai,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function ji(){return"undefined"!=typeof document?document:null}function Ri(e){return new xr(e,!0)}class Mi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&N("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.R_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}class Oi{}class Li extends Oi{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new O(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Wo(e,kr(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(M.UNKNOWN,e.toString())})}Jo(e,t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Jo(e,kr(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(M.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Fi{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this._a?(T(t),this._a=!1):N("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const Vi="RemoteStore";class Ui{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{Wi(this)&&(N(Vi,"Restarting streams for network reachability change."),await async function(e){const t=R(e);t.Ia.add(4),await zi(t),t.Aa.set("Unknown"),t.Ia.delete(4),await Bi(t)}(this))})}),this.Aa=new Fi(n,r)}}async function Bi(e){if(Wi(e))for(const t of e.da)await t(!0)}async function zi(e){for(const t of e.da)await t(!1)}function Wi(e){return 0===R(e).Ia.size}async function Hi(e,t){const n=R(e);t?(n.Ia.delete(2),await Bi(n)):t||(n.Ia.add(2),await zi(n),n.Aa.set("Unknown"))}class qi{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new L,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new qi(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new O(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class Ki{constructor(){this.queries=Yi(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=R(e),r=n.queries;n.queries=Yi(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new O(M.ABORTED,"Firestore shutting down"))}}function Yi(){return new An(e=>Sn(e),En)}function Gi(e){e.Da.forEach(e=>{e.next()})}var Qi,$i;($i=Qi||(Qi={})).Fa="default",$i.Cache="cache";const Ji="SyncEngine";class Xi{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new An(e=>Sn(e),En),this.Tu=new Map,this.Iu=new Set,this.du=new tt(se.comparator),this.Eu=new Map,this.Au=new ni,this.Ru={},this.Vu=new Map,this.mu=Br.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}function Zi(e,t,n){const r=R(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=R(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.wa)i.va(t)&&(r=!0)}),r&&Gi(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function es(e,t,n){const r=R(e),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((e,a)=>{o.push(r.gu(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=pi.Es(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.hu.J_(i),await async function(e,t){const n=R(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>xe.forEach(t,t=>xe.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>xe.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ke(e))throw e;N(gi,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,i)}}}(r.localStore,s))}async function ts(e,t){const n=R(e);if(!n.currentUser.isEqual(t)){N(Ji,"User change. New user:",t.toKey());const e=await bi(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new O(M.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await es(n,e.Bs)}}class ns{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ri(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return yi(this.persistence,new mi,e.initialUser,this.serializer)}Du(e){return new ui(hi.Vi,this.serializer)}bu(e){return new wi}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ns.provider={build:()=>new ns};class rs{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Zi(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ts.bind(null,this.syncEngine),await Hi(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ki}createDatastore(e){const t=Ri(e.databaseInfo.databaseId),n=function(e){return new Di(e)}(e.databaseInfo);return function(e,t,n,r){return new Li(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ui(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Zi(this.syncEngine,e,0),ki.C()?new ki:new xi)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Xi(e,t,n,r,i,s);return o&&(a.fu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=R(e);N(Vi,"RemoteStore shutting down."),t.Ia.add(5),await zi(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}rs.provider={build:()=>new rs};function is(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ss=new Map,os="firestore.googleapis.com",as=!0;class ls{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new O(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=os,this.ssl=as}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:as;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Lr;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<zr)throw new O(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new O(M.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=is(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new O(M.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new O(M.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new O(M.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cs{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ls({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new O(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ls(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new V;switch(e.type){case"firstParty":return new W(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new O(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ss.get(e);t&&(N("ComponentProvider","Removing Datastore"),ss.delete(e),t.terminate())}(this),Promise.resolve()}}class us{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class ds{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ds(this.firestore,e,this._key)}toJSON(){return{type:ds._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ue(t,ds._jsonSchema))return new ds(e,n||null,new se(ne.fromString(t.referencePath)))}}ds._jsonSchemaVersion="firestore/documentReference/1.0",ds._jsonSchema={type:ce("string",ds._jsonSchemaVersion),referencePath:ce("string")};class hs extends us{constructor(e,t,n){super(e,t,yn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ds(this.firestore,null,new se(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}const ps="AsyncQueue";class fs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Mi(this,"async_queue_retry"),this.oc=()=>{const e=ji();e&&N(ps,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=ji();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=ji();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new L;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(Fr){if(!ke(Fr))throw Fr;N(ps,"Operation failed with retryable error: "+Fr)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,T("INTERNAL UNHANDLED ERROR: ",ms(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=qi.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&A(47125,{hc:ms(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function ms(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class gs extends cs{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new fs,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fs(e),this._firestoreClient=void 0,await e}}}class vs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vs(lt.fromBase64String(e))}catch(e){throw new O(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new vs(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ue(e,vs._jsonSchema))return vs.fromBase64String(e.bytes)}}vs._jsonSchemaVersion="firestore/bytes/1.0",vs._jsonSchema={type:ce("string",vs._jsonSchemaVersion),bytes:ce("string")};class ys{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new O(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ie(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bs._jsonSchemaVersion}}static fromJSON(e){if(ue(e,bs._jsonSchema))return new bs(e.latitude,e.longitude)}}bs._jsonSchemaVersion="firestore/geoPoint/1.0",bs._jsonSchema={type:ce("string",bs._jsonSchemaVersion),latitude:ce("number"),longitude:ce("number")};class _s{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ue(e,_s._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new _s(e.vectorValues);throw new O(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_s._jsonSchemaVersion="firestore/vectorValue/1.0",_s._jsonSchema={type:ce("string",_s._jsonSchemaVersion),vectorValues:ce("object")};const ws=new RegExp("[~\\*/\\[\\]]");function xs(e,t,n){if(t.search(ws)>=0)throw Cs("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new ys(...t.split("."))._internalPath}catch(Hr){throw Cs("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Cs(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new O(M.INVALID_ARGUMENT,a+e+l)}class ks{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ds(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Es(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ss("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Es extends ks{data(){return super.data()}}function Ss(e,t){return"string"==typeof t?xs(e,t):t instanceof ys?t._internalPath:t._delegate._internalPath}class Ns{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ts extends ks{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Is(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ss("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ts._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Ts._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ts._jsonSchema={type:ce("string",Ts._jsonSchemaVersion),bundleSource:ce("string","DocumentSnapshot"),bundleName:ce("string"),bundle:ce("string")};class Is extends Ts{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Ps{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ns(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Is(this._firestore,this._userDataWriter,n.key,n,new Ns(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new O(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Is(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ns(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Is(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ns(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:As(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ps._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function As(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return A(61501,{type:e})}}Ps._jsonSchemaVersion="firestore/querySnapshot/1.0",Ps._jsonSchema={type:ce("string",Ps._jsonSchemaVersion),bundleSource:ce("string","QuerySnapshot"),bundleName:ce("string"),bundle:ce("string")};new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){k=e}(r.MF),(0,r.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new gs(new B(e.getProvider("auth-internal")),new q(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new O(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wt(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(w,x,e),(0,r.KO)(w,x,"esm2017")}();var Ds=n(578);const js={apiKey:{NODE_ENV:"production",PUBLIC_URL:"/vacation-manager-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY||"AIzaSyCaQ6ndqGrR_x6fvTrZxdf5cHTNnRIj2Gg",authDomain:{NODE_ENV:"production",PUBLIC_URL:"/vacation-manager-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN||"busvacation-e894a.firebaseapp.com",databaseURL:{NODE_ENV:"production",PUBLIC_URL:"/vacation-manager-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_DATABASE_URL||"https://busvacation-e894a-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:{NODE_ENV:"production",PUBLIC_URL:"/vacation-manager-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID||"busvacation-e894a",storageBucket:{NODE_ENV:"production",PUBLIC_URL:"/vacation-manager-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET||"busvacation-e894a.firebasestorage.app",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"/vacation-manager-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"919121046118",appId:{NODE_ENV:"production",PUBLIC_URL:"/vacation-manager-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID||"1:919121046118:web:033047c3f1bba2164e5ba7",measurementId:{NODE_ENV:"production",PUBLIC_URL:"/vacation-manager-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MEASUREMENT_ID||"G-LBH4VTYQDS"};const Rs=(0,r.Wp)(js),Ms=(0,s.xI)(Rs),Os=(function(e,t){const n="object"==typeof e?e:(0,r.Sx)(),i="string"==typeof e?e:t||_t,s=(0,r.j6)(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;e=le(e,cs);const s=(0,l.zJ)(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),c="".concat(t,":").concat(n);s&&((0,l.gE)("https://".concat(c)),(0,l.P1)("Firestore",!0)),o.host!==os&&o.host!==c&&I("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!(0,l.bD)(u,a)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=C.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new O(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new C(s)}e._authCredentials=new U(new F(t,n))}}(s,...e)}}(Rs),(0,Ds.C3)(Rs)),Ls=(0,Ds.C3)(Rs)},551:(e,t,n)=>{n.d(t,{xI:()=>Dn,hg:()=>lt,x9:()=>at,CI:()=>ct});var r=n(913),i=n(170),s=n(624);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var a=n(253);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,u=new i.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new s.Vy("@firebase/auth");function h(e){if(d.logLevel<=s.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];d.error("Auth (".concat(r.MF,"): ").concat(e),...n)}}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw v(e,...n)}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v(e,...n)}function m(e,t,n){const r=Object.assign(Object.assign({},c()),{[t]:n});return new i.FA("auth","Firebase",r).create(t,{appName:e.name})}function g(e){return m(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return u.create(e,...n)}function y(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw v(t,...r)}}function b(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function _(e,t){e||b(t)}function w(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function x(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,_(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.jZ)()||(0,i.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(x()||(0,i.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function E(e,t){_(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class S{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},T=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I=new k(3e4,6e4);function P(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function A(e,t,n,r){return D(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const a=(0,i.Am)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},s);return(0,i.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,i.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),S.fetch()(await R(e,e.config.apiHost,n,a),c)})}async function D(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},N),t);try{const t=new O(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw L(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw L(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw L(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw L(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(e,a,o);p(e,a)}}catch(Fr){if(Fr instanceof i.g)throw Fr;p(e,"network-request-failed",{message:String(Fr)})}}async function j(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await A(e,t,n,r,i);return"mfaPendingCredential"in s&&p(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function R(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?E(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(T.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function M(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class O{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(f(this.auth,"network-request-failed")),I.get())})}}function L(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=f(e,t,r);return i.customData._tokenResponse=n,i}function F(e){return void 0!==e&&void 0!==e.enterprise}class V{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return M(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function U(e,t){return A(e,"GET","/v2/recaptchaConfig",P(e,t))}async function B(e,t){return A(e,"POST","/v1/accounts:lookup",t)}function z(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Fr){}}function W(e){return 1e3*Number(e)}function H(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(Fr){return h("Caught error parsing JWT payload as JSON",null===Fr||void 0===Fr?void 0:Fr.toString()),null}}function q(e){const t=H(e);return y(t,"internal-error"),y("undefined"!==typeof t.exp,"internal-error"),y("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function K(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Fr){throw Fr instanceof i.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Fr)&&e.auth.currentUser===e&&await e.auth.signOut(),Fr}}class Y{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Fr){return void((null===Fr||void 0===Fr?void 0:Fr.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class G{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=z(this.lastLoginAt),this.creationTime=z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Q(e){var t;const n=e.auth,r=await e.getIdToken(),i=await K(e,B(n,{idToken:r}));y(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?$(s.providerUserInfo):[],a=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new G(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function $(e){return e.map(e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class J{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y("undefined"!==typeof e.idToken,"internal-error"),y("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):q(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){y(0!==e.length,"internal-error");const t=q(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await D(e,{},async()=>{const n=(0,i.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=await R(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:n};return e.emulatorConfig&&(0,i.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),S.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new J;return n&&(y("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(y("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(y("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new J,this.toJSON())}_performRefresh(){return b("not implemented")}}function X(e,t){y("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Z{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Y(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new G(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await K(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,i.Ku)(e),r=await n.getIdToken(t),s=H(r);y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"===typeof s.firebase?s.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:z(W(s.auth_time)),issuedAtTime:z(W(s.iat)),expirationTime:z(W(s.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,i.Ku)(e);await Q(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Z(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Q(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(g(this.auth));const e=await this.getIdToken();return await K(this,async function(e,t){return A(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:_,isAnonymous:w,providerData:x,stsTokenManager:C}=t;y(b&&C,e,"internal-error");const k=J.fromJSON(this.name,C);y("string"===typeof b,e,"internal-error"),X(u,e.name),X(d,e.name),y("boolean"===typeof _,e,"internal-error"),y("boolean"===typeof w,e,"internal-error"),X(h,e.name),X(p,e.name),X(f,e.name),X(m,e.name),X(g,e.name),X(v,e.name);const E=new Z({uid:b,auth:e,email:d,emailVerified:_,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:k,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(E.providerData=x.map(e=>Object.assign({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new J;r.updateFromServerResponse(t);const i=new Z({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Q(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];y(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?$(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new J;o.updateFromIdToken(n);const a=new Z({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new G(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const ee=new Map;function te(e){_(e instanceof Function,"Expected a class definition");let t=ee.get(e);return t?(_(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ee.set(e,t),t)}class ne{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ne.type="NONE";const re=ne;function ie(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class se{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ie(this.userKey,r.apiKey,i),this.fullPersistenceKey=ie("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await B(this.auth,{idToken:e}).catch(()=>{});return t?Z._fromGetAccountInfoResponse(this.auth,t,e):null}return Z._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new se(te(re),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||te(re);const s=ie(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await B(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Z._fromGetAccountInfoResponse(e,r,t)}else n=Z._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new se(i,e,n)):new se(i,e,n)}}function oe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ue(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ae(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(he(t))return"Blackberry";if(pe(t))return"Webos";if(le(t))return"Safari";if((t.includes("chrome/")||ce(t))&&!t.includes("edge/"))return"Chrome";if(de(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/firefox\//i.test(e)}function le(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/crios\//i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/iemobile/i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/android/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/blackberry/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/webos/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return fe(e)||de(e)||pe(e)||he(e)||/windows phone/i.test(e)||ue(e)}function ge(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oe((0,i.ZQ)());break;case"Worker":t="".concat(oe((0,i.ZQ)()),"-").concat(e);break;default:t=e}const s=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(r.MF,"/").concat(s)}class ve{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Fr){r(Fr)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Fr){t.reverse();for(const n of t)try{n()}catch(ai){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Fr||void 0===Fr?void 0:Fr.message})}}}class ye{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class be{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new we(this),this.idTokenSubscription=new we(this),this.beforeStateQueue=new ve(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=te(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await se.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Fr){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await B(this,{idToken:e}),n=await Z._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==r||!(null===o||void 0===o?void 0:o.user)||(i=o.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(Fr){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Fr))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Fr){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Q(e)}catch(Fr){if((null===Fr||void 0===Fr?void 0:Fr.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(g(this));const t=e?(0,i.Ku)(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(g(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(te(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return A(e,"GET","/v2/passwordPolicy",P(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ye(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new i.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return A(e,"POST","/v2/accounts:revokeToken",P(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&te(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await se.create(this,[te(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(y(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ge(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(d.logLevel<=s.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];d.warn("Auth (".concat(r.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function _e(e){return(0,i.Ku)(e)}class we{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.tD)(e=>this.observer=e)}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ce(e){return xe.loadJS(e)}function ke(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ee{constructor(){this.enterprise=new Se}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Se{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ne="NO_RECAPTCHA";class Te{constructor(e){this.type="recaptcha-enterprise",this.auth=_e(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;F(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ne)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ee).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{U(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new V(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&F(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=xe.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ce(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ie(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Te(e);let o;if(i)o=Ne;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Pe(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ie(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Ie(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await Ie(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Ie(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Ie(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Ae(e){const t=_e(e),n=await U(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new V(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Te(t).verify()}}function De(e,t,n){const r=_e(e);y(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),o=je(t),{host:a,port:l}=function(e){const t=je(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Re(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Re(t)}}}(t),c=null===l?"":":".concat(l),u={url:"".concat(o,"//").concat(a).concat(c,"/")},d=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void y((0,i.bD)(u,r.config.emulator)&&(0,i.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,i.zJ)(a)?((0,i.gE)("".concat(o,"//").concat(a).concat(c)),(0,i.P1)("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function je(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Re(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Me{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}async function Oe(e,t){return A(e,"POST","/v1/accounts:signUp",t)}async function Le(e,t){return j(e,"POST","/v1/accounts:signInWithPassword",P(e,t))}class Fe extends Me{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Fe(e,t,"password")}static _fromEmailAndCode(e,t){return new Fe(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Pe(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Le,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))}(e,{email:this._email,oobCode:this._password});default:p(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Pe(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Oe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:p(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ve(e,t){return j(e,"POST","/v1/accounts:signInWithIdp",P(e,t))}class Ue extends Me{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ue(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ue(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ve(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ve(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ve(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.Am)(t)}return e}}async function Be(e,t){return A(e,"POST","/v1/accounts:sendVerificationCode",P(e,t))}const ze={USER_NOT_FOUND:"user-not-found"};class We extends Me{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new We({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new We({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await j(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t));if(n.temporaryProof)throw L(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ze)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new We({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class He{constructor(e){var t,n,r,s,o,a;const l=(0,i.I9)((0,i.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);y(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.lang)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,i.I9)((0,i.hp)(e)).link,n=t?(0,i.I9)((0,i.hp)(t)).deep_link_id:null,r=(0,i.I9)((0,i.hp)(e)).deep_link_id;return(r?(0,i.I9)((0,i.hp)(r)).link:null)||r||n||t||e}(e);try{return new He(t)}catch(n){return null}}}class qe{constructor(){this.providerId=qe.PROVIDER_ID}static credential(e,t){return Fe._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=He.parseLink(t);return y(n,"argument-error"),Fe._fromEmailAndCode(e,n.code,n.tenantId)}}qe.PROVIDER_ID="password",qe.EMAIL_PASSWORD_SIGN_IN_METHOD="password",qe.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ke{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ye extends Ke{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ge extends Ye{constructor(){super("facebook.com")}static credential(e){return Ue._fromParams({providerId:Ge.PROVIDER_ID,signInMethod:Ge.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ge.credentialFromTaggedObject(e)}static credentialFromError(e){return Ge.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ge.credential(t.oauthAccessToken)}catch(n){return null}}}Ge.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ge.PROVIDER_ID="facebook.com";class Qe extends Ye{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ue._fromParams({providerId:Qe.PROVIDER_ID,signInMethod:Qe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qe.credentialFromTaggedObject(e)}static credentialFromError(e){return Qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Qe.credential(n,r)}catch(i){return null}}}Qe.GOOGLE_SIGN_IN_METHOD="google.com",Qe.PROVIDER_ID="google.com";class $e extends Ye{constructor(){super("github.com")}static credential(e){return Ue._fromParams({providerId:$e.PROVIDER_ID,signInMethod:$e.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $e.credentialFromTaggedObject(e)}static credentialFromError(e){return $e.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $e.credential(t.oauthAccessToken)}catch(n){return null}}}$e.GITHUB_SIGN_IN_METHOD="github.com",$e.PROVIDER_ID="github.com";class Je extends Ye{constructor(){super("twitter.com")}static credential(e,t){return Ue._fromParams({providerId:Je.PROVIDER_ID,signInMethod:Je.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Je.credentialFromTaggedObject(e)}static credentialFromError(e){return Je.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Je.credential(n,r)}catch(i){return null}}}Je.TWITTER_SIGN_IN_METHOD="twitter.com",Je.PROVIDER_ID="twitter.com";class Xe{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Z._fromIdTokenResponse(e,n,r),s=Ze(n);return new Xe({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ze(n);return new Xe({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ze(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class et extends i.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,et.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new et(e,t,n,r)}}function tt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw et._fromErrorAndOperation(e,n,t,r);throw n})}async function nt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await K(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Xe._forOperation(e,"link",r)}async function rt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if((0,r.xZ)(i.app))return Promise.reject(g(i));const s="reauthenticate";try{const r=await K(e,tt(i,s,t,e),n);y(r.idToken,i,"internal-error");const o=H(r.idToken);y(o,i,"internal-error");const{sub:a}=o;return y(e.uid===a,i,"user-mismatch"),Xe._forOperation(e,s,r)}catch(Fr){throw(null===Fr||void 0===Fr?void 0:Fr.code)==="auth/".concat("user-not-found")&&p(i,"user-mismatch"),Fr}}async function it(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const i="signIn",s=await tt(e,i,t),o=await Xe._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(o.user),o}async function st(e,t){return it(_e(e),t)}async function ot(e){const t=_e(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function at(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(g(e)):st((0,i.Ku)(e),qe.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ot(e),t})}function lt(e,t,n,r){return(0,i.Ku)(e).onAuthStateChanged(t,n,r)}function ct(e){return(0,i.Ku)(e).signOut()}function ut(e,t){return A(e,"POST","/v2/accounts/mfaEnrollment:start",P(e,t))}new WeakMap;const dt="__sak";class ht{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dt,"1"),this.storage.removeItem(dt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class pt extends ht{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=me(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.lT)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pt.type="LOCAL";const ft=pt;function mt(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function gt(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class vt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=gt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return mt(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=gt(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=gt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=mt(n);const i=setInterval(()=>{const e=mt(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}vt.type="COOKIE";class yt extends ht{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yt.type="SESSION";const bt=yt;class _t{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new _t(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function wt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}_t.receivers=[];class xt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=wt("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Ct(){return window}function kt(){return"undefined"!==typeof Ct().WorkerGlobalScope&&"function"===typeof Ct().importScripts}const Et="firebaseLocalStorageDb",St="firebaseLocalStorage",Nt="fbase_key";class Tt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function It(e,t){return e.transaction([St],t?"readwrite":"readonly").objectStore(St)}function Pt(){const e=indexedDB.open(Et,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(St,{keyPath:Nt})}catch(Fr){n(Fr)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(St)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Et);return new Tt(e).toPromise()}(),t(await Pt()))})})}async function At(e,t,n){const r=It(e,!0).put({[Nt]:t,value:n});return new Tt(r).toPromise()}function Dt(e,t){const n=It(e,!0).delete(t);return new Tt(n).toPromise()}class jt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Pt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Fr){if(t++>3)throw Fr;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_t._getInstance(kt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new xt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pt();return await At(e,dt,"1"),await Dt(e,dt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>At(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=It(e,!1).get(t),r=await new Tt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Dt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=It(e,!1).getAll();return new Tt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}jt.type="LOCAL";const Rt=jt;function Mt(e,t){return A(e,"POST","/v2/accounts/mfaSignIn:start",P(e,t))}ke("rcb"),new k(3e4,6e4);const Ot="recaptcha";async function Lt(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Ae(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){y("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Pe(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ne){y((null===n||void 0===n?void 0:n.type)===Ot,e,"argument-error");return ut(e,await Ft(e,t,n))}return ut(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;y(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Pe(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ne){y((null===n||void 0===n?void 0:n.type)===Ot,e,"argument-error");return Mt(e,await Ft(e,t,n))}return Mt(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Pe(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ne){y((null===n||void 0===n?void 0:n.type)===Ot,e,"argument-error");return Be(e,await Ft(e,t,n))}return Be(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ft(e,t,n){y(n.type===Ot,e,"argument-error");const r=await n.verify();y("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Vt{constructor(e){this.providerId=Vt.PROVIDER_ID,this.auth=_e(e)}verifyPhoneNumber(e,t){return Lt(this.auth,e,(0,i.Ku)(t))}static credential(e,t){return We._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Vt.credentialFromTaggedObject(t)}static credentialFromError(e){return Vt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?We._fromTokenResponse(n,r):null}}function Ut(e,t){return t?te(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Vt.PROVIDER_ID="phone",Vt.PHONE_SIGN_IN_METHOD="phone";class Bt extends Me{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ve(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ve(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ve(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zt(e){return it(e.auth,new Bt(e),e.bypassAuthState)}function Wt(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),rt(n,new Bt(e),e.bypassAuthState)}async function Ht(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),nt(n,new Bt(e),e.bypassAuthState)}class qt{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Fr){this.reject(Fr)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(Fr){this.reject(Fr)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zt;case"linkViaPopup":case"linkViaRedirect":return Ht;case"reauthViaPopup":case"reauthViaRedirect":return Wt;default:p(this.auth,"internal-error")}}resolve(e){_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kt=new k(2e3,1e4);class Yt extends qt{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Yt.currentPopupAction&&Yt.currentPopupAction.cancel(),Yt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){_(1===this.filter.length,"Popup operations only handle one event");const e=wt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(f(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(f(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Kt.get())};e()}}Yt.currentPopupAction=null;const Gt=new Map;class Qt extends qt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Gt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Xt(t),r=Jt(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(Fr){e=()=>Promise.reject(Fr)}Gt.set(this.auth._key(),e)}return this.bypassAuthState||Gt.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function $t(e,t){Gt.set(e._key(),t)}function Jt(e){return te(e._redirectPersistence)}function Xt(e){return ie("pendingRedirect",e.config.apiKey,e.name)}async function Zt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const i=_e(e),s=Ut(i,t),o=new Qt(i,s,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}class en{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!nn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(f(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tn(e))}saveEventToCache(e){this.cachedEventUids.add(tn(e)),this.lastProcessedEventTime=Date.now()}}function tn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function nn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const rn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sn=/^https?/;async function on(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return A(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(an(r))return}catch(n){}p(e,"unauthorized-domain")}function an(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!sn.test(n))return!1;if(rn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ln=new k(3e4,6e4);function cn(){const e=Ct().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function un(e){return new Promise((t,n)=>{var r,i,s;function o(){cn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{cn(),n(f(e,"network-request-failed"))},timeout:ln.get()})}if(null===(i=null===(r=Ct().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Ct().gapi)||void 0===s?void 0:s.load)){const t=ke("iframefcb");return Ct()[t]=()=>{gapi.load?o():n(f(e,"network-request-failed"))},Ce("".concat(xe.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw dn=null,e})}let dn=null;const hn=new k(5e3,15e3),pn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mn(e){const t=e.config;y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?E(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),s={apiKey:t.apiKey,appName:e.name,v:r.MF},o=fn.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),"".concat(n,"?").concat((0,i.Am)(s).slice(1))}async function gn(e){const t=await function(e){return dn=dn||un(e),dn}(e),n=Ct().gapi;return y(n,e,"internal-error"),t.open({where:document.body,url:mn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=f(e,"network-request-failed"),s=Ct().setTimeout(()=>{r(i)},hn.get());function o(){Ct().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const vn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Fr){}}}function bn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},vn),{width:r.toString(),height:s.toString(),top:o,left:a}),u=(0,i.ZQ)().toLowerCase();n&&(l=ce(u)?"_blank":n),ae(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return fe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new yn(null);const h=window.open(t||"",l,d);y(h,e,"popup-blocked");try{h.focus()}catch(Fr){}return new yn(h)}const _n="__/auth/handler",wn="emulator/auth/handler",xn=encodeURIComponent("fac");async function Cn(e,t,n,s,o,a){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:r.MF,eventId:o};if(t instanceof Ke){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof Ye){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?"#".concat(xn,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(_n);return E(t,wn)}(e),"?").concat((0,i.Am)(c).slice(1)).concat(d)}const kn="webStorageSupport";const En=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bt,this._completeRedirectFn=Zt,this._overrideRedirectResult=$t}async _openPopup(e,t,n,r){var i;_(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return bn(e,await Cn(e,t,n,w(),r),wt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ct().location.href=e}(await Cn(e,t,n,w(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(_(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await gn(e),n=new en(e);return t.register("authEvent",t=>{y(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kn,{type:kn},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[kn];void 0!==i&&t(!!i),p(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=on(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return me()||le()||fe()}};var Sn="@firebase/auth",Nn="1.10.8";class Tn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const In=(0,i.XA)("authIdTokenMaxAge")||300;let Pn=null;const An=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>In)return;const i=null===n||void 0===n?void 0:n.token;Pn!==i&&(Pn=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function Dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,i.bD)(r,null!==t&&void 0!==t?t:{}))return e;p(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:En,persistence:[Rt,ft,bt]}),s=(0,i.XA)("authTokenSyncURL");if(s&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=An(e.toString());!function(e,t,n){(0,i.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,i.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const o=(0,i.Tj)("auth");return o&&De(n,"http://".concat(o)),n}var jn;!function(e){xe=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=f("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),jn="Browser",(0,r.om)(new a.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:jn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ge(jn)},c=new be(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(te);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,r.om)(new a.uA("auth-internal",e=>(e=>new Tn(e))(_e(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(Sn,Nn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(jn)),(0,r.KO)(Sn,Nn,"esm2017")},578:(e,t,n)=>{n.d(t,{Jt:()=>Pi,C3:()=>Vi,Zy:()=>Ri,VC:()=>Ni,KR:()=>Ei,TF:()=>Ti,hZ:()=>Ii});var r=n(913),i=n(253),s=n(170),o=n(624);const a="@firebase/database",l="1.0.20";let c="";function u(e){c=e}class d{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,s.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,s.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class h{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,s.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const p=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new d(t)}}catch(Fr){}return new h},f=p("localStorage"),m=p("sessionStorage"),g=new o.Vy("@firebase/database"),v=function(){let e=1;return function(){return e++}}(),y=function(e){const t=(0,s.kj)(e),n=new s.gz;n.update(t);const r=n.digest();return s.K3.encodeByteArray(r)},b=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=b.apply(null,n):e+="object"===typeof n?(0,s.As)(n):n,e+=" "}return e};let _=null,w=!0;const x=function(e,t){(0,s.vA)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(g.logLevel=o.$b.VERBOSE,_=g.log.bind(g),t&&m.set("logging_enabled",!0)):"function"===typeof e?_=e:(_=null,m.remove("logging_enabled"))},C=function(){if(!0===w&&(w=!1,null===_&&!0===m.get("logging_enabled")&&x(!0)),_){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=b.apply(null,t);_(r)}},k=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];C(e,...n)}},E=function(){const e="FIREBASE INTERNAL ERROR: "+b(...arguments);g.error(e)},S=function(){const e="FIREBASE FATAL ERROR: ".concat(b(...arguments));throw g.error(e),new Error(e)},N=function(){const e="FIREBASE WARNING: "+b(...arguments);g.warn(e)},T=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",P="[MAX_NAME]",A=function(e,t){if(e===t)return 0;if(e===I||t===P)return-1;if(t===I||e===P)return 1;{const n=V(e),r=V(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},D=function(e,t){return e===t?0:e<t?-1:1},j=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,s.As)(t))},R=function(e){if("object"!==typeof e||null===e)return(0,s.As)(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=(0,s.As)(t[r]),n+=":",n+=R(e[t[r]]);return n+="}",n},M=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function O(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const L=function(e){(0,s.vA)(!T(e),"Invalid JSON number");const t=1023;let n,r,i,o,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const l=[];for(a=52;a;a-=1)l.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)l.push(r%2?1:0),r=Math.floor(r/2);l.push(n?1:0),l.reverse();const c=l.join("");let u="";for(a=0;a<64;a+=8){let e=parseInt(c.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()};const F=new RegExp("^-?(0*)\\d{1,10}$"),V=function(e){if(F.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},U=function(e){try{e()}catch(Fr){setTimeout(()=>{const t=Fr.stack||"";throw N("Exception was thrown by user callback.",t),Fr},Math.floor(0))}},B=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class z{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,(0,r.xZ)(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){N('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class W{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',N(e)}}class H{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}H.OWNER="owner";const q="5",K=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Y="ac",G="websocket",Q="long_polling";class ${constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function J(e,t,n){let r;if((0,s.vA)("string"===typeof t,"typeof type must == string"),(0,s.vA)("object"===typeof n,"typeof params must == object"),t===G)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Q)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return O(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}class X{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,s.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,s.A4)(this.counters_)}}const Z={},ee={};function te(e){const t=e.toString();return Z[t]||(Z[t]=new X),Z[t]}class ne{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&U(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const re="start";class ie{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k(e),this.stats_=te(t),this.urlFn=e=>(this.appCheckToken&&(e[Y]=this.appCheckToken),J(t,Q,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ne(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,s.$g)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new se(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===re)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,()=>{n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},()=>{this.onClosed_()},this.urlFn);const e={};e[re]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=q,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Y]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&K.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ie.forceAllow_=!0}static forceDisallow(){ie.forceDisallow_=!0}static isAvailable(){return!(0,s.$g)()&&(!!ie.forceAllow_||!ie.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,s.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,s.KA)(t),r=M(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,s.$g)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,s.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class se{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,s.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=v(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=se.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(Fr){C("frame writing exception"),Fr.stack&&C(Fr.stack),C(Fr)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||C("No IE domain setting required")}catch(Fr){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){(0,s.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{C("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(Fr){}},Math.floor(1))}}let oe=null;"undefined"!==typeof MozWebSocket?oe=MozWebSocket:"undefined"!==typeof WebSocket&&(oe=WebSocket);class ae{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k(this.connId),this.stats_=te(t),this.connURL=ae.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=q,!(0,s.$g)()&&"undefined"!==typeof location&&location.hostname&&K.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[Y]=r),i&&(o.p=i),J(e,G,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{let e;if((0,s.$g)()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(q,"/").concat(c,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/vacation-manager-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new oe(this.connURL,[],e)}catch(Fr){this.log_("Error instantiating WebSocket.");const t=Fr.message||Fr.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){ae.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==oe&&!ae.forceDisallow_}static previouslyFailed(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")}markConnectionHealthy(){f.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,s.$L)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,s.vA)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,s.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=M(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(Fr){this.log_("Exception thrown from WebSocket.send():",Fr.message||Fr.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ae.responsesRequiredToBeHealthy=2,ae.healthyTimeout=3e4;class le{static get ALL_TRANSPORTS(){return[ie,ae]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=ae&&ae.isAvailable();let n=t&&!ae.previouslyFailed();if(e.webSocketOnly&&(t||N("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[ae];else{const e=this.transports_=[];for(const t of le.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);le.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}le.globalTransportInitialized_=!1;class ce{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k("c:"+this.id+":"),this.transportManager_=new le(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=B(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=j("t",e),n=j("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=j("t",e),n=j("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=j("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?E("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),q!==n&&N("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),B(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):B(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ue{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class de{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,s.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){(0,s.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class he extends de{static getInstance(){return new he}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,s.jZ)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return(0,s.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class pe{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function fe(){return new pe("")}function me(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ge(e){return e.pieces_.length-e.pieceNum_}function ve(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new pe(e.pieces_,t)}function ye(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function _e(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new pe(t,0)}function we(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof pe)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new pe(n,0)}function xe(e){return e.pieceNum_>=e.pieces_.length}function Ce(e,t){const n=me(e),r=me(t);if(null===n)return t;if(n===r)return Ce(ve(e),ve(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ke(e,t){if(ge(e)!==ge(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ee(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(ge(e)>ge(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Se{constructor(e,t){this.errorPrefix_=t,this.parts_=be(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,s.OE)(this.parts_[n]);Ne(this)}}function Ne(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Te(e))}function Te(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Ie extends de{static getInstance(){return new Ie}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return(0,s.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Pe=1e3;class Ae extends ue{constructor(e,t,n,r,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ae.nextPersistentConnectionId_++,this.log_=k("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pe,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,s.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ie.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&he.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,s.As)(i)),(0,s.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new s.cY,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),(0,s.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,s.vA)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,i=>{const s=i.d,o=i.s;Ae.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&(0,s.gR)(e,"w")){const n=(0,s.yw)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();N("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,s.qc)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,s.Cv)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,s.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,s.As)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):E("Unrecognized action received from server: "+(0,s.As)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,s.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pe,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Pe,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Pe),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ae.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,n())},c=function(e){(0,s.vA)(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[s,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=l&&l.token,a=new ce(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{N(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},i))}catch(E){this.log_("Failed to get token: "+E),o||(this.repoInfo_.nodeAdmin&&N(E),l())}}}interrupt(e){C("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){C("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,s.Im)(this.interruptReasons_)&&(this.reconnectDelay_=Pe,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>R(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new pe(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){C("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){C("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,s.$g)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+c.replace(/\./g,"-")]=1,(0,s.jZ)()?e["framework.cordova"]=1:(0,s.lV)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=he.getInstance().currentlyOnline();return(0,s.Im)(this.interruptReasons_)&&e}}Ae.nextPersistentConnectionId_=0,Ae.nextConnectionId_=0;class De{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new De(e,t)}}class je{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new De(I,e),r=new De(I,t);return 0!==this.compare(n,r)}minPost(){return De.MIN}}let Re;class Me extends je{static get __EMPTY_NODE(){return Re}static set __EMPTY_NODE(e){Re=e}compare(e,t){return A(e.name,t.name)}isDefinedOn(e){throw(0,s.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return De.MIN}maxPost(){return new De(P,Re)}makePost(e,t){return(0,s.vA)("string"===typeof e,"KeyIndex indexValue must always be a string."),new De(e,Re)}toString(){return".key"}}const Oe=new Me;class Le{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Fe{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Fe.RED,this.left=null!=r?r:Ve.EMPTY_NODE,this.right=null!=i?i:Ve.EMPTY_NODE}copy(e,t,n,r,i){return new Fe(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ve.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ve.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Fe.RED=!0,Fe.BLACK=!1;class Ve{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ve(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fe.BLACK,null,null))}remove(e){return new Ve(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fe.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Le(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Le(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Le(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Le(this.root_,null,this.comparator_,!0,e)}}function Ue(e,t){return A(e.name,t.name)}function Be(e,t){return A(e,t)}let ze;Ve.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Fe(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const We=function(e){return"number"===typeof e?"number:"+L(e):"string:"+e},He=function(e){if(e.isLeafNode()){const t=e.val();(0,s.vA)("string"===typeof t||"number"===typeof t||"object"===typeof t&&(0,s.gR)(t,".sv"),"Priority must be a string or number.")}else(0,s.vA)(e===ze||e.isEmpty(),"priority of unexpected type.");(0,s.vA)(e===ze||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qe,Ke,Ye;class Ge{static set __childrenNodeConstructor(e){qe=e}static get __childrenNodeConstructor(){return qe}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ge.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,s.vA)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),He(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ge(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Ge.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return xe(e)?this:".priority"===me(e)?this.priorityNode_:Ge.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Ge.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=me(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:((0,s.vA)(".priority"!==n||1===ge(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Ge.__childrenNodeConstructor.EMPTY_NODE.updateChild(ve(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+We(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?L(this.value_):this.value_,this.lazyHash_=y(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ge.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ge.__childrenNodeConstructor?-1:((0,s.vA)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Ge.VALUE_TYPE_ORDER.indexOf(t),i=Ge.VALUE_TYPE_ORDER.indexOf(n);return(0,s.vA)(r>=0,"Unknown leaf type: "+t),(0,s.vA)(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Ge.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Qe=new class extends je{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?A(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return De.MIN}maxPost(){return new De(P,new Ge("[PRIORITY-POST]",Ye))}makePost(e,t){const n=Ke(e);return new De(t,new Ge("[PRIORITY-POST]",n))}toString(){return".priority"}},$e=Math.log(2);class Je{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/$e,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Xe=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Fe(a,o.node,Fe.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Fe(a,o.node,Fe.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],d=n?n(u):u;l(new Fe(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Fe.BLACK):(a(r,Fe.BLACK),a(r,Fe.RED))}return s}(new Je(e.length));return new Ve(r||t,s)};let Ze;const et={};class tt{static get Default(){return(0,s.vA)(et&&Qe,"ChildrenNode.ts has not been loaded"),Ze=Ze||new tt({".priority":et},{".priority":Qe}),Ze}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=(0,s.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ve?t:null}hasIndex(e){return(0,s.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,s.vA)(e!==Oe,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(De.Wrap);let o,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();o=r?Xe(n,e.getCompare()):et;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=o,new tt(u,c)}addToIndexes(e,t){const n=(0,s.kH)(this.indexes_,(n,r)=>{const i=(0,s.yw)(this.indexSet_,r);if((0,s.vA)(i,"Missing index implementation for "+r),n===et){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(De.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Xe(n,i.getCompare())}return et}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new De(e.name,r))),i.insert(e,e.node)}});return new tt(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,s.kH)(this.indexes_,n=>{if(n===et)return n;{const r=t.get(e.name);return r?n.remove(new De(e.name,r)):n}});return new tt(n,this.indexSet_)}}let nt;class rt{static get EMPTY_NODE(){return nt||(nt=new rt(new Ve(Be),null,tt.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&He(this.priorityNode_),this.children_.isEmpty()&&(0,s.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nt}updatePriority(e){return this.children_.isEmpty()?this:new rt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?nt:t}}getChild(e){const t=me(e);return null===t?this:this.getImmediateChild(t).getChild(ve(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,s.vA)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new De(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?nt:this.priorityNode_;return new rt(r,s,i)}}updateChild(e,t){const n=me(e);if(null===n)return t;{(0,s.vA)(".priority"!==me(e)||1===ge(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(ve(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Qe,(s,o)=>{t[s]=o.val(e),n++,i&&rt.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1}),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+We(this.getPriority().val())+":"),this.forEachChild(Qe,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":y(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new De(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new De(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new De(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,De.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,De.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===it?-1:0}withIndex(e){if(e===Oe||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new rt(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Oe||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Qe),n=t.getIterator(Qe);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Oe?null:this.indexMap_.get(e.toString())}}rt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const it=new class extends rt{constructor(){super(new Ve(Be),rt.EMPTY_NODE,tt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return rt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(De,{MIN:{value:new De(I,rt.EMPTY_NODE)},MAX:{value:new De(P,it)}}),Me.__EMPTY_NODE=rt.EMPTY_NODE,Ge.__childrenNodeConstructor=rt,ze=it,function(e){Ye=e}(it);const st=!0;function ot(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return rt.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),(0,s.vA)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Ge(e,ot(t))}if(e instanceof Array||!st){let n=rt.EMPTY_NODE;return O(e,(t,r)=>{if((0,s.gR)(e,t)&&"."!==t.substring(0,1)){const e=ot(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(ot(t))}{const n=[];let r=!1;if(O(e,(e,t)=>{if("."!==e.substring(0,1)){const i=ot(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new De(e,i)))}}),0===n.length)return rt.EMPTY_NODE;const i=Xe(n,Ue,e=>e.name,Be);if(r){const e=Xe(n,Qe.getCompare());return new rt(i,ot(t),new tt({".priority":e},{".priority":Qe}))}return new rt(i,ot(t),tt.Default)}}!function(e){Ke=e}(ot);class at extends je{constructor(e){super(),this.indexPath_=e,(0,s.vA)(!xe(e)&&".priority"!==me(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?A(e.name,t.name):i}makePost(e,t){const n=ot(e),r=rt.EMPTY_NODE.updateChild(this.indexPath_,n);return new De(t,r)}maxPost(){const e=rt.EMPTY_NODE.updateChild(this.indexPath_,it);return new De(P,e)}toString(){return be(this.indexPath_,0).join("/")}}const lt=new class extends je{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?A(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return De.MIN}maxPost(){return De.MAX}makePost(e,t){const n=ot(e);return new De(t,n)}toString(){return".value"}};function ct(e){return{type:"value",snapshotNode:e}}function ut(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function dt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ht(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class pt{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){(0,s.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(dt(t,a)):(0,s.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ut(t,n)):o.trackChildChange(ht(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Qe,(e,r)=>{t.hasChild(e)||n.trackChildChange(dt(e,r))}),t.isLeafNode()||t.forEachChild(Qe,(t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(ht(t,r,i))}else n.trackChildChange(ut(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?rt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ft{constructor(e){this.indexedFilter_=new pt(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ft.getStartPost_(e),this.endPost_=ft.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new De(t,n))||(n=rt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=rt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(rt.EMPTY_NODE);const i=this;return t.forEachChild(Qe,(e,t)=>{i.matches(new De(e,t))||(r=r.updateImmediateChild(e,rt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class mt{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new ft(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new De(t,n))||(n=rt.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=rt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=rt.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(rt.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,rt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){const e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();const a=e;(0,s.vA)(a.numChildren()===this.limit_,"");const l=new De(t,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const e=a.getImmediateChild(t);let s=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=s&&(s.name===t||a.hasChild(s.name));)s=r.getChildAfterChild(this.index_,s,this.reverse_);const d=null==s?1:o(s,l);if(u&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(ht(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(dt(t,e));const n=a.updateImmediateChild(t,rt.EMPTY_NODE);return null!=s&&this.rangedFilter_.matches(s)?(null!=i&&i.trackChildChange(ut(s.name,s.node)),n.updateImmediateChild(s.name,s.node)):n}}return n.isEmpty()?e:u&&o(c,l)>=0?(null!=i&&(i.trackChildChange(dt(c.name,c.node)),i.trackChildChange(ut(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(c.name,rt.EMPTY_NODE)):e}}class gt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qe}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,s.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,s.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,s.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,s.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:P}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,s.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qe}copy(){const e=new gt;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vt(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Qe?n="$priority":e.index_===lt?n="$value":e.index_===Oe?n="$key":((0,s.vA)(e.index_ instanceof at,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,s.As)(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=(0,s.As)(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+(0,s.As)(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=(0,s.As)(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+(0,s.As)(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function yt(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Qe&&(t.i=e.index_.toString()),t}class bt extends ue{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,s.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=k("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=bt.getListenId_(e,n),a={};this.listens_[o]=a;const l=vt(e._queryParams);this.restRequest_(i+".json",l,(e,t)=>{let l=t;if(404===e&&(l=null,e=null),null===e&&this.onDataUpdate_(i,l,!1,n),(0,s.yw)(this.listens_,o)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=bt.getListenId_(e,t);delete this.listens_[n]}get(e){const t=vt(e._queryParams),n=e._path.toString(),r=new s.cY;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,s.Am)(t);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(n&&4===l.readyState){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let e=null;if(l.status>=200&&l.status<300){try{e=(0,s.$L)(l.responseText)}catch(Fr){N("Failed to parse JSON response for "+a+": "+l.responseText)}n(null,e)}else 401!==l.status&&404!==l.status&&N("Got unsuccessful REST response for "+a+" Status: "+l.status),n(l.status);n=null}},l.open("GET",a,!0),l.send()})}}class _t{constructor(){this.rootNode_=rt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function wt(){return{value:null,children:new Map}}function xt(e,t,n){if(xe(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=me(t);e.children.has(r)||e.children.set(r,wt());xt(e.children.get(r),t=ve(t),n)}}function Ct(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{Ct(r,new pe(t.toString()+"/"+e),n)})}class kt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&O(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class Et{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new kt(e);const n=1e4+2e4*Math.random();B(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;O(e,(e,r)=>{r>0&&(0,s.gR)(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),B(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var St;function Nt(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(St||(St={}));class Tt{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=St.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(xe(this.path)){if(null!=this.affectedTree.value)return(0,s.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new pe(e));return new Tt(fe(),t,this.revert)}}return(0,s.vA)(me(this.path)===e,"operationForChild called for unrelated child."),new Tt(ve(this.path),this.affectedTree,this.revert)}}class It{constructor(e,t){this.source=e,this.path=t,this.type=St.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new It(this.source,fe()):new It(this.source,ve(this.path))}}class Pt{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=St.OVERWRITE}operationForChild(e){return xe(this.path)?new Pt(this.source,fe(),this.snap.getImmediateChild(e)):new Pt(this.source,ve(this.path),this.snap)}}class At{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=St.MERGE}operationForChild(e){if(xe(this.path)){const t=this.children.subtree(new pe(e));return t.isEmpty()?null:t.value?new Pt(this.source,fe(),t.value):new At(this.source,fe(),t)}return(0,s.vA)(me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new At(this.source,ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Dt{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xe(e))return this.isFullyInitialized()&&!this.filtered_;const t=me(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class jt{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Rt(e,t,n,r,i,o){const a=r.filter(e=>e.type===n);a.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,s.Hk)("Should only compare child_ events.");const r=new De(t.childName,t.snapshotNode),i=new De(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)),a.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function Mt(e,t){return{eventCache:e,serverCache:t}}function Ot(e,t,n,r){return Mt(new Dt(t,n,r),e.serverCache)}function Lt(e,t,n,r){return Mt(e.eventCache,new Dt(t,n,r))}function Ft(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Vt(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Ut;class Bt{static fromObject(e){let t=new Bt(null);return O(e,(e,n)=>{t=t.set(new pe(e),n)}),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Ut||(Ut=new Ve(D)),Ut);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:fe(),value:this.value};if(xe(e))return null;{const n=me(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(ve(e),t);if(null!=i){return{path:we(new pe(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xe(e))return this;{const t=me(e),n=this.children.get(t);return null!==n?n.subtree(ve(e)):new Bt(null)}}set(e,t){if(xe(e))return new Bt(t,this.children);{const n=me(e),r=(this.children.get(n)||new Bt(null)).set(ve(e),t),i=this.children.insert(n,r);return new Bt(this.value,i)}}remove(e){if(xe(e))return this.children.isEmpty()?new Bt(null):new Bt(null,this.children);{const t=me(e),n=this.children.get(t);if(n){const r=n.remove(ve(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Bt(null):new Bt(this.value,i)}return this}}get(e){if(xe(e))return this.value;{const t=me(e),n=this.children.get(t);return n?n.get(ve(e)):null}}setTree(e,t){if(xe(e))return t;{const n=me(e),r=(this.children.get(n)||new Bt(null)).setTree(ve(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Bt(this.value,i)}}fold(e){return this.fold_(fe(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(we(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,fe(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(xe(e))return null;{const r=me(e),i=this.children.get(r);return i?i.findOnPath_(ve(e),we(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,fe(),t)}foreachOnPath_(e,t,n){if(xe(e))return this;{this.value&&n(t,this.value);const r=me(e),i=this.children.get(r);return i?i.foreachOnPath_(ve(e),we(t,r),n):new Bt(null)}}foreach(e){this.foreach_(fe(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(we(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class zt{constructor(e){this.writeTree_=e}static empty(){return new zt(new Bt(null))}}function Wt(e,t,n){if(xe(t))return new zt(new Bt(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=Ce(i,t);return s=s.updateChild(o,n),new zt(e.writeTree_.set(i,s))}{const r=new Bt(n),i=e.writeTree_.setTree(t,r);return new zt(i)}}}function Ht(e,t,n){let r=e;return O(n,(e,n)=>{r=Wt(r,we(t,e),n)}),r}function qt(e,t){if(xe(t))return zt.empty();{const n=e.writeTree_.setTree(t,new Bt(null));return new zt(n)}}function Kt(e,t){return null!=Yt(e,t)}function Yt(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Ce(n.path,t)):null}function Gt(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Qe,(e,n)=>{t.push(new De(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new De(e,n.value))}),t}function Qt(e,t){if(xe(t))return e;{const n=Yt(e,t);return new zt(null!=n?new Bt(n):e.writeTree_.subtree(t))}}function $t(e){return e.writeTree_.isEmpty()}function Jt(e,t){return Xt(fe(),e.writeTree_,t)}function Xt(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?((0,s.vA)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Xt(we(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(we(e,".priority"),r)),n}}function Zt(e,t){return pn(t,e)}function en(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);(0,s.vA)(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&tn(t,r.path)?i=!1:Ee(r.path,t.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=rn(e.allWrites,nn,fe()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=qt(e.visibleWrites,r.path);else{O(r.children,t=>{e.visibleWrites=qt(e.visibleWrites,we(r.path,t))})}return!0}return!1}function tn(e,t){if(e.snap)return Ee(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ee(we(e.path,n),t))return!0;return!1}function nn(e){return e.visible}function rn(e,t,n){let r=zt.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)Ee(n,e)?(t=Ce(n,e),r=Wt(r,t,o.snap)):Ee(e,n)&&(t=Ce(e,n),r=Wt(r,fe(),o.snap.getChild(t)));else{if(!o.children)throw(0,s.Hk)("WriteRecord should have .snap or .children");if(Ee(n,e))t=Ce(n,e),r=Ht(r,t,o.children);else if(Ee(e,n))if(t=Ce(e,n),xe(t))r=Ht(r,fe(),o.children);else{const e=(0,s.yw)(o.children,me(t));if(e){const n=e.getChild(ve(t));r=Wt(r,fe(),n)}}}}}return r}function sn(e,t,n,r,i){if(r||i){const s=Qt(e.visibleWrites,t);if(!i&&$t(s))return n;if(i||null!=n||Kt(s,fe())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ee(e.path,t)||Ee(t,e.path))};return Jt(rn(e.allWrites,s,t),n||rt.EMPTY_NODE)}return null}{const r=Yt(e.visibleWrites,t);if(null!=r)return r;{const r=Qt(e.visibleWrites,t);if($t(r))return n;if(null!=n||Kt(r,fe())){return Jt(r,n||rt.EMPTY_NODE)}return null}}}function on(e,t,n,r){return sn(e.writeTree,e.treePath,t,n,r)}function an(e,t){return function(e,t,n){let r=rt.EMPTY_NODE;const i=Yt(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Qe,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=Qt(e.visibleWrites,t);return n.forEachChild(Qe,(e,t)=>{const n=Jt(Qt(i,new pe(e)),t);r=r.updateImmediateChild(e,n)}),Gt(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return Gt(Qt(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function ln(e,t,n,r){return function(e,t,n,r,i){(0,s.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=we(t,n);if(Kt(e.visibleWrites,o))return null;{const t=Qt(e.visibleWrites,o);return $t(t)?i.getChild(n):Jt(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function cn(e,t){return function(e,t){return Yt(e.visibleWrites,t)}(e.writeTree,we(e.treePath,t))}function un(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=Qt(e.visibleWrites,t),c=Yt(l,fe());if(null!=c)a=c;else{if(null==n)return[];a=Jt(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function dn(e,t,n){return function(e,t,n,r){const i=we(t,n),s=Yt(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Jt(Qt(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function hn(e,t){return pn(we(e.treePath,t),e.writeTree)}function pn(e,t){return{treePath:e,writeTree:t}}class fn{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,s.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,s.vA)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,ht(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,dt(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,ut(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,s.Hk)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,ht(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const mn=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class gn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Dt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dn(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Vt(this.viewCache_),i=un(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function vn(e,t,n,r,i){const o=new fn;let a,l;if(n.type===St.OVERWRITE){const c=n;c.source.fromUser?a=_n(e,t,c.path,c.snap,r,i,o):((0,s.vA)(c.source.fromServer,"Unknown source."),l=c.source.tagged||t.serverCache.isFiltered()&&!xe(c.path),a=bn(e,t,c.path,c.snap,r,i,l,o))}else if(n.type===St.MERGE){const c=n;c.source.fromUser?a=function(e,t,n,r,i,s,o){let a=t;return r.foreach((r,l)=>{const c=we(n,r);wn(t,me(c))&&(a=_n(e,a,c,l,i,s,o))}),r.foreach((r,l)=>{const c=we(n,r);wn(t,me(c))||(a=_n(e,a,c,l,i,s,o))}),a}(e,t,c.path,c.children,r,i,o):((0,s.vA)(c.source.fromServer,"Unknown source."),l=c.source.tagged||t.serverCache.isFiltered(),a=Cn(e,t,c.path,c.children,r,i,l,o))}else if(n.type===St.ACK_USER_WRITE){const l=n;a=l.revert?function(e,t,n,r,i,o){let a;if(null!=cn(r,n))return t;{const l=new gn(r,t,i),c=t.eventCache.getNode();let u;if(xe(n)||".priority"===me(n)){let n;if(t.serverCache.isFullyInitialized())n=on(r,Vt(t));else{const e=t.serverCache.getNode();(0,s.vA)(e instanceof rt,"serverChildren would be complete if leaf node"),n=an(r,e)}u=e.filter.updateFullNode(c,n,o)}else{const i=me(n);let s=dn(r,i,t.serverCache);null==s&&t.serverCache.isCompleteForChild(i)&&(s=c.getImmediateChild(i)),u=null!=s?e.filter.updateChild(c,i,s,ve(n),l,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,rt.EMPTY_NODE,ve(n),l,o):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=on(r,Vt(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,o)))}return a=t.serverCache.isFullyInitialized()||null!=cn(r,fe()),Ot(t,u,a,e.filter.filtersNodes())}}(e,t,l.path,r,i,o):function(e,t,n,r,i,s,o){if(null!=cn(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(xe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return bn(e,t,n,l.getNode().getChild(n),i,s,a,o);if(xe(n)){let r=new Bt(null);return l.getNode().forEachChild(Oe,(e,t)=>{r=r.set(new pe(e),t)}),Cn(e,t,n,r,i,s,a,o)}return t}{let c=new Bt(null);return r.foreach((e,t)=>{const r=we(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))}),Cn(e,t,n,c,i,s,a,o)}}(e,t,l.path,l.affectedTree,r,i,o)}else{if(n.type!==St.LISTEN_COMPLETE)throw(0,s.Hk)("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const s=t.serverCache,o=Lt(t,s.getNode(),s.isFullyInitialized()||xe(n),s.isFiltered());return yn(e,o,n,r,mn,i)}(e,t,n.path,r,o)}const c=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Ft(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ct(Ft(t)))}}(t,a,c),{viewCache:a,changes:c}}function yn(e,t,n,r,i,o){const a=t.eventCache;if(null!=cn(r,n))return t;{let l,c;if(xe(n))if((0,s.vA)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Vt(t),i=an(r,n instanceof rt?n:rt.EMPTY_NODE);l=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=on(r,Vt(t));l=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const u=me(n);if(".priority"===u){(0,s.vA)(1===ge(n),"Can't have a priority with additional path components");const i=a.getNode();c=t.serverCache.getNode();const o=ln(r,n,i,c);l=null!=o?e.filter.updatePriority(i,o):a.getNode()}else{const s=ve(n);let d;if(a.isCompleteForChild(u)){c=t.serverCache.getNode();const e=ln(r,n,a.getNode(),c);d=null!=e?a.getNode().getImmediateChild(u).updateChild(s,e):a.getNode().getImmediateChild(u)}else d=dn(r,u,t.serverCache);l=null!=d?e.filter.updateChild(a.getNode(),u,d,s,i,o):a.getNode()}}return Ot(t,l,a.isFullyInitialized()||xe(n),e.filter.filtersNodes())}}function bn(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(xe(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=me(n);if(!l.isCompleteForPath(n)&&ge(n)>1)return t;const i=ve(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,mn,null)}const d=Lt(t,c,l.isFullyInitialized()||xe(n),u.filtersNodes());return yn(e,d,n,i,new gn(i,d,s),a)}function _n(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new gn(i,t,s);if(xe(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Ot(t,c,!0,e.filter.filtersNodes());else{const i=me(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Ot(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=ve(n),c=a.getNode().getImmediateChild(i);let d;if(xe(s))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===ye(s)&&e.getChild(_e(s)).isEmpty()?e:e.updateChild(s,r):rt.EMPTY_NODE}if(c.equals(d))l=t;else{l=Ot(t,e.filter.updateChild(a.getNode(),i,d,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function wn(e,t){return e.eventCache.isCompleteForChild(t)}function xn(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function Cn(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=xe(n)?r:new Bt(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){const l=xn(0,t.serverCache.getNode().getImmediateChild(n),r);c=bn(e,c,new pe(n),l,i,s,o,a)}}),l.children.inorderTraversal((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=xn(0,t.serverCache.getNode().getImmediateChild(n),r);c=bn(e,c,new pe(n),l,i,s,o,a)}}),c}class kn{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new pt(n.getIndex()),i=(s=n).loadsAllData()?new pt(s.getIndex()):s.hasLimit()?new mt(s):new ft(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(rt.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(rt.EMPTY_NODE,a.getNode(),null),u=new Dt(l,o.isFullyInitialized(),r.filtersNodes()),d=new Dt(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Mt(d,u),this.eventGenerator_=new jt(this.query_)}get query(){return this.query_}}function En(e,t){const n=Vt(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!xe(t)&&!n.getImmediateChild(me(t)).isEmpty())?n.getChild(t):null}function Sn(e){return 0===e.eventRegistrations_.length}function Nn(e,t,n){const r=[];if(n){(0,s.vA)(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Tn(e,t,n,r){t.type===St.MERGE&&null!==t.source.queryId&&((0,s.vA)(Vt(e.viewCache_),"We should always have a full cache before handling merges"),(0,s.vA)(Ft(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=vn(e.processor_,i,t,n,r);var a,l;return a=e.processor_,l=o.viewCache,(0,s.vA)(l.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,s.vA)(l.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),(0,s.vA)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,In(e,o.changes,o.viewCache.eventCache.getNode(),null)}function In(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),Rt(e,i,"child_removed",t,r,n),Rt(e,i,"child_added",t,r,n),Rt(e,i,"child_moved",s,r,n),Rt(e,i,"child_changed",t,r,n),Rt(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Pn,An;class Dn{constructor(){this.views=new Map}}function jn(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return(0,s.vA)(null!=o,"SyncTree gave us an op for an invalid query."),Tn(o,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(Tn(s,t,n,r));return i}}function Rn(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=on(n,i?r:null),s=!1;e?s=!0:r instanceof rt?(e=an(n,r),s=!1):(e=rt.EMPTY_NODE,s=!1);const o=Mt(new Dt(e,s,!1),new Dt(r,i,!1));return new kn(t,o)}return o}function Mn(e,t,n,r,i,s){const o=Rn(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Qe,(e,t)=>{r.push(ut(e,t))});return n.isFullyInitialized()&&r.push(ct(n.getNode())),In(e,r,n.getNode(),t)}(o,n)}function On(e,t,n,r){const i=t._queryIdentifier,o=[];let a=[];const l=Bn(e);if("default"===i)for(const[s,c]of e.views.entries())a=a.concat(Nn(c,n,r)),Sn(c)&&(e.views.delete(s),c.query._queryParams.loadsAllData()||o.push(c.query));else{const t=e.views.get(i);t&&(a=a.concat(Nn(t,n,r)),Sn(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return l&&!Bn(e)&&o.push(new((0,s.vA)(Pn,"Reference.ts has not been loaded"),Pn)(t._repo,t._path)),{removed:o,events:a}}function Ln(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Fn(e,t){let n=null;for(const r of e.views.values())n=n||En(r,t);return n}function Vn(e,t){if(t._queryParams.loadsAllData())return zn(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Un(e,t){return null!=Vn(e,t)}function Bn(e){return null!=zn(e)}function zn(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Wn=1;class Hn{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Bt(null),this.pendingWriteTree_={visibleWrites:zt.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qn(e,t,n,r,i){return function(e,t,n,r,i){(0,s.vA)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Wt(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Zn(e,new Pt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(en(e.pendingWriteTree_,t)){let t=new Bt(null);return null!=r.snap?t=t.set(fe(),!0):O(r.children,e=>{t=t.set(new pe(e),!0)}),Zn(e,new Tt(r.path,t,n))}return[]}function Yn(e,t,n){return Zn(e,new Pt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Gn(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Un(o,t))){const l=On(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),i=e.syncPointTree_.findOnPath(s,(e,t)=>Bn(t));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&Bn(t)){return[zn(t)]}{let e=[];return t&&(e=Ln(t)),O(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=nr(e,r);e.listenProvider_.startListening(lr(i),rr(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(lr(t),n)}else c.forEach(t=>{const n=e.queryToTagMap.get(ir(t));e.listenProvider_.stopListening(lr(t),n)})}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=ir(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function Qn(e,t,n,r){const i=sr(e,r);if(null!=i){const r=or(i),s=r.path,o=r.queryId,a=Ce(s,t);return ar(e,s,new Pt(Nt(o),a,n))}return[]}function $n(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let o=null,a=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{const n=Ce(e,i);o=o||Fn(t,n),a=a||Bn(t)});let l,c=e.syncPointTree_.get(i);if(c?(a=a||Bn(c),o=o||Fn(c,fe())):(c=new Dn,e.syncPointTree_=e.syncPointTree_.set(i,c)),null!=o)l=!0;else{l=!1,o=rt.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild((e,t)=>{const n=Fn(t,fe());n&&(o=o.updateImmediateChild(e,n))})}const u=Un(c,t);if(!u&&!t._queryParams.loadsAllData()){const n=ir(t);(0,s.vA)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Wn++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let d=Mn(c,t,n,Zt(e.pendingWriteTree_,i),o,l);if(!u&&!a&&!r){const n=Vn(c,t);d=d.concat(function(e,t,n){const r=t._path,i=rr(e,t),o=nr(e,n),a=e.listenProvider_.startListening(lr(t),i,o.hashFn,o.onComplete),l=e.syncPointTree_.subtree(r);if(i)(0,s.vA)(!Bn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const t=l.fold((e,t,n)=>{if(!xe(e)&&t&&Bn(t))return[zn(t).query];{let e=[];return t&&(e=e.concat(Ln(t).map(e=>e.query))),O(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(lr(r),rr(e,r))}}return a}(e,t,n))}return d}function Jn(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=Fn(n,Ce(e,t));if(r)return r});return sn(r,t,i,n,!0)}function Xn(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const i=Ce(e,n);r=r||Fn(t,i)});let i=e.syncPointTree_.get(n);i?r=r||Fn(i,fe()):(i=new Dn,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Dt(r,!0,!1):null;return function(e){return Ft(e.viewCache_)}(Rn(i,t,Zt(e.pendingWriteTree_,t._path),s?o.getNode():rt.EMPTY_NODE,s))}function Zn(e,t){return er(t,e.syncPointTree_,null,Zt(e.pendingWriteTree_,fe()))}function er(e,t,n,r){if(xe(e.path))return tr(e,t,n,r);{const i=t.get(fe());null==n&&null!=i&&(n=Fn(i,fe()));let s=[];const o=me(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=hn(r,o);s=s.concat(er(a,l,e,t))}return i&&(s=s.concat(jn(i,e,r,n))),s}}function tr(e,t,n,r){const i=t.get(fe());null==n&&null!=i&&(n=Fn(i,fe()));let s=[];return t.children.inorderTraversal((t,i)=>{const o=n?n.getImmediateChild(t):null,a=hn(r,t),l=e.operationForChild(t);l&&(s=s.concat(tr(l,i,o,a)))}),i&&(s=s.concat(jn(i,e,r,n))),s}function nr(e,t){const n=t.query,r=rr(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||rt.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=sr(e,n);if(r){const n=or(r),i=n.path,s=n.queryId,o=Ce(i,t);return ar(e,i,new It(Nt(s),o))}return[]}(e,n._path,r):function(e,t){return Zn(e,new It({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Gn(e,n,null,r)}}}}function rr(e,t){const n=ir(t);return e.queryToTagMap.get(n)}function ir(e){return e._path.toString()+"$"+e._queryIdentifier}function sr(e,t){return e.tagToQueryMap.get(t)}function or(e){const t=e.indexOf("$");return(0,s.vA)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new pe(e.substr(0,t))}}function ar(e,t,n){const r=e.syncPointTree_.get(t);(0,s.vA)(r,"Missing sync point for query tag that we're tracking");return jn(r,n,Zt(e.pendingWriteTree_,t),null)}function lr(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,s.vA)(An,"Reference.ts has not been loaded"),An)(e._repo,e._path):e}class cr{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new cr(t)}node(){return this.node_}}class ur{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=we(this.path_,e);return new ur(this.syncTree_,t)}node(){return Jn(this.syncTree_,this.path_)}}const dr=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},hr=function(e,t,n){return e&&"object"===typeof e?((0,s.vA)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?pr(e[".sv"],t,n):"object"===typeof e[".sv"]?fr(e[".sv"],t):void(0,s.vA)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},pr=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,s.vA)(!1,"Unexpected server value: "+e)},fr=function(e,t,n){e.hasOwnProperty("increment")||(0,s.vA)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&(0,s.vA)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,s.vA)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},mr=function(e,t,n,r){return vr(t,new ur(n,e),r)},gr=function(e,t,n){return vr(e,new cr(t),n)};function vr(e,t,n){const r=e.getPriority().val(),i=hr(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=hr(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Ge(s,ot(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Ge(i))),r.forEachChild(Qe,(e,r)=>{const i=vr(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}class yr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function br(e,t){let n=t instanceof pe?t:new pe(t),r=e,i=me(n);for(;null!==i;){const e=(0,s.yw)(r.node.children,i)||{children:{},childCount:0};r=new yr(i,r,e),n=ve(n),i=me(n)}return r}function _r(e){return e.node.value}function wr(e,t){e.node.value=t,Sr(e)}function xr(e){return e.node.childCount>0}function Cr(e,t){O(e.node.children,(n,r)=>{t(new yr(n,e,r))})}function kr(e,t,n,r){n&&!r&&t(e),Cr(e,e=>{kr(e,t,!0,r)}),n&&r&&t(e)}function Er(e){return new pe(null===e.parent?e.name:Er(e.parent)+"/"+e.name)}function Sr(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===_r(e)&&!xr(e)}(n),i=(0,s.gR)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Sr(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Sr(e))}(e.parent,e.name,e)}const Nr=/[\[\].#$\/\u0000-\u001F\u007F]/,Tr=/[\[\].#$\u0000-\u001F\u007F]/,Ir=10485760,Pr=function(e){return"string"===typeof e&&0!==e.length&&!Nr.test(e)},Ar=function(e){return"string"===typeof e&&0!==e.length&&!Tr.test(e)},Dr=function(e,t,n,r){r&&void 0===t||jr((0,s.dI)(e,"value"),t,n)},jr=function(e,t,n){const r=n instanceof pe?new Se(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Te(r));if("function"===typeof t)throw new Error(e+"contains a function "+Te(r)+" with contents = "+t.toString());if(T(t))throw new Error(e+"contains "+t.toString()+" "+Te(r));if("string"===typeof t&&t.length>Ir/3&&(0,s.OE)(t)>Ir)throw new Error(e+"contains a string greater than "+Ir+" utf8 bytes "+Te(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(O(t,(t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Pr(t)))throw new Error(e+" contains an invalid key ("+t+") "+Te(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,s.OE)(t),Ne(e)}(r,t),jr(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=(0,s.OE)(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+Te(r)+" in addition to actual children.")}},Rr=function(e,t,n,r){if((!r||void 0!==n)&&!Ar(n))throw new Error((0,s.dI)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Mr=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Rr(e,t,n,r)},Or=function(e,t){if(".info"===me(t))throw new Error(e+" failed = Can't modify data under /.info/")},Lr=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Pr(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ar(e)}(n))throw new Error((0,s.dI)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Vr{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ur(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||ke(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Br(e,t,n){Ur(e,n),Wr(e,e=>ke(e,t))}function zr(e,t,n){Ur(e,n),Wr(e,e=>Ee(e,t)||Ee(t,e))}function Wr(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(Hr(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Hr(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();_&&C("event: "+n.toString()),U(r)}}}const qr="repo_interrupt",Kr=25;class Yr{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wt(),this.transactionQueueTree_=new yr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Gr(e,t,n){if(e.stats_=te(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new bt(e.repoInfo_,(t,n,r,i)=>{Jr(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Xr(e,!0),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,s.As)(n)}catch(Fr){throw new Error("Invalid authOverride provided: "+Fr)}}e.persistentConnection_=new Ae(e.repoInfo_,t,(t,n,r,i)=>{Jr(e,t,n,r,i)},t=>{Xr(e,t)},t=>{!function(e,t){O(t,(t,n)=>{Zr(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return ee[n]||(ee[n]=t()),ee[n]}(e.repoInfo_,()=>new Et(e.stats_,e.server_)),e.infoData_=new _t,e.infoSyncTree_=new Hn({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Yn(e.infoSyncTree_,t._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),Zr(e,"connected",!1),e.serverSyncTree_=new Hn({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);zr(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Qr(e){const t=e.infoData_.getNode(new pe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function $r(e){return dr({timestamp:Qr(e)})}function Jr(e,t,n,r,i){e.dataUpdateCount++;const o=new pe(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=(0,s.kH)(n,e=>ot(e));a=function(e,t,n,r){const i=sr(e,r);if(i){const r=or(i),s=r.path,o=r.queryId,a=Ce(s,t),l=Bt.fromObject(n);return ar(e,s,new At(Nt(o),a,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=ot(n);a=Qn(e.serverSyncTree_,o,t,i)}else if(r){const t=(0,s.kH)(n,e=>ot(e));a=function(e,t,n){const r=Bt.fromObject(n);return Zn(e,new At({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=ot(n);a=Yn(e.serverSyncTree_,o,t)}let l=o;a.length>0&&(l=li(e,o)),zr(e.eventQueue_,l,a)}function Xr(e,t){Zr(e,"connected",t),!1===t&&function(e){ii(e,"onDisconnectEvents");const t=$r(e),n=wt();Ct(e.onDisconnect_,fe(),(r,i)=>{const s=mr(r,i,e.serverSyncTree_,t);xt(n,r,s)});let r=[];Ct(n,fe(),(t,n)=>{r=r.concat(Yn(e.serverSyncTree_,t,n));const i=pi(e,t);li(e,i)}),e.onDisconnect_=wt(),zr(e.eventQueue_,fe(),r)}(e)}function Zr(e,t,n){const r=new pe("/.info/"+t),i=ot(n);e.infoData_.updateSnapshot(r,i);const s=Yn(e.infoSyncTree_,r,i);zr(e.eventQueue_,r,s)}function ei(e){return e.nextWriteId_++}function ti(e,t,n,r,i){ii(e,"set",{path:t.toString(),value:n,priority:r});const s=$r(e),o=ot(n,r),a=Jn(e.serverSyncTree_,t),l=gr(o,a,s),c=ei(e),u=qn(e.serverSyncTree_,t,l,c,!0);Ur(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,r)=>{const s="ok"===n;s||N("set at "+t+" failed: "+n);const o=Kn(e.serverSyncTree_,c,!s);zr(e.eventQueue_,t,o),si(e,i,n,r)});const d=pi(e,t);li(e,d),zr(e.eventQueue_,d,[])}function ni(e,t,n){let r;r=".info"===me(t._path)?Gn(e.infoSyncTree_,t,n):Gn(e.serverSyncTree_,t,n),Br(e.eventQueue_,t._path,r)}function ri(e){e.persistentConnection_&&e.persistentConnection_.interrupt(qr)}function ii(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];C(t,...r)}function si(e,t,n,r){t&&U(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}})}function oi(e,t,n){return Jn(e.serverSyncTree_,t,n)||rt.EMPTY_NODE}function ai(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||hi(e,t),_r(t)){const n=ui(e,t);(0,s.vA)(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=oi(e,t,r);let o=i;const a=i.hash();for(let u=0;u<n.length;u++){const e=n[u];(0,s.vA)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Ce(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const l=o.val(!0),c=t;e.server_.put(c.toString(),l,r=>{ii(e,"transaction put response",{path:c.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Kn(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();hi(e,br(e.transactionQueueTree_,t)),ai(e,e.transactionQueueTree_),zr(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)U(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{N("transaction at "+c.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}li(e,t)}},a)}(e,Er(t),n)}else xr(t)&&Cr(t,t=>{ai(e,t)})}function li(e,t){const n=ci(e,t),r=Er(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter(e=>0===e.status),a=o.map(e=>e.currentWriteId);for(let l=0;l<t.length;l++){const o=t[l],c=Ce(n,o.path);let u,d=!1;if((0,s.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)d=!0,u=o.abortReason,i=i.concat(Kn(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=Kr)d=!0,u="maxretry",i=i.concat(Kn(e.serverSyncTree_,o.currentWriteId,!0));else{const n=oi(e,o.path,a);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){jr("transaction failed: Data returned ",r,o.path);let t=ot(r);"object"===typeof r&&null!=r&&(0,s.gR)(r,".priority")||(t=t.updatePriority(n.getPriority()));const l=o.currentWriteId,c=$r(e),u=gr(t,n,c);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=u,o.currentWriteId=ei(e),a.splice(a.indexOf(l),1),i=i.concat(qn(e.serverSyncTree_,o.path,u,o.currentWriteId,o.applyLocally)),i=i.concat(Kn(e.serverSyncTree_,l,!0))}else d=!0,u="nodata",i=i.concat(Kn(e.serverSyncTree_,o.currentWriteId,!0))}zr(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,function(e){setTimeout(e,Math.floor(0))}(t[l].unwatcher),t[l].onComplete&&("nodata"===u?r.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):r.push(()=>t[l].onComplete(new Error(u),!1,null))))}hi(e,e.transactionQueueTree_);for(let s=0;s<r.length;s++)U(r[s]);ai(e,e.transactionQueueTree_)}(e,ui(e,n),r),r}function ci(e,t){let n,r=e.transactionQueueTree_;for(n=me(t);null!==n&&void 0===_r(r);)r=br(r,n),n=me(t=ve(t));return r}function ui(e,t){const n=[];return di(e,t,n),n.sort((e,t)=>e.order-t.order),n}function di(e,t,n){const r=_r(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Cr(t,t=>{di(e,t,n)})}function hi(e,t){const n=_r(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,wr(t,n.length>0?n:void 0)}Cr(t,t=>{hi(e,t)})}function pi(e,t){const n=Er(ci(e,t)),r=br(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{fi(e,t)}),fi(e,r),kr(r,t=>{fi(e,t)}),n}function fi(e,t){const n=_r(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,s.vA)(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):((0,s.vA)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Kn(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?wr(t,void 0):n.length=o+1,zr(e.eventQueue_,Er(t),i);for(let e=0;e<r.length;e++)U(r[e])}}const mi=function(e,t){const n=gi(e),r=n.namespace;"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&N("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new $(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new pe(n.pathString)}},gi=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(Fr){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):N("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},vi="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yi=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=vi.charAt(n%64),n=Math.floor(n/64);(0,s.vA)(0===n,"Cannot push at time == 0");let a=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)a+=vi.charAt(t[i]);return(0,s.vA)(20===a.length,"nextPushId: Length should be 20."),a}}();class bi{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,s.As)(this.snapshot.exportVal())}}class _i{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class wi{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,s.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class xi{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return xe(this._path)?null:ye(this._path)}get ref(){return new Ci(this._repo,this._path)}get _queryIdentifier(){const e=yt(this._queryParams),t=R(e);return"{}"===t?"default":t}get _queryObject(){return yt(this._queryParams)}isEqual(e){if(!((e=(0,s.Ku)(e))instanceof xi))return!1;const t=this._repo===e._repo,n=ke(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Ci extends xi{constructor(e,t){super(e,t,new gt,!1)}get parent(){const e=_e(this._path);return null===e?null:new Ci(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ki{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new pe(e),n=Si(this.ref,e);return new ki(this._node.getChild(t),n,Qe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(t,n)=>e(new ki(n,Si(this.ref,t),Qe)))}hasChild(e){const t=new pe(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ei(e,t){return(e=(0,s.Ku)(e))._checkNotDeleted("ref"),void 0!==t?Si(e._root,t):e._root}function Si(e,t){return null===me((e=(0,s.Ku)(e))._path)?Mr("child","path",t,!1):Rr("child","path",t,!1),new Ci(e._repo,we(e._path,t))}function Ni(e,t){e=(0,s.Ku)(e),Or("push",e._path),Dr("push",t,e._path,!0);const n=Qr(e._repo),r=yi(n),i=Si(e,r),o=Si(e,r);let a;return a=null!=t?Ii(o,t).then(()=>o):Promise.resolve(o),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}function Ti(e){return Or("remove",e._path),Ii(e,null)}function Ii(e,t){e=(0,s.Ku)(e),Or("set",e._path),Dr("set",t,e._path,!1);const n=new s.cY;return ti(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Pi(e){e=(0,s.Ku)(e);const t=new wi(()=>{}),n=new Ai(t);return function(e,t,n){const r=Xn(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then(r=>{const i=ot(r).withIndex(t._queryParams.getIndex());let s;if($n(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=Yn(e.serverSyncTree_,t._path,i);else{const n=rr(e.serverSyncTree_,t);s=Qn(e.serverSyncTree_,t._path,i,n)}return zr(e.eventQueue_,t._path,s),Gn(e.serverSyncTree_,t,n,null,!0),i},n=>(ii(e,"get for query "+(0,s.As)(t)+" failed: "+n),Promise.reject(new Error(n))))}(e._repo,e,n).then(t=>new ki(t,new Ci(e._repo,e._path),e._queryParams.getIndex()))}class Ai{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new bi("value",this,new ki(e.snapshotNode,new Ci(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new _i(this,e,t):null}matches(e){return e instanceof Ai&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Di{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new _i(this,e,t):null}createEvent(e,t){(0,s.vA)(null!=e.childName,"Child events should have a childName.");const n=Si(new Ci(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new bi(e.type,this,new ki(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Di&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function ji(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{ni(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new wi(n,s||void 0),a="value"===t?new Ai(o):new Di(t,o);return function(e,t,n){let r;r=".info"===me(t._path)?$n(e.infoSyncTree_,t,n):$n(e.serverSyncTree_,t,n),Br(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>ni(e._repo,e,a)}function Ri(e,t,n,r){return ji(e,"value",t,n,r)}!function(e){(0,s.vA)(!Pn,"__referenceConstructor has already been defined"),Pn=e}(Ci),function(e){(0,s.vA)(!An,"__referenceConstructor has already been defined"),An=e}(Ci);const Mi={};let Oi=!1;function Li(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=mi(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/vacation-manager-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=mi(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new H(H.OWNER):new W(e.name,e.options,t);Lr("Invalid Firebase Database URL",l),xe(l.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=Mi[t.name];i||(i={},Mi[t.name]=i);let s=i[e.toURLString()];s&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Yr(e,Oi,n,r),i[e.toURLString()]=s,s}(c,e,u,new z(e,n));return new Fi(d,e)}class Fi{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Gr(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ci(this._repo,fe())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Mi[t];n&&n[e.key]===e||S("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),ri(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&S("Cannot call "+e+" on a deleted database.")}}function Vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;const n=(0,r.j6)(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=(0,s.yU)("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=(0,s.Ku)(e),e._checkNotDeleted("useEmulator");const i="".concat(t,":").concat(n),o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&(0,s.bD)(r,o.repoInfo_.emulatorOptions))return;S("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&S('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new H(H.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:(0,s.Fy)(r.mockUserToken,e.app.options.projectId);a=new H(t)}(0,s.zJ)(t)&&((0,s.gE)(t),(0,s.P1)("Database",!0));!function(e,t,n,r){const i=t.lastIndexOf(":"),o=t.substring(0,i),a=(0,s.zJ)(o);e.repoInfo_=new $(t,a,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(o,i,r,a)}(n,...e)}return n}Ae.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ae.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Ui;u(r.MF),(0,r.om)(new i.uA("database",(e,t)=>{let{instanceIdentifier:n}=t;return Li(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(a,l,Ui),(0,r.KO)(a,l,"esm2017")},624:(e,t,n)=>{n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},654:(e,t,n)=>{var r=n(950),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},705:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>s})},761:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,j(x);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,y(S),S=-1),f=!0;var s=p;try{for(_(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),_(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,k=!1,E=null,S=-1,N=5,T=-1;function I(){return!(t.unstable_now()-T<N)}function P(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?C():(k=!1,E=null)}}else k=!1}if("function"===typeof b)C=function(){b(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=P,C=function(){D.postMessage(null)}}else C=function(){v(P,0)};function j(e){E=e,k||(k=!0,C())}function R(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,j(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(S),S=-1):g=!0,R(w,s-o))):(e.sortIndex=a,n(c,e),m||f||(m=!0,j(x))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},913:(e,t,n)=>{n.d(t,{MF:()=>de,j6:()=>oe,xZ:()=>ae,om:()=>se,Sx:()=>pe,Wp:()=>he,KO:()=>fe});var r=n(253),i=n(624),s=n(170),o=n(379);let a,l;const c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(y(this),n),v(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(e.apply(y(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(y(this),t,...r);return d.set(s,t.sort?t.sort():[t]),v(s)}}function g(e){return"function"===typeof e?m(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});u.set(e,t)}(e),t=e,(a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,f):e);var t}function v(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(v(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),p.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),p.set(t,e)),t}const y=e=>p.get(e);const b=["get","getKey","getAll","getAllKeys","count"],_=["put","add","delete","clear"],w=new Map;function x(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!b.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return w.set(t,s),s}f=(e=>(0,o.A)((0,o.A)({},e),{},{get:(t,n,r)=>x(t,n)||e.get(t,n,r),has:(t,n)=>!!x(t,n)||e.has(t,n)}))(f);class C{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const k="@firebase/app",E="0.13.2",S=new i.Vy("@firebase/app"),N="@firebase/app-compat",T="@firebase/analytics-compat",I="@firebase/analytics",P="@firebase/app-check-compat",A="@firebase/app-check",D="@firebase/auth",j="@firebase/auth-compat",R="@firebase/database",M="@firebase/data-connect",O="@firebase/database-compat",L="@firebase/functions",F="@firebase/functions-compat",V="@firebase/installations",U="@firebase/installations-compat",B="@firebase/messaging",z="@firebase/messaging-compat",W="@firebase/performance",H="@firebase/performance-compat",q="@firebase/remote-config",K="@firebase/remote-config-compat",Y="@firebase/storage",G="@firebase/storage-compat",Q="@firebase/firestore",$="@firebase/ai",J="@firebase/firestore-compat",X="firebase",Z="[DEFAULT]",ee={[k]:"fire-core",[N]:"fire-core-compat",[I]:"fire-analytics",[T]:"fire-analytics-compat",[A]:"fire-app-check",[P]:"fire-app-check-compat",[D]:"fire-auth",[j]:"fire-auth-compat",[R]:"fire-rtdb",[M]:"fire-data-connect",[O]:"fire-rtdb-compat",[L]:"fire-fn",[F]:"fire-fn-compat",[V]:"fire-iid",[U]:"fire-iid-compat",[B]:"fire-fcm",[z]:"fire-fcm-compat",[W]:"fire-perf",[H]:"fire-perf-compat",[q]:"fire-rc",[K]:"fire-rc-compat",[Y]:"fire-gcs",[G]:"fire-gcs-compat",[Q]:"fire-fst",[J]:"fire-fst-compat",[$]:"fire-vertex","fire-js":"fire-js",[X]:"fire-js-all"},te=new Map,ne=new Map,re=new Map;function ie(e,t){try{e.container.addComponent(t)}catch(Fr){S.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Fr)}}function se(e){const t=e.name;if(re.has(t))return S.debug("There were multiple attempts to register component ".concat(t,".")),!1;re.set(t,e);for(const n of te.values())ie(n,e);for(const n of ne.values())ie(n,e);return!0}function oe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ae(e){return null!==e&&void 0!==e&&void 0!==e.settings}const le={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ce=new s.FA("app","Firebase",le);class ue{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ce.create("app-deleted",{appName:this._name})}}const de="11.10.0";function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:Z,automaticDataCollectionEnabled:!0},t),o=i.name;if("string"!==typeof o||!o)throw ce.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.T9)()),!n)throw ce.create("no-options");const a=te.get(o);if(a){if((0,s.bD)(n,a.options)&&(0,s.bD)(i,a.config))return a;throw ce.create("duplicate-app",{appName:o})}const l=new r.h1(o);for(const r of re.values())l.addComponent(r);const c=new ue(n,i,l);return te.set(o,c),c}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;const t=te.get(e);if(!t&&e===Z&&(0,s.T9)())return he();if(!t)throw ce.create("no-app",{appName:e});return t}function fe(e,t,n){var i;let s=null!==(i=ee[e])&&void 0!==i?i:e;n&&(s+="-".concat(n));const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void S.warn(e.join(" "))}se(new r.uA("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const me="firebase-heartbeat-store";let ge=null;function ve(){return ge||(ge=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=v(o);return r&&o.addEventListener("upgradeneeded",e=>{r(v(o.result),e.oldVersion,e.newVersion,v(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(me)}catch(Fr){console.warn(Fr)}}}).catch(e=>{throw ce.create("idb-open",{originalErrorMessage:e.message})})),ge}async function ye(e,t){try{const n=(await ve()).transaction(me,"readwrite"),r=n.objectStore(me);await r.put(t,be(e)),await n.done}catch(Fr){if(Fr instanceof s.g)S.warn(Fr.message);else{const t=ce.create("idb-set",{originalErrorMessage:null===Fr||void 0===Fr?void 0:Fr.message});S.warn(t.message)}}}function be(e){return"".concat(e.name,"!").concat(e.options.appId)}class _e{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xe(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=we();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Fr){S.warn(Fr)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=we(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Ce(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ce(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,s.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(Fr){return S.warn(Fr),""}}}function we(){return(new Date).toISOString().substring(0,10)}class xe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ve()).transaction(me),n=await t.objectStore(me).get(be(e));return await t.done,n}catch(Fr){if(Fr instanceof s.g)S.warn(Fr.message);else{const t=ce.create("idb-get",{originalErrorMessage:null===Fr||void 0===Fr?void 0:Fr.message});S.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ce(e){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ke;ke="",se(new r.uA("platform-logger",e=>new C(e),"PRIVATE")),se(new r.uA("heartbeat",e=>new _e(e),"PRIVATE")),fe(k,E,ke),fe(k,E,"esm2017"),fe("fire-js","")},950:(e,t,n)=>{e.exports=n(49)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(Fr){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,i=n(950),s=n.t(i,2),o=n(352);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Fr){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,u=s.history,f=r.Pop,m=null,g=v();function v(){return(u.state||{idx:null}).idx}function y(){f=r.Pop;let e=v(),t=null==e?null:e-g;g=e,m&&m({action:f,location:_.location,delta:t})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(a({},u.state,{idx:g}),""));let _={get action(){return f},get location(){return e(s,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),m=e,()=>{s.removeEventListener(l,y),m=null}},createHref:e=>t(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=r.Push;let i=h(_.location,e,t);n&&n(i,e),g=v()+1;let a=d(i,g),l=_.createHref(i);try{u.pushState(a,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(l)}o&&m&&m({action:f,location:_.location,delta:1})},replace:function(e,t){f=r.Replace;let i=h(_.location,e,t);n&&n(i,e),g=v();let s=d(i,g),a=_.createHref(i);u.replaceState(s,"",a),o&&m&&m({action:f,location:_.location,delta:0})},go:e=>u.go(e)};return _}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let i=D(("string"===typeof t?f(t):t).pathname||"/",n);if(null==i)return null;let s=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=A(i);o=I(s[a],e,r)}return o}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=L([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),b(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:T(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)}),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=_(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,x=3,C=2,k=1,E=10,S=-2,N=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=S),t&&(r+=C),n.filter(e=>!N(e)).reduce((e,t)=>e+(w.test(t)?x:""===t?k:E),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:L([s,u.pathname]),pathnameBase:F(L([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=L([s,u.pathnameBase]))}return o}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function j(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let n=R(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function O(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=a({},e),c(!i.pathname||!i.pathname.includes("?"),j("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),j("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),j("#","search","hash",i)));let s,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:V(r),hash:U(i)}}(i,s),d=l&&"/"!==l&&l.endsWith("/"),h=(o||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const L=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],W=(new Set(z),["get",...z]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const q=i.createContext(null);const K=i.createContext(null);const Y=i.createContext(null);const G=i.createContext(null);const Q=i.createContext({outlet:null,matches:[],isDataRoute:!1});const $=i.createContext(null);function J(){return null!=i.useContext(G)}function X(){return J()||c(!1),i.useContext(G).location}function Z(e){i.useContext(Y).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext(Q);return e?function(){let{router:e}=ce(ae.UseNavigateStable),t=de(le.UseNavigateStable),n=i.useRef(!1);return Z(()=>{n.current=!0}),i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))},[e,t])}():function(){J()||c(!1);let e=i.useContext(q),{basename:t,future:n,navigator:r}=i.useContext(Y),{matches:s}=i.useContext(Q),{pathname:o}=X(),a=JSON.stringify(M(s,n.v7_relativeSplatPath)),l=i.useRef(!1);return Z(()=>{l.current=!0}),i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=O(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:L([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[t,r,a,o,e])}()}function te(e,t,n,s){J()||c(!1);let{navigator:o}=i.useContext(Y),{matches:a}=i.useContext(Q),l=a[a.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=X();if(t){var m;let e="string"===typeof t?f(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=p;let g=h.pathname||"/",y=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(e,{pathname:y});let _=oe(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:L([d,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:L([d,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,s);return t&&_?i.createElement(G.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},_):_}function ne(){let e=function(){var e;let t=i.useContext($),n=ue(le.UseRouteError),r=de(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const re=i.createElement(ne,null);class ie extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(Q.Provider,{value:this.props.routeContext},i.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(q);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(Q.Provider,{value:t},r)}function oe(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,a=d>=0?a.slice(0,d+1):[a[0]];break}}}return a.reduceRight((e,r,s)=>{let o,c=!1,h=null,p=null;var f;n&&(o=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||re,u&&(d<0&&0===s?(f="route-fallback",!1||he[f]||(he[f]=!0),c=!0,p=null):d===s&&(c=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?h:c?p:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(se,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(ie,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=i.useContext(q);return t||c(!1),t}function ue(e){let t=i.useContext(K);return t||c(!1),t}function de(e){let t=function(){let e=i.useContext(Q);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const he={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function fe(e){let{to:t,replace:n,state:r,relative:s}=e;J()||c(!1);let{future:o,static:a}=i.useContext(Y),{matches:l}=i.useContext(Q),{pathname:u}=X(),d=ee(),h=O(t,M(l,o.v7_relativeSplatPath),u,"path"===s),p=JSON.stringify(h);return i.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function me(e){c(!1)}function ge(e){let{basename:t="/",children:n=null,location:s,navigationType:o=r.Pop,navigator:a,static:l=!1,future:u}=e;J()&&c(!1);let d=t.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:d,navigator:a,static:l,future:H({v7_relativeSplatPath:!1},u)}),[d,u,a,l]);"string"===typeof s&&(s=f(s));let{pathname:p="/",search:m="",hash:g="",state:v=null,key:y="default"}=s,b=i.useMemo(()=>{let e=D(p,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:o}},[d,p,m,g,v,y,o]);return null==b?null:i.createElement(Y.Provider,{value:h},i.createElement(G.Provider,{children:n,value:b}))}function ve(e){let{children:t,location:n}=e;return te(ye(t),n)}new Promise(()=>{});i.Component;function ye(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,ye(e.props.children,s));e.type!==me&&c(!1),e.props.index&&e.props.children&&c(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ye(e.props.children,s)),n.push(o)}),n}var be=n(119),_e=n.t(be,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Fr){}new Map;const we=s.startTransition;_e.flushSync,s.useId;function xe(e){let{basename:t,children:n,future:r,window:s}=e,o=i.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),m(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:p(t)},null,a)));let l=o.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},f=i.useCallback(e=>{d&&we?we(()=>u(e)):u(e)},[u,d]);return i.useLayoutEffect(()=>l.listen(f),[l,f]),i.useEffect(()=>pe(r),[r]),i.createElement(ge,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ce,ke;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ce||(Ce={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ke||(ke={}));var Ee=n(379),Se=n(514),Ne=n(551),Te=n(414);const Ie=(0,i.createContext)();function Pe(e){let{children:t}=e;const n=!1,[r,s]=(0,i.useState)(null),[o,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(()=>{try{const e=localStorage.getItem("departments");return e?JSON.parse(e):[{code:"\ubcf4\uc0c1\uc9c0\uc6d0\ubd80",name:"\ubcf4\uc0c1\uc9c0\uc6d0\ubd80",color:"#4285f4",password:"1343",id:1},{code:"\uacbd\uae30\ubcf4\uc0c13\ud300",name:"\uacbd\uae30\ubcf4\uc0c13\ud300",color:"#34a853",password:"1234",id:2}]}catch(e){return console.error("\ubd80\uc11c \ubaa9\ub85d \ub85c\ub4dc \uc2e4\ud328:",e),[{code:"\ubcf4\uc0c1\uc9c0\uc6d0\ubd80",name:"\ubcf4\uc0c1\uc9c0\uc6d0\ubd80",color:"#4285f4",password:"1343",id:1},{code:"\uacbd\uae30\ubcf4\uc0c13\ud300",name:"\uacbd\uae30\ubcf4\uc0c13\ud300",color:"#34a853",password:"1234",id:2}]}}),h=async(e,t)=>{const n=u.find(t=>t.code===e);if(!n)throw new Error("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ubd80\uc11c\uc785\ub2c8\ub2e4.");if(n.password!==t)throw new Error("\ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4.");const r={email:"".concat(e,"@company.com"),uid:"user-".concat(e),department:n};return s(r),c(n),localStorage.setItem("currentUser",JSON.stringify(r)),localStorage.setItem("currentDepartment",JSON.stringify(n)),Promise.resolve(r)},p=async(e,t)=>{try{const n=u.map(n=>n.code===e?(0,Ee.A)((0,Ee.A)({},n),t):n);if(d(n),localStorage.setItem("departments",JSON.stringify(n)),Se.database){const e=(0,Se.ref)(Se.database,"system/departments");await(0,Se.set)(e,n)}console.log("\ud83d\udd27 \ubd80\uc11c \uc218\uc815: ".concat(t.name||e))}catch(n){throw console.error("\ubd80\uc11c \uc218\uc815 \uc2e4\ud328:",n),n}};(0,i.useEffect)(()=>{(async()=>{try{if(Se.database){const t=(0,Se.ref)(Se.database,"system/departments"),n=await(0,Se.Jt)(t);if(n.exists()){const e=n.val();d(e),localStorage.setItem("departments",JSON.stringify(e)),console.log("\ud83d\udd25 Firebase\uc5d0\uc11c \ubd80\uc11c \ubaa9\ub85d \ubd88\ub7ec\uc634")}else{const t=localStorage.getItem("departments");if(t)try{const e=JSON.parse(t);d(e),console.log("\ud83d\udcbe \ub85c\uceec\uc2a4\ud1a0\ub9ac\uc9c0\uc5d0\uc11c \ubd80\uc11c \ubaa9\ub85d \ubcf5\uc6d0\ub428")}catch(e){console.error("\ubd80\uc11c \ubaa9\ub85d \ubcf5\uc6d0 \uc2e4\ud328:",e)}}const r=(0,Se.ref)(Se.database,"system/adminPassword"),i=await(0,Se.Jt)(r);if(i.exists()){const e=i.val();localStorage.setItem("adminPassword",e),console.log("\ud83d\udd25 Firebase\uc5d0\uc11c \uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638 \ubd88\ub7ec\uc634")}else{const e="admin2025!";localStorage.setItem("adminPassword",e),await(0,Se.set)(r,e),console.log("\ud83d\udd25 Firebase\uc5d0 \uae30\ubcf8 \uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638 \uc800\uc7a5\ub428")}}}catch(e){console.error("Firebase \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",e);const t=localStorage.getItem("departments");if(t)try{const e=JSON.parse(t);d(e),console.log("\ud83d\udcbe \ub85c\uceec\uc2a4\ud1a0\ub9ac\uc9c0\uc5d0\uc11c \ubd80\uc11c \ubaa9\ub85d \ubcf5\uc6d0\ub428 (Firebase \uc2e4\ud328)")}catch(e){console.error("\ubd80\uc11c \ubaa9\ub85d \ubcf5\uc6d0 \uc2e4\ud328:",e)}localStorage.getItem("adminPassword")||(localStorage.setItem("adminPassword","admin2025!"),console.log("\ud83d\udcbe \uae30\ubcf8 \uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638 \uc124\uc815\ub428 (Firebase \uc2e4\ud328)"))}})();const e=localStorage.getItem("currentUser"),t=localStorage.getItem("currentDepartment");if(e&&t)try{const n=JSON.parse(e),r=JSON.parse(t);s(n),c(r),console.log("\ud83c\udfe2 \uc0ac\uc6a9\uc790 \uc138\uc158 \ubcf5\uc6d0: ".concat(r.name," (").concat(n.email,")"))}catch(n){console.error("\uc0ac\uc6a9\uc790 \uc138\uc158 \ubcf5\uc6d0 \uc2e4\ud328:",n),localStorage.removeItem("currentUser"),localStorage.removeItem("currentDepartment")}return(0,Ne.hg)(Se.j2,e=>{if(s(e),e){const e=localStorage.getItem("currentDepartment");e&&c(JSON.parse(e))}a(!1)})},[n]);const f={currentUser:r,currentDepartment:l,departments:u,loginWithDepartment:h,login:async(e,t)=>(0,Ne.x9)(Se.j2,e,t),logout:()=>(s(null),c(null),localStorage.removeItem("currentUser"),localStorage.removeItem("currentDepartment"),(0,Ne.CI)(Se.j2)),addDepartment:async e=>{try{if(u.some(t=>t.code===e.code))throw new Error("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ubd80\uc11c \ucf54\ub4dc\uc785\ub2c8\ub2e4.");const t=(0,Ee.A)((0,Ee.A)({},e),{},{id:Date.now()}),n=[...u,t];if(d(n),localStorage.setItem("departments",JSON.stringify(n)),Se.database){const e=(0,Se.ref)(Se.database,"system/departments");await(0,Se.set)(e,n)}return console.log("\ud83c\udfe2 \uc0c8 \ubd80\uc11c \ucd94\uac00: ".concat(t.name," (").concat(t.code,")")),t}catch(t){throw console.error("\ubd80\uc11c \ucd94\uac00 \uc2e4\ud328:",t),t}},updateDepartment:p,deleteDepartment:async e=>{try{const t=u.find(t=>t.code===e);if(!t)throw new Error("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ubd80\uc11c\uc785\ub2c8\ub2e4.");const n=u.filter(t=>t.code!==e);if(d(n),localStorage.setItem("departments",JSON.stringify(n)),Se.database){const e=(0,Se.ref)(Se.database,"system/departments");await(0,Se.set)(e,n)}console.log("\ud83d\uddd1\ufe0f \ubd80\uc11c \uc0ad\uc81c: ".concat(t.name," (").concat(e,")"))}catch(t){throw console.error("\ubd80\uc11c \uc0ad\uc81c \uc2e4\ud328:",t),t}},updateDepartmentPassword:async(e,t)=>p(e,{password:t}),getDepartmentStorageKey:e=>l?"".concat(l.code,"_").concat(e):e,isLoggedIn:!!r&&!!l};return(0,Te.jsx)(Ie.Provider,{value:f,children:!o&&t})}const Ae=()=>(0,i.useContext)(Ie),De=(0,i.createContext)(),je="ADD_NOTIFICATION",Re="REMOVE_NOTIFICATION",Me="CLEAR_ALL",Oe={notifications:[]};function Le(e,t){switch(t.type){case je:return(0,Ee.A)((0,Ee.A)({},e),{},{notifications:[...e.notifications,t.payload]});case Re:return(0,Ee.A)((0,Ee.A)({},e),{},{notifications:e.notifications.filter(e=>e.id!==t.payload)});case Me:return(0,Ee.A)((0,Ee.A)({},e),{},{notifications:[]});default:return e}}function Fe(e){let{children:t}=e;const[n,r]=(0,i.useReducer)(Le,Oe),s=(0,i.useCallback)(e=>{const t=Date.now()+Math.random(),n=(0,Ee.A)({id:t,type:e.type||"info",title:e.title,message:e.message,duration:e.duration||5e3,createdAt:new Date},e);return r({type:je,payload:n}),n.duration>0&&setTimeout(()=>{r({type:Re,payload:t})},n.duration),t},[]),o=(0,i.useCallback)(e=>{r({type:Re,payload:e})},[]),a=(0,i.useCallback)(()=>{r({type:Me})},[]),l=(0,i.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s((0,Ee.A)({type:"success",title:e,message:t,duration:5e3},n))},[s]),c=(0,i.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s((0,Ee.A)({type:"error",title:e,message:t,duration:5e3},n))},[s]),u=(0,i.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s((0,Ee.A)({type:"warning",title:e,message:t,duration:5e3},n))},[s]),d=(0,i.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s((0,Ee.A)({type:"info",title:e,message:t,duration:5e3},n))},[s]),h={notifications:n.notifications,addNotification:s,removeNotification:o,clearAll:a,showSuccess:l,showError:c,showWarning:u,showInfo:d};return(0,Te.jsx)(De.Provider,{value:h,children:t})}function Ve(){const e=(0,i.useContext)(De);if(!e)throw new Error("useNotification must be used within a NotificationProvider");return e}var Ue=n(578);const Be=new class{constructor(){this.listeners=new Map}sanitizeDepartmentCode(e){try{return btoa(encodeURIComponent(e)).replace(/[/+=]/g,"_")}catch(t){return e.replace(/[^a-zA-Z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")}}getDepartmentPath(e,t){const n=this.sanitizeDepartmentCode(e);return"departments/".concat(n,"/").concat(t)}async saveEmployees(e,t){const n=this.getDepartmentPath(e,"employees");try{return await(0,Ue.hZ)((0,Ue.KR)(Se.Ye,n),t),console.log("\u2705 [".concat(e,"] \uc9c1\uc6d0 \ub370\uc774\ud130 \uc800\uc7a5 \uc644\ub8cc")),{success:!0}}catch(r){return console.error("\u274c [".concat(e,"] \uc9c1\uc6d0 \ub370\uc774\ud130 \uc800\uc7a5 \uc2e4\ud328:"),r),{success:!1,error:r}}}async getEmployees(e){const t=this.getDepartmentPath(e,"employees");try{const e=await(0,Ue.Jt)((0,Ue.KR)(Se.Ye,t));return e.exists()?e.val():[]}catch(n){return console.error("\u274c [".concat(e,"] \uc9c1\uc6d0 \ub370\uc774\ud130 \uc77d\uae30 \uc2e4\ud328:"),n),[]}}async saveVacations(e,t){const n=this.getDepartmentPath(e,"vacations");try{return await(0,Ue.hZ)((0,Ue.KR)(Se.Ye,n),t),console.log("\u2705 [".concat(e,"] \ud734\uac00 \ub370\uc774\ud130 \uc800\uc7a5 \uc644\ub8cc")),{success:!0}}catch(r){return console.error("\u274c [".concat(e,"] \ud734\uac00 \ub370\uc774\ud130 \uc800\uc7a5 \uc2e4\ud328:"),r),{success:!1,error:r}}}async getVacations(e){const t=this.getDepartmentPath(e,"vacations");try{const n=await(0,Ue.Jt)((0,Ue.KR)(Se.Ye,t));if(n.exists()){const t=n.val();if("object"===typeof t&&null!==t){const n=Object.values(t);return console.log("\u2705 [".concat(e,"] Firebase\uc5d0\uc11c \ud734\uac00 ").concat(n.length,"\uac1c \ub85c\ub4dc\ub428")),n}return[]}return console.log("\ud83d\udced [".concat(e,"] Firebase\uc5d0 \ud734\uac00 \ub370\uc774\ud130 \uc5c6\uc74c")),[]}catch(n){return console.error("\u274c [".concat(e,"] \ud734\uac00 \ub370\uc774\ud130 \uc77d\uae30 \uc2e4\ud328:"),n),[]}}async addVacation(e,t){const n=this.getDepartmentPath(e,"vacations");try{const r=(0,Ue.KR)(Se.Ye,n),i=(0,Ue.VC)(r),s=(0,Ee.A)((0,Ee.A)({},t),{},{id:i.key,createdAt:Date.now(),updatedAt:Date.now()});return await(0,Ue.hZ)(i,s),console.log("\u2705 [".concat(e,"] \ud734\uac00 \ucd94\uac00 \uc644\ub8cc:"),s.id),{success:!0,vacation:s}}catch(r){return console.error("\u274c [".concat(e,"] \ud734\uac00 \ucd94\uac00 \uc2e4\ud328:"),r),{success:!1,error:r}}}async updateVacation(e,t,n){const r="".concat(this.getDepartmentPath(e,"vacations"),"/").concat(t);try{const i=(0,Ee.A)((0,Ee.A)({},n),{},{updatedAt:Date.now()});return await(0,Ue.hZ)((0,Ue.KR)(Se.Ye,r),i),console.log("\u2705 [".concat(e,"] \ud734\uac00 \uc218\uc815 \uc644\ub8cc:"),t),{success:!0}}catch(i){return console.error("\u274c [".concat(e,"] \ud734\uac00 \uc218\uc815 \uc2e4\ud328:"),i),{success:!1,error:i}}}async deleteVacation(e,t){const n="".concat(this.getDepartmentPath(e,"vacations"),"/").concat(t);try{return await(0,Ue.TF)((0,Ue.KR)(Se.Ye,n)),console.log("\u2705 [".concat(e,"] \ud734\uac00 \uc0ad\uc81c \uc644\ub8cc:"),t),{success:!0}}catch(r){return console.error("\u274c [".concat(e,"] \ud734\uac00 \uc0ad\uc81c \uc2e4\ud328:"),r),{success:!1,error:r}}}subscribeToEmployees(e,t){const n=this.getDepartmentPath(e,"employees"),r=(0,Ue.KR)(Se.Ye,n),i=(0,Ue.Zy)(r,e=>{const n=e.exists()?e.val():[];t(n)}),s="employees_".concat(e);return this.listeners.set(s,{ref:r,unsubscribe:i}),()=>{i(),this.listeners.delete(s)}}subscribeToVacations(e,t){const n=this.getDepartmentPath(e,"vacations"),r=(0,Ue.KR)(Se.Ye,n),i=(0,Ue.Zy)(r,e=>{const n=e.exists()?e.val():[],r=Array.isArray(n)?n:Object.keys(n||{}).map(e=>(0,Ee.A)((0,Ee.A)({},n[e]),{},{id:e}));t(r)}),s="vacations_".concat(e);return this.listeners.set(s,{ref:r,unsubscribe:i}),()=>{i(),this.listeners.delete(s)}}async saveDepartmentSettings(e,t){const n=this.getDepartmentPath(e,"settings");try{const r=(0,Ee.A)((0,Ee.A)({},t),{},{updatedAt:Date.now()});return await(0,Ue.hZ)((0,Ue.KR)(Se.Ye,n),r),console.log("\u2705 [".concat(e,"] \ubd80\uc11c \uc124\uc815 \uc800\uc7a5 \uc644\ub8cc")),{success:!0}}catch(r){return console.error("\u274c [".concat(e,"] \ubd80\uc11c \uc124\uc815 \uc800\uc7a5 \uc2e4\ud328:"),r),{success:!1,error:r}}}async getDepartmentSettings(e){const t=this.getDepartmentPath(e,"settings");try{const e=await(0,Ue.Jt)((0,Ue.KR)(Se.Ye,t));return e.exists()?e.val():null}catch(n){return console.error("\u274c [".concat(e,"] \ubd80\uc11c \uc124\uc815 \uc77d\uae30 \uc2e4\ud328:"),n),null}}async testConnection(){try{const e=(0,Ue.KR)(Se.Ye,"connection_test");await(0,Ue.hZ)(e,{timestamp:Date.now(),test:!0});const t=await(0,Ue.Jt)(e),n=t.exists()&&!0===t.val().test;return n&&await(0,Ue.TF)(e),console.log("\ud83d\udd25 Firebase \uc5f0\uacb0 \ud14c\uc2a4\ud2b8 ".concat(n?"\uc131\uacf5":"\uc2e4\ud328")),n}catch(e){return console.error("Firebase \uc5f0\uacb0 \ud14c\uc2a4\ud2b8 \uc2e4\ud328:",e),!1}}cleanup(){console.log("\ud83e\uddf9 Firebase \ub9ac\uc2a4\ub108 \uc815\ub9ac \uc911..."),this.listeners.forEach((e,t)=>{let{unsubscribe:n}=e;n(),console.log("\u2705 \ub9ac\uc2a4\ub108 \uc815\ub9ac\ub428: ".concat(t))}),this.listeners.clear()}async exportDepartmentData(e){try{const[t,n,r]=await Promise.all([this.getEmployees(e),this.getVacations(e),this.getDepartmentSettings(e)]);return{departmentCode:e,exportDate:(new Date).toISOString(),data:{employees:t,vacations:n,settings:r}}}catch(t){throw console.error("\u274c [".concat(e,"] \ub370\uc774\ud130 \ub0b4\ubcf4\ub0b4\uae30 \uc2e4\ud328:"),t),t}}async importDepartmentData(e,t){try{const{employees:n,vacations:r,settings:i}=t.data;return await Promise.all([n&&this.saveEmployees(e,n),r&&this.saveVacations(e,r),i&&this.saveDepartmentSettings(e,i)]),console.log("\u2705 [".concat(e,"] \ub370\uc774\ud130 \ubcf5\uc6d0 \uc644\ub8cc")),{success:!0}}catch(n){return console.error("\u274c [".concat(e,"] \ub370\uc774\ud130 \ubcf5\uc6d0 \uc2e4\ud328:"),n),{success:!1,error:n}}}},ze=Be,We=(0,i.createContext)(),He="SET_VACATIONS",qe="ADD_VACATION",Ke="UPDATE_VACATION",Ye="DELETE_VACATION",Ge="DELETE_VACATION_DAY",Qe="DELETE_CONSECUTIVE_VACATIONS",$e={vacations:[]};function Je(e,t){switch(t.type){case He:return(0,Ee.A)((0,Ee.A)({},e),{},{vacations:t.payload});case qe:return(0,Ee.A)((0,Ee.A)({},e),{},{vacations:[...e.vacations,t.payload]});case Ke:return(0,Ee.A)((0,Ee.A)({},e),{},{vacations:e.vacations.map(e=>e.id===t.payload.id?t.payload:e)});case Ye:return(0,Ee.A)((0,Ee.A)({},e),{},{vacations:e.vacations.filter(e=>e.id!==t.payload)});case Ge:const{vacationId:n,date:r}=t.payload;return(0,Ee.A)((0,Ee.A)({},e),{},{vacations:e.vacations.filter(e=>!(e.id===n&&e.date===r))});case Qe:const{startDate:i,endDate:s,employeeId:o}=t.payload,a=new Date(i),l=new Date(s);return(0,Ee.A)((0,Ee.A)({},e),{},{vacations:e.vacations.filter(e=>{if(e.employeeId!==o)return!0;const t=new Date(e.date);return!(t>=a&&t<=l)})});default:return e}}function Xe(e){let{children:t}=e;const[n,r]=(0,i.useReducer)(Je,$e),{currentDepartment:s}=Ae(),{showSuccess:o,showError:a}=Ve(),l=(0,i.useCallback)(e=>null!==s&&void 0!==s&&s.code?"vacation_".concat(s.code,"_").concat(e):"vacation_local_".concat(e),[s]),c=(0,i.useCallback)((e,t)=>{const n=l(e);localStorage.setItem(n,JSON.stringify(t))},[l]),u=(0,i.useCallback)(e=>{r({type:He,payload:e}),c("vacations",e)},[c]),d=(0,i.useCallback)(async e=>{try{const t=(0,Ee.A)((0,Ee.A)({},e),{},{id:e.id||Date.now()+Math.floor(1e3*Math.random()),createdAt:Date.now(),updatedAt:Date.now()});if(null!==s&&void 0!==s&&s.code){const e=await ze.addVacation(s.code,t);if(e.success)return r({type:qe,payload:e.vacation}),o("".concat(t.employeeName,"\ub2d8\uc758 \ud734\uac00\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),e.vacation;throw new Error("Firebase \uc800\uc7a5 \uc2e4\ud328")}return r({type:qe,payload:t}),o("".concat(t.employeeName,"\ub2d8\uc758 \ud734\uac00\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),t}catch(t){throw console.error("\ud734\uac00 \ucd94\uac00 \uc2e4\ud328:",t),t}},[o,s]),h=(0,i.useCallback)(async e=>{try{if(null!==s&&void 0!==s&&s.code){const t=await ze.updateVacation(s.code,e.id,e);if(t.success){r({type:Ke,payload:e}),o("\ud734\uac00\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const t=n.vacations.map(t=>t.id===e.id?e:t);return c("vacations",t),e}{console.error("Firebase \ud734\uac00 \uc218\uc815 \uc2e4\ud328:",t.error),r({type:Ke,payload:e}),o("\ud734\uac00\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4. (\uc624\ud504\ub77c\uc778 \ubaa8\ub4dc)");const i=n.vacations.map(t=>t.id===e.id?e:t);return c("vacations",i),e}}{r({type:Ke,payload:e});const t=n.vacations.map(t=>t.id===e.id?e:t);return c("vacations",t),o("\ud734\uac00\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),e}}catch(t){console.error("\ud734\uac00 \uc218\uc815 \uc911 \uc624\ub958 \ubc1c\uc0dd:",t),r({type:Ke,payload:e});const i=n.vacations.map(t=>t.id===e.id?e:t);return c("vacations",i),o("\ud734\uac00\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4. (\uc624\ud504\ub77c\uc778 \ubaa8\ub4dc)"),e}},[o,s,n.vacations,c]),p=(0,i.useCallback)(async e=>{try{if(null!==s&&void 0!==s&&s.code){if((await ze.deleteVacation(s.code,e)).success){r({type:Ye,payload:e}),o("\ud734\uac00\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const t=n.vacations.filter(t=>t.id!==e);return c("vacations",t),!0}throw new Error("Firebase \uc0ad\uc81c \uc2e4\ud328")}return r({type:Ye,payload:e}),o("\ud734\uac00\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),!0}catch(t){throw console.error("\ud734\uac00 \uc0ad\uc81c \uc2e4\ud328:",t),t}},[o,s,n.vacations,c]),f=(0,i.useCallback)(async(e,t)=>{try{if(null!==s&&void 0!==s&&s.code){if((await ze.deleteVacation(s.code,e)).success){r({type:Ge,payload:{vacationId:e,date:t}}),o("\ud574\ub2f9 \ub0a0\uc9dc\uc758 \ud734\uac00\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const i=n.vacations.filter(t=>t.id!==e);return c("vacations",i),!0}throw new Error("Firebase \uc0ad\uc81c \uc2e4\ud328")}return r({type:Ge,payload:{vacationId:e,date:t}}),o("\ud574\ub2f9 \ub0a0\uc9dc\uc758 \ud734\uac00\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),!0}catch(i){throw console.error("\ud734\uac00 \uc0ad\uc81c \uc2e4\ud328:",i),i}},[o,s,n.vacations,c]),m=(0,i.useCallback)((e,t,n)=>{r({type:Qe,payload:{startDate:e,endDate:t,employeeId:n}}),o("\uc5f0\uc18d \ud734\uac00\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")},[o]),g=(0,i.useCallback)(e=>n.vacations.filter(t=>t.date===e),[n.vacations]),v=(0,i.useCallback)(e=>n.vacations.filter(t=>t.employeeId===e),[n.vacations]),y=(0,i.useCallback)((e,t)=>n.vacations.filter(n=>{const r=new Date(n.date);return r.getFullYear()===e&&r.getMonth()===t}),[n.vacations]);(0,i.useEffect)(()=>{(async()=>{if(null!==s&&void 0!==s&&s.code)try{const e=l("vacations"),t=localStorage.getItem(e);if(t){const e=JSON.parse(t);console.log("\ud83d\udcf1 [".concat(s.code,"] \ub85c\uceec\uc5d0\uc11c \ud734\uac00 ").concat(e.length,"\uac1c \ub85c\ub4dc\ub428")),r({type:He,payload:e})}console.log("\ud83d\udd04 [".concat(s.code,"] Firebase\uc5d0\uc11c \ud734\uac00 \ub370\uc774\ud130 \ub85c\ub529 \uc911..."));const n=await ze.getVacations(s.code);n&&n.length>0?(console.log("\u2705 [".concat(s.code,"] Firebase\uc5d0\uc11c \ud734\uac00 ").concat(n.length,"\uac1c \ub85c\ub4dc\ub428")),r({type:He,payload:n}),c("vacations",n)):t||(console.log("\ud83d\udced [".concat(s.code,"] \ud734\uac00 \ub370\uc774\ud130 \uc5c6\uc74c (Firebase & \ub85c\uceec)")),r({type:He,payload:[]}))}catch(e){console.error("\ud734\uac00 \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",e)}})()},[null===s||void 0===s?void 0:s.code,l,c]);const b={vacations:n.vacations,setVacations:u,addVacation:d,updateVacation:h,deleteVacation:p,deleteVacationDay:f,deleteConsecutiveVacations:m,getVacationsByDate:g,getVacationsByEmployee:v,getMonthlyVacations:y};return(0,Te.jsx)(We.Provider,{value:b,children:t})}const Ze=(0,i.createContext)(),et="SET_EMPLOYEES",tt="ADD_EMPLOYEE",nt="UPDATE_EMPLOYEE",rt="DELETE_EMPLOYEE",it={employees:[]};function st(e,t){switch(t.type){case et:return(0,Ee.A)((0,Ee.A)({},e),{},{employees:t.payload});case tt:return(0,Ee.A)((0,Ee.A)({},e),{},{employees:[...e.employees,t.payload]});case nt:return(0,Ee.A)((0,Ee.A)({},e),{},{employees:e.employees.map(e=>e.id===t.payload.id?t.payload:e)});case rt:return(0,Ee.A)((0,Ee.A)({},e),{},{employees:e.employees.filter(e=>e.id!==t.payload)});default:return e}}const ot=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1","#14B8A6","#F43F5E","#8B5A2B","#6B7280","#DC2626","#7C3AED","#059669","#D97706","#BE185D","#4338CA","#A855F7","#22D3EE","#FACC15","#FB7185","#A78BFA","#4ADE80","#F472B6","#6EE7B7","#F87171","#9CA3AF","#D946EF","#34D399","#FBBF24","#FCA5A5","#C4B5FD","#60A5FA","#F0ABFC","#A3E635","#FDBA74","#FDA4AF"];function at(e){let{children:t}=e;const[n,r]=(0,i.useReducer)(st,it),{currentDepartment:s}=Ae(),{showSuccess:o,showError:a}=Ve(),l=(0,i.useCallback)(e=>null!==s&&void 0!==s&&s.code?"vacation_".concat(s.code,"_").concat(e):"vacation_local_".concat(e),[s]),c=(0,i.useCallback)((e,t)=>{const n=l(e);localStorage.setItem(n,JSON.stringify(t))},[l]),u=(0,i.useCallback)(e=>{r({type:et,payload:e}),c("employees",e)},[c]),d=(0,i.useCallback)(e=>{const t=l("employees"),n=JSON.parse(localStorage.getItem(t)||"[]"),i=n.map(e=>e.color).filter(Boolean),s=ot.filter(e=>!i.includes(e));let a;a=e.color&&null!==e.color?e.color:s.length>0?s[0]:ot[n.length%ot.length];const u=(0,Ee.A)((0,Ee.A)({},e),{},{id:Date.now()+Math.floor(1e3*Math.random()),color:a});r({type:tt,payload:u});const d=[...n,u];return c("employees",d),localStorage.setItem(l("employees_ever_created"),"true"),localStorage.setItem("user_data_exists","true"),sessionStorage.setItem("user_data_exists","true"),o("\uc9c1\uc6d0 \ucd94\uac00 \uc644\ub8cc","".concat(u.name,"\ub2d8\uc774 ").concat(u.team," \ud300\uc5d0 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),{employee:u}),u},[r,l,c,o]),h=(0,i.useCallback)(e=>{r({type:nt,payload:e});const t=n.employees.map(t=>t.id===e.id?e:t);c("employees",t),o("\uc9c1\uc6d0 \uc815\ubcf4\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")},[n.employees,c,o]),p=(0,i.useCallback)(e=>{r({type:rt,payload:e});const t=l("employees"),n=l("vacations"),i=JSON.parse(localStorage.getItem(t)||"[]"),s=JSON.parse(localStorage.getItem(n)||"[]"),a=i.filter(t=>t.id!==e),u=s.filter(t=>t.employeeId!==e);return c("employees",a),c("vacations",u),o("\uc9c1\uc6d0 \ubc0f \uad00\ub828 \ud734\uac00\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),{deletedVacationsCount:s.length-u.length}},[l,c,o]),f=(0,i.useCallback)(e=>n.employees.find(t=>t.id===e),[n.employees]),m=(0,i.useCallback)(e=>n.employees.filter(t=>t.team===e),[n.employees]),g=(0,i.useCallback)(()=>[...new Set(n.employees.map(e=>e.team))].sort(),[n.employees]),v=(0,i.useCallback)(()=>n.employees.map(e=>e.color).filter(Boolean),[n.employees]),y=(0,i.useCallback)(()=>{const e=v();return ot.filter(t=>!e.includes(t))},[v]);(0,i.useEffect)(()=>{(async()=>{if(null!==s&&void 0!==s&&s.code)try{console.log("\ud83d\udd04 [".concat(s.code,"] Firebase\uc5d0\uc11c \uc9c1\uc6d0 \ub370\uc774\ud130 \ub85c\ub529 \uc911..."));const e=await ze.getEmployees(s.code);e&&e.length>0?(console.log("\u2705 [".concat(s.code,"] Firebase\uc5d0\uc11c \uc9c1\uc6d0 ").concat(e.length,"\uba85 \ub85c\ub4dc\ub428")),r({type:et,payload:e}),c("employees",e)):console.log("\ud83d\udced [".concat(s.code,"] Firebase\uc5d0 \uc9c1\uc6d0 \ub370\uc774\ud130 \uc5c6\uc74c"))}catch(e){console.error("Firebase \uc9c1\uc6d0 \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",e);const t=JSON.parse(localStorage.getItem(l("employees"))||"[]");t.length>0&&(r({type:et,payload:t}),console.log("\ud83d\udcbe \ub85c\uceec\uc5d0\uc11c \uc9c1\uc6d0 ".concat(t.length,"\uba85 \ubcf5\uc6d0\ub428")))}})()},[null===s||void 0===s?void 0:s.code,l,c]);const b={employees:n.employees,setEmployees:u,addEmployee:d,updateEmployee:h,deleteEmployee:p,getEmployeeById:f,getEmployeesByTeam:m,getTeams:g,getUsedColors:v,getAvailableColors:y,COLOR_PALETTE:ot};return(0,Te.jsx)(Ze.Provider,{value:b,children:t})}const lt=(0,i.createContext)(),ct="SET_LOADING",ut="SET_ERROR",dt="CLEAR_ERROR",ht="SET_MODAL",pt="TOGGLE_MOBILE_FILTER",ft="SET_SELECTED_DATE",mt="SET_HOLIDAYS_LOADED",gt={loading:!1,error:null,selectedDate:null,activeModal:null,modalProps:null,previousModal:null,holidaysLoaded:!1,mobileFilterOpen:!1};function vt(e,t){switch(t.type){case ct:return(0,Ee.A)((0,Ee.A)({},e),{},{loading:t.payload});case ut:return(0,Ee.A)((0,Ee.A)({},e),{},{error:t.payload,loading:!1});case dt:return(0,Ee.A)((0,Ee.A)({},e),{},{error:null});case ht:return(0,Ee.A)((0,Ee.A)({},e),{},{previousModal:e.activeModal,activeModal:t.payload.type,modalProps:t.payload.modalProps||null,selectedDate:t.payload.date||e.selectedDate});case pt:return(0,Ee.A)((0,Ee.A)({},e),{},{mobileFilterOpen:!e.mobileFilterOpen});case ft:return(0,Ee.A)((0,Ee.A)({},e),{},{selectedDate:t.payload});case mt:return(0,Ee.A)((0,Ee.A)({},e),{},{holidaysLoaded:t.payload});default:return e}}function yt(e){let{children:t}=e;const[n,r]=(0,i.useReducer)(vt,gt),s=(0,i.useCallback)(e=>{r({type:ct,payload:e})},[]),o=(0,i.useCallback)(e=>{r({type:ut,payload:e})},[]),a=(0,i.useCallback)(()=>{r({type:dt})},[]),l=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("[UIStateContext] \ud83d\ude80 openModal \ud638\ucd9c\ub428:",{modalType:e,data:t,currentActiveModal:n.activeModal});try{const n={type:"addVacation"===e?"vacation":e,date:t.date?new Date(t.date):null,modalProps:(0,Ee.A)({},t)};console.log("[UIStateContext] \ud83d\udce4 dispatch \ud398\uc774\ub85c\ub4dc:",n),r({type:ht,payload:n}),console.log("[UIStateContext] \u2705 openModal \uc644\ub8cc")}catch(i){console.error("[UIStateContext] \u274c openModal \uc624\ub958:",i)}},[n.activeModal]),c=(0,i.useCallback)(function(e){r({type:ht,payload:{type:e,date:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,modalProps:null}})},[]),u=(0,i.useCallback)(()=>{r({type:ht,payload:{type:null,date:null,modalProps:null}})},[]),d=(0,i.useCallback)(()=>{r({type:pt})},[]),h=(0,i.useCallback)(e=>{r({type:ft,payload:e})},[]),p=(0,i.useCallback)(e=>{r({type:mt,payload:e})},[]),f=(0,i.useCallback)(e=>n.activeModal===e,[n.activeModal]),m=(0,i.useCallback)(()=>null!==n.error,[n.error]),g={loading:n.loading,error:n.error,selectedDate:n.selectedDate,activeModal:n.activeModal,modalProps:n.modalProps,previousModal:n.previousModal,holidaysLoaded:n.holidaysLoaded,mobileFilterOpen:n.mobileFilterOpen,setLoading:s,setError:o,clearError:a,openModal:l,setModal:c,closeModal:u,toggleMobileFilter:d,setSelectedDate:h,setHolidaysLoaded:p,isModalOpen:f,hasError:m};return(0,Te.jsx)(lt.Provider,{value:g,children:t})}const bt=(0,i.createContext)(),_t="SET_FILTERS",wt="SET_SELECTED_TEAMS",xt="SET_SELECTED_EMPLOYEES",Ct="SET_VACATION_TYPES",kt="RESET_FILTERS",Et=["\uc5f0\ucc28","\uc624\uc804","\uc624\ud6c4","\ud2b9\ubcc4","\ubcd1\uac00","\uc5c5\ubb34"],St={selectedTeams:[],selectedEmployees:[],vacationTypes:[...Et]};function Nt(e,t){switch(t.type){case _t:return(0,Ee.A)((0,Ee.A)({},e),t.payload);case wt:return(0,Ee.A)((0,Ee.A)({},e),{},{selectedTeams:t.payload});case xt:return(0,Ee.A)((0,Ee.A)({},e),{},{selectedEmployees:t.payload});case Ct:return(0,Ee.A)((0,Ee.A)({},e),{},{vacationTypes:t.payload});case kt:return(0,Ee.A)((0,Ee.A)({},St),{},{vacationTypes:[...Et]});default:return e}}function Tt(e){let{children:t}=e;const[n,r]=(0,i.useReducer)(Nt,St),s=(0,i.useCallback)(e=>{r({type:_t,payload:e})},[]),o=(0,i.useCallback)(e=>{r({type:wt,payload:e})},[]),a=(0,i.useCallback)(e=>{r({type:xt,payload:e})},[]),l=(0,i.useCallback)(e=>{r({type:Ct,payload:e})},[]),c=(0,i.useCallback)(()=>{r({type:kt})},[]),u=(0,i.useCallback)(e=>{const t=n.selectedTeams,r=t.includes(e)?t.filter(t=>t!==e):[...t,e];o(r)},[n.selectedTeams,o]),d=(0,i.useCallback)(e=>{const t=n.selectedEmployees,r=t.includes(e)?t.filter(t=>t!==e):[...t,e];a(r)},[n.selectedEmployees,a]),h=(0,i.useCallback)(e=>{const t=n.vacationTypes,r=t.includes(e)?t.filter(t=>t!==e):[...t,e];l(r)},[n.vacationTypes,l]),p=(0,i.useCallback)(e=>n.selectedTeams.includes(e),[n.selectedTeams]),f=(0,i.useCallback)(e=>n.selectedEmployees.includes(e),[n.selectedEmployees]),m=(0,i.useCallback)(e=>n.vacationTypes.includes(e),[n.vacationTypes]),g=(0,i.useCallback)(()=>n.selectedTeams.length>0||n.selectedEmployees.length>0||n.vacationTypes.length!==Et.length||!Et.every(e=>n.vacationTypes.includes(e)),[n.selectedTeams.length,n.selectedEmployees.length,n.vacationTypes]),v=(0,i.useCallback)(()=>{let e=0;return n.selectedTeams.length>0&&e++,n.selectedEmployees.length>0&&e++,n.vacationTypes.length===Et.length&&Et.every(e=>n.vacationTypes.includes(e))||e++,e},[n.selectedTeams.length,n.selectedEmployees.length,n.vacationTypes]),y=(0,i.useCallback)(e=>n.selectedTeams.length>0?n.selectedTeams.includes(e.team):!(n.selectedEmployees.length>0)||n.selectedEmployees.includes(e.id),[n.selectedTeams,n.selectedEmployees]),b=(0,i.useCallback)(e=>n.vacationTypes.includes(e.type),[n.vacationTypes]),_={selectedTeams:n.selectedTeams,selectedEmployees:n.selectedEmployees,vacationTypes:n.vacationTypes,setFilters:s,setSelectedTeams:o,setSelectedEmployees:a,setVacationTypes:l,resetFilters:c,toggleTeam:u,toggleEmployee:d,toggleVacationType:h,isTeamSelected:p,isEmployeeSelected:f,isVacationTypeSelected:m,hasActiveFilters:g,getActiveFiltersCount:v,shouldShowEmployee:y,shouldShowVacation:b,DEFAULT_VACATION_TYPES:Et};return(0,Te.jsx)(bt.Provider,{value:_,children:t})}const It=(0,i.createContext)(),Pt="SET_FIREBASE_CONNECTION",At="SET_FIREBASE_SYNCING",Dt="SET_LAST_SYNC_TIME",jt={connected:!1,syncing:!1,lastSyncTime:null};function Rt(e,t){switch(t.type){case Pt:return(0,Ee.A)((0,Ee.A)({},e),{},{connected:t.payload,syncing:!!t.payload&&e.syncing,lastSyncTime:(t.payload,e.lastSyncTime)});case At:return(0,Ee.A)((0,Ee.A)({},e),{},{syncing:t.payload,lastSyncTime:!t.payload&&e.syncing?(new Date).toISOString():e.lastSyncTime});case Dt:return(0,Ee.A)((0,Ee.A)({},e),{},{lastSyncTime:t.payload});default:return e}}function Mt(e){let{children:t}=e;const[n,r]=(0,i.useReducer)(Rt,jt),s=(0,i.useCallback)(e=>{console.log("[FirebaseStateContext] Firebase \uc5f0\uacb0 \uc0c1\ud0dc \ubcc0\uacbd:",e),r({type:Pt,payload:e})},[]),o=(0,i.useCallback)(e=>{console.log("[FirebaseStateContext] Firebase \ub3d9\uae30\ud654 \uc0c1\ud0dc \ubcc0\uacbd:",e),r({type:At,payload:e})},[]),a=(0,i.useCallback)(e=>{const t=e instanceof Date?e.toISOString():e;console.log("[FirebaseStateContext] \ub9c8\uc9c0\ub9c9 \ub3d9\uae30\ud654 \uc2dc\uac04 \uc124\uc815:",t),r({type:Dt,payload:t})},[]),l=(0,i.useCallback)(()=>n.connected,[n.connected]),c=(0,i.useCallback)(()=>n.syncing,[n.syncing]),u=(0,i.useCallback)(()=>n.connected?n.syncing?"syncing":"connected":"disconnected",[n.connected,n.syncing]),d=(0,i.useCallback)(()=>{if(!n.lastSyncTime)return null;try{const e=new Date(n.lastSyncTime),t=new Date-e,r=Math.floor(t/6e4),i=Math.floor(t/36e5),s=Math.floor(t/864e5);return r<1?"\ubc29\uae08 \uc804":r<60?"".concat(r,"\ubd84 \uc804"):i<24?"".concat(i,"\uc2dc\uac04 \uc804"):s<7?"".concat(s,"\uc77c \uc804"):e.toLocaleDateString("ko-KR")}catch(e){return console.error("[FirebaseStateContext] \ub3d9\uae30\ud654 \uc2dc\uac04 \ud3ec\ub9f7 \uc624\ub958:",e),null}},[n.lastSyncTime]),h=(0,i.useCallback)(()=>{switch(u()){case"connected":return"\uc5f0\uacb0\ub428";case"syncing":return"\ub3d9\uae30\ud654 \uc911";case"disconnected":return"\uc5f0\uacb0 \uc548\ub428";default:return"\uc54c \uc218 \uc5c6\uc74c"}},[u]),p=(0,i.useCallback)(()=>{switch(u()){case"connected":return"#10B981";case"syncing":return"#F59E0B";case"disconnected":return"#EF4444";default:return"#6B7280"}},[u]),f={connected:n.connected,syncing:n.syncing,lastSyncTime:n.lastSyncTime,setFirebaseConnection:s,setFirebaseSyncing:o,setLastSyncTime:a,isConnected:l,isSyncing:c,getConnectionStatus:u,getLastSyncTimeFormatted:d,getConnectionStatusText:h,getSyncIndicatorColor:p};return(0,Te.jsx)(It.Provider,{value:f,children:t})}const Ot=(0,i.createContext)();function Lt(e){let{children:t}=e;const{currentDepartment:n}=Ae(),r=function(){const e=(0,i.useContext)(We);if(!e)throw new Error("useVacationData must be used within a VacationDataProvider");return e}(),s=function(){const e=(0,i.useContext)(Ze);if(!e)throw new Error("useEmployeeData must be used within an EmployeeDataProvider");return e}(),o=function(){const e=(0,i.useContext)(lt);if(!e)throw new Error("useUIState must be used within a UIStateProvider");return e}(),a=function(){const e=(0,i.useContext)(bt);if(!e)throw new Error("useFilters must be used within a FiltersProvider");return e}(),l=function(){const e=(0,i.useContext)(It);if(!e)throw new Error("useFirebaseState must be used within a FirebaseStateProvider");return e}(),[c,u]=i.useState({selectedYear:(new Date).getFullYear(),selectedMonth:(new Date).getMonth(),holidays:{}}),d=((0,i.useCallback)(e=>null!==n&&void 0!==n&&n.code?"vacation_".concat(n.code,"_").concat(e):"vacation_local_".concat(e),[n]),(0,i.useCallback)((e,t)=>{u(n=>(0,Ee.A)((0,Ee.A)({},n),{},{selectedYear:e,selectedMonth:t}))},[])),h=(0,i.useCallback)((e,t)=>{d(e,t)},[d]),p=(0,i.useCallback)(e=>{u(t=>(0,Ee.A)((0,Ee.A)({},t),{},{holidays:e}))},[]),f=(0,Ee.A)((0,Ee.A)((0,Ee.A)((0,Ee.A)((0,Ee.A)((0,Ee.A)({},s),r),o),a),l),{},{setDate:d,setSelectedDate:h,setHolidays:p,addBatchVacations:(0,i.useCallback)((e,t)=>{const n=t.map(e=>({id:Date.now()+Math.floor(1e3*Math.random()),name:e,team:"\uae30\ud0c0",position:"member"}));n.forEach(e=>s.addEmployee(e));const i=e.map(e=>{const t=[...s.employees,...n].find(t=>t.name===e.employeeName);let r;if("string"===typeof e.date)r=e.date;else{const t=e.date.getFullYear(),n=String(e.date.getMonth()+1).padStart(2,"0"),i=String(e.date.getDate()).padStart(2,"0");r="".concat(t,"-").concat(n,"-").concat(i)}return{id:Date.now()+Math.floor(1e3*Math.random()),employeeId:t.id,date:r,type:e.type}});i.forEach(e=>r.addVacation(e))},[s,r]),cleanupOrphanedVacations:(0,i.useCallback)(()=>{const e=s.employees.map(e=>e.id),t=r.vacations.filter(t=>{const n=e.includes(t.employeeId);return n||console.log("[DataCleanup] \uace0\uc544 \ud734\uac00 \uc81c\uac70: ID ".concat(t.id,", \uc9c1\uc6d0ID ").concat(t.employeeId,", \ub0a0\uc9dc ").concat(t.date)),n}),n=r.vacations.length-t.length;return n>0?(r.setVacations(t),console.log("[DataCleanup] ".concat(n,"\uac1c\uc758 \uace0\uc544 \ud734\uac00\uac00 \uc81c\uac70\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),n):0},[s.employees,r]),detectConflicts:(0,i.useCallback)(e=>{const t=r.vacations.filter(t=>t.id!==e.id&&t.employeeId===e.employeeId&&t.date===e.date);return console.log("[VacationContext] \ud83d\udd0d detectConflicts:",{inputVacation:e,totalVacations:r.vacations.length,conflicts:t.length,conflictDetails:t.map(e=>({id:e.id,date:e.date,type:e.type}))}),t},[r.vacations])}),m={filteredEmployees:(0,i.useCallback)(()=>s.employees.filter(e=>a.shouldShowEmployee(e)),[s.employees,a.shouldShowEmployee]),getVacationsByDate:(0,i.useCallback)(e=>{const t=e instanceof Date?e.toISOString().split("T")[0]:e;return r.getVacationsByDate(t)},[r.getVacationsByDate]),getVacationsByEmployee:(0,i.useCallback)(e=>r.getVacationsByEmployee(e),[r.getVacationsByEmployee]),getMonthlyStats:(0,i.useCallback)(()=>{const e=r.vacations.filter(e=>{const t=new Date(e.date);return t.getFullYear()===c.selectedYear&&t.getMonth()===c.selectedMonth}),t={total:e.length,byType:{},byEmployee:{}};return e.forEach(e=>{t.byType[e.type]=(t.byType[e.type]||0)+1,t.byEmployee[e.employeeId]=(t.byEmployee[e.employeeId]||0)+1}),t},[r.vacations,c.selectedYear,c.selectedMonth]),getMonthlyVacations:(0,i.useCallback)((e,t)=>r.getMonthlyVacations(e,t),[r.getMonthlyVacations])},g={state:{employees:s.employees,departments:n?[n]:[],vacations:r.vacations,selectedYear:c.selectedYear,selectedMonth:c.selectedMonth,holidays:c.holidays,filters:{selectedTeams:a.selectedTeams,selectedEmployees:a.selectedEmployees,vacationTypes:a.vacationTypes},ui:{loading:o.loading,error:o.error,selectedDate:o.selectedDate,activeModal:o.activeModal,modalProps:o.modalProps,previousModal:o.previousModal,holidaysLoaded:o.holidaysLoaded,mobileFilterOpen:o.mobileFilterOpen},firebase:{connected:l.connected,syncing:l.syncing,lastSyncTime:l.lastSyncTime}},actions:f,computed:m,currentDepartment:n};return(0,Te.jsx)(Ot.Provider,{value:g,children:t})}function Ft(e){let{children:t}=e;return(0,Te.jsx)(Mt,{children:(0,Te.jsx)(yt,{children:(0,Te.jsx)(Tt,{children:(0,Te.jsx)(at,{children:(0,Te.jsx)(Xe,{children:(0,Te.jsx)(Lt,{children:t})})})})})})}function Vt(){const e=(0,i.useContext)(Ot);if(!e)throw new Error("useVacation must be used within a VacationProvider");return e}const Ut=(0,i.createContext)(),Bt=()=>{const e=(0,i.useContext)(Ut);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},zt=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(()=>localStorage.getItem("vacation-theme")||"light"),[s,o]=(0,i.useState)(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");(0,i.useEffect)(()=>{const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{o(e.matches?"dark":"light")};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]);const a="system"===n?s:n;(0,i.useEffect)(()=>{document.documentElement.setAttribute("data-theme",a);const e=document.documentElement;"dark"===a?(e.style.setProperty("--background-primary","#1e1e1e"),e.style.setProperty("--background-secondary","#2a2a2a"),e.style.setProperty("--background-hover","#404040"),e.style.setProperty("--background-accent","#505050"),e.style.setProperty("--border-color","#333333"),e.style.setProperty("--border-color-light","rgba(255, 255, 255, 0.1)"),e.style.setProperty("--text-primary","#ffffff"),e.style.setProperty("--text-secondary","#b0b0b0"),e.style.setProperty("--primary-color","#4285f4"),e.style.setProperty("--primary-dark","#3367d6"),e.style.setProperty("--success-color","#34a853"),e.style.setProperty("--error-color","#ea4335"),e.style.setProperty("--warning-color","#fbbc04"),e.style.setProperty("--info-color","#4285f4"),e.style.setProperty("--holiday-bg","rgba(255, 71, 87, 0.15)"),e.style.setProperty("--holiday-border","rgba(255, 71, 87, 0.3)"),e.style.setProperty("--holiday-day-bg","rgba(255, 71, 87, 0.08)"),e.style.setProperty("--holiday-border-color","#ff6b87"),e.style.setProperty("--holiday-text-color","#ff6b87"),e.style.setProperty("--holiday-name-bg","rgba(30, 30, 30, 0.95)"),e.style.setProperty("--holiday-row-bg","rgba(255, 71, 87, 0.12)"),e.style.setProperty("--vacation-annual-color","rgba(74, 172, 255, 0.8)"),e.style.setProperty("--vacation-morning-color","rgba(175, 119, 202, 0.8)"),e.style.setProperty("--vacation-afternoon-color","rgba(255, 146, 64, 0.8)"),e.style.setProperty("--vacation-special-color","rgba(255, 96, 80, 0.8)"),e.style.setProperty("--vacation-sick-color","rgba(169, 185, 186, 0.8)"),e.style.setProperty("--vacation-work-color","rgba(82, 103, 124, 0.8)"),e.style.setProperty("--primary-bg","rgba(66, 133, 244, 0.15)"),e.style.setProperty("--primary-bg-hover","rgba(66, 133, 244, 0.2)"),e.style.setProperty("--vacation-day-bg","rgba(66, 133, 244, 0.05)")):(e.style.setProperty("--background-primary","#ffffff"),e.style.setProperty("--background-secondary","#f8f9fa"),e.style.setProperty("--background-hover","#f0f0f0"),e.style.setProperty("--background-accent","#e0e0e0"),e.style.setProperty("--border-color","#e0e0e0"),e.style.setProperty("--border-color-light","rgba(0, 0, 0, 0.05)"),e.style.setProperty("--text-primary","#1a1a1a"),e.style.setProperty("--text-secondary","#666666"),e.style.setProperty("--primary-color","#4285f4"),e.style.setProperty("--primary-dark","#3367d6"),e.style.setProperty("--success-color","#34a853"),e.style.setProperty("--error-color","#ea4335"),e.style.setProperty("--warning-color","#fbbc04"),e.style.setProperty("--info-color","#3498db"),e.style.setProperty("--holiday-bg","rgba(255, 71, 87, 0.1)"),e.style.setProperty("--holiday-border","rgba(255, 71, 87, 0.2)"),e.style.setProperty("--holiday-day-bg","rgba(255, 71, 87, 0.05)"),e.style.setProperty("--holiday-border-color","#ff4757"),e.style.setProperty("--holiday-text-color","#ff4757"),e.style.setProperty("--holiday-name-bg","rgba(255, 255, 255, 0.9)"),e.style.setProperty("--holiday-row-bg","rgba(255, 71, 87, 0.08)"),e.style.setProperty("--vacation-annual-color","rgba(52, 152, 219, 0.8)"),e.style.setProperty("--vacation-morning-color","rgba(155, 89, 182, 0.8)"),e.style.setProperty("--vacation-afternoon-color","rgba(230, 126, 34, 0.8)"),e.style.setProperty("--vacation-special-color","rgba(231, 76, 60, 0.8)"),e.style.setProperty("--vacation-sick-color","rgba(149, 165, 166, 0.8)"),e.style.setProperty("--vacation-work-color","rgba(52, 73, 94, 0.8)"),e.style.setProperty("--primary-bg","rgba(66, 133, 244, 0.1)"),e.style.setProperty("--primary-bg-hover","rgba(66, 133, 244, 0.15)"),e.style.setProperty("--vacation-day-bg","rgba(66, 133, 244, 0.03)"))},[a]);const l={theme:n,effectiveTheme:a,systemTheme:s,toggleTheme:()=>{const e=["light","dark","system"],t=e.indexOf(n),i=e[(t+1)%e.length];r(i),localStorage.setItem("vacation-theme",i)},setSpecificTheme:e=>{["light","dark","system"].includes(e)&&(r(e),localStorage.setItem("vacation-theme",e))},getThemeIcon:()=>{switch(n){case"light":default:return"\u2600\ufe0f";case"dark":return"\ud83c\udf19";case"system":return"\ud83d\udcbb"}},getThemeLabel:()=>{switch(n){case"light":default:return"\ub77c\uc774\ud2b8 \ubaa8\ub4dc";case"dark":return"\ub2e4\ud06c \ubaa8\ub4dc";case"system":return"\uc2dc\uc2a4\ud15c \uc124\uc815"}},isLight:"light"===a,isDark:"dark"===a};return(0,Te.jsx)(Ut.Provider,{value:l,children:t})},Wt=e=>{let{onShowAdminLogin:t}=e;const{departments:n,loginWithDepartment:r}=Ae(),{theme:s,toggleTheme:o}=Bt(),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[d,h]=(0,i.useState)(!1),[p,f]=(0,i.useState)(""),m=(0,i.useCallback)(async e=>{if(e.preventDefault(),a.trim()&&c){h(!0),f("");try{const e=n.find(e=>e.name.toLowerCase()===a.trim().toLowerCase());if(!e)return f("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ubd80\uc11c\uba85\uc785\ub2c8\ub2e4."),void h(!1);await r(e.code,c)}catch(p){f(p.message)}finally{h(!1)}}else f("\ubd80\uc11c\uba85\uacfc \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},[a,c,r,n]);return(0,Te.jsx)("div",{className:"login-container",children:(0,Te.jsxs)("div",{className:"login-card",id:"main-content",tabIndex:"-1",children:[(0,Te.jsxs)("div",{className:"login-header",children:[(0,Te.jsx)("div",{className:"header-top",children:(0,Te.jsx)("div",{className:"theme-toggle login-theme-toggle",children:(0,Te.jsx)("button",{className:"theme-button login-theme-button",onClick:o,title:"\ud604\uc7ac: ".concat("light"===s?"\ub77c\uc774\ud2b8 \ubaa8\ub4dc":"dark"===s?"\ub2e4\ud06c \ubaa8\ub4dc":"\uc2dc\uc2a4\ud15c \uc124\uc815"),"aria-label":"\ud14c\ub9c8 \ubcc0\uacbd",children:(0,Te.jsx)("span",{className:"theme-icon",children:"light"===s?"Light":"dark"===s?"Dark":"Auto"})})})}),(0,Te.jsx)("div",{className:"company-logo",children:(0,Te.jsx)("h1",{className:"company-title",children:"\ud734\uac00 \uad00\ub9ac \uc2dc\uc2a4\ud15c"})}),(0,Te.jsx)("p",{className:"login-subtitle",children:"\ubd80\uc11c\uba85\uacfc \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc5ec \ub85c\uadf8\uc778\ud558\uc138\uc694"})]}),(0,Te.jsxs)("form",{className:"login-form",onSubmit:m,children:[(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"departmentName",children:"\ubd80\uc11c\uba85"}),(0,Te.jsx)("input",{type:"text",id:"departmentName",value:a,onChange:e=>l(e.target.value),placeholder:"\ubd80\uc11c\uba85\uc744 \uc785\ub825\ud558\uc138\uc694",className:"form-input",autoComplete:"organization",list:"department-suggestions"}),(0,Te.jsx)("datalist",{id:"department-suggestions",children:n.map(e=>(0,Te.jsx)("option",{value:e.name},e.code))}),n.length>0&&(0,Te.jsx)("div",{className:"department-suggestions",children:(0,Te.jsxs)("small",{children:["\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ubd80\uc11c: ",n.slice(0,3).map(e=>e.name).join(", "),n.length>3?" \uc678 ".concat(n.length-3,"\uac1c"):""]})})]}),(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"password",children:"\ube44\ubc00\ubc88\ud638"}),(0,Te.jsx)("input",{type:"password",id:"password",value:c,onChange:e=>u(e.target.value),placeholder:"\ubd80\uc11c \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694",className:"form-input",autoComplete:"current-password"})]}),p&&(0,Te.jsx)("div",{className:"error-message",children:p}),(0,Te.jsx)("button",{type:"submit",className:"login-button",disabled:d||!a.trim()||!c,children:d?(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("span",{className:"loading-spinner"}),"\ub85c\uadf8\uc778 \uc911..."]}):a.trim()?"".concat(a.trim()," \ub85c\uadf8\uc778"):"\ub85c\uadf8\uc778"})]}),(0,Te.jsxs)("div",{className:"login-help",children:[(0,Te.jsx)("div",{className:"help-title",children:"\ub85c\uadf8\uc778 \uc548\ub0b4"}),(0,Te.jsxs)("div",{className:"help-text",children:["\uc815\ud655\ud55c \ubd80\uc11c\uba85\uacfc \ubd80\uc11c\ubcc4 \uc804\uc6a9 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694.",(0,Te.jsx)("br",{}),"\ubd80\uc11c\uba85\uc774\ub098 \ube44\ubc00\ubc88\ud638\uac00 \uae30\uc5b5\ub098\uc9c0 \uc54a\uc73c\uc2dc\uba74 \ubd80\uc11c \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."]})]}),t&&(0,Te.jsx)("div",{className:"admin-section",children:(0,Te.jsx)("button",{className:"admin-button",onClick:t,type:"button",children:"\uc2dc\uc2a4\ud15c \uad00\ub9ac\uc790 \ub85c\uadf8\uc778"})})]})})},Ht=e=>{let{onAdminLogin:t,onBackToLogin:n}=e;const[r,s]=(0,i.useState)(""),[o,a]=(0,i.useState)(!1),{showError:l}=Ve(),{theme:c,toggleTheme:u}=Bt();return(0,Te.jsx)("div",{className:"admin-login-container",children:(0,Te.jsxs)("div",{className:"admin-login-card",children:[(0,Te.jsxs)("div",{className:"admin-header",children:[(0,Te.jsx)("div",{className:"admin-header-top",children:(0,Te.jsx)("button",{className:"admin-theme-button",onClick:u,title:"\ud604\uc7ac: ".concat("light"===c?"\ub77c\uc774\ud2b8 \ubaa8\ub4dc":"dark"===c?"\ub2e4\ud06c \ubaa8\ub4dc":"\uc2dc\uc2a4\ud15c \uc124\uc815"),children:"light"===c?"\u2600\ufe0f":"dark"===c?"\ud83c\udf19":"\ud83d\udcbb"})}),(0,Te.jsxs)("div",{className:"admin-logo",children:[(0,Te.jsx)("span",{className:"admin-icon",children:"\ud83d\udd10"}),(0,Te.jsx)("h1",{className:"admin-title",children:"\uc2dc\uc2a4\ud15c \uad00\ub9ac\uc790"})]}),(0,Te.jsx)("p",{className:"admin-subtitle",children:"\uad00\ub9ac\uc790 \uad8c\ud55c\uc73c\ub85c \ub85c\uadf8\uc778\ud558\uc138\uc694"})]}),(0,Te.jsxs)("form",{className:"admin-form",onSubmit:async e=>{if(e.preventDefault(),r.trim()){a(!0);try{r===(localStorage.getItem("adminPassword")||"admin2025!")?t():l("\ub85c\uadf8\uc778 \uc2e4\ud328","\uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4.",5e3)}catch(n){l("\ub85c\uadf8\uc778 \uc624\ub958","\uad00\ub9ac\uc790 \ub85c\uadf8\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.",5e3)}finally{a(!1)}}else l("\uc785\ub825 \uc624\ub958","\uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},children:[(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"adminPassword",children:"\uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638"}),(0,Te.jsx)("input",{type:"password",id:"adminPassword",value:r,onChange:e=>s(e.target.value),placeholder:"\uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694",className:"admin-input",autoFocus:!0})]}),(0,Te.jsx)("button",{type:"submit",className:"admin-login-button",disabled:o||!r,children:o?(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("span",{className:"loading-spinner",children:"\u23f3"}),"\ub85c\uadf8\uc778 \uc911..."]}):(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("span",{className:"login-icon",children:"\ud83d\udd11"}),"\uad00\ub9ac\uc790 \ub85c\uadf8\uc778"]})})]}),(0,Te.jsx)("div",{className:"admin-back",children:(0,Te.jsx)("button",{className:"back-button",onClick:n,type:"button",children:"\u2190 \uc77c\ubc18 \ub85c\uadf8\uc778\uc73c\ub85c \ub3cc\uc544\uac00\uae30"})}),(0,Te.jsxs)("div",{className:"admin-notice",children:[(0,Te.jsx)("div",{className:"notice-title",children:"\u26a0\ufe0f \uad00\ub9ac\uc790 \uc804\uc6a9"}),(0,Te.jsxs)("div",{className:"notice-text",children:["\uc774 \ud398\uc774\uc9c0\ub294 \uc2dc\uc2a4\ud15c \uad00\ub9ac\uc790\ub9cc \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",(0,Te.jsx)("br",{}),"\ubd80\uc11c/\ud300 \uc0dd\uc131 \ubc0f \uc804\uccb4 \uc2dc\uc2a4\ud15c \uad00\ub9ac \uad8c\ud55c\uc774 \uc81c\uacf5\ub429\ub2c8\ub2e4."]})]})]})})},qt=e=>{let{isOpen:t,onClose:n}=e;const{departments:r,addDepartment:s,updateDepartment:o,deleteDepartment:a}=Ae(),{showSuccess:l,showError:c}=Ve(),[u,d]=(0,i.useState)(!1),[h,p]=(0,i.useState)(null),[f,m]=(0,i.useState)({name:"",code:"",color:"#4285f4",password:""}),g=()=>{m({name:"",code:"",color:"#4285f4",password:""}),p(null),d(!1)};return t?(0,Te.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Te.jsxs)("div",{className:"department-manager",onClick:e=>e.stopPropagation(),children:[(0,Te.jsxs)("div",{className:"manager-header",children:[(0,Te.jsx)("h2",{className:"manager-title",children:"\ud83c\udfe2 \ubd80\uc11c/\ud300 \uad00\ub9ac"}),(0,Te.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Te.jsx)("div",{className:"manager-content",children:u?(0,Te.jsx)(Te.Fragment,{children:(0,Te.jsxs)("div",{className:"add-form",children:[(0,Te.jsxs)("div",{className:"form-header",children:[(0,Te.jsx)("h3",{children:h?"\ubd80\uc11c \uc218\uc815":"\uc0c8 \ubd80\uc11c \ucd94\uac00"}),(0,Te.jsx)("button",{className:"back-btn",onClick:g,children:"\u2190 \ubaa9\ub85d\uc73c\ub85c"})]}),(0,Te.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f.name.trim()&&f.code.trim()&&f.password.trim())if(h||!r.some(e=>e.code===f.code))try{h?(await o(h.code,f),l("\ubd80\uc11c \uc218\uc815","".concat(f.name," \ubd80\uc11c\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))):(await s(f),l("\ubd80\uc11c \uc0dd\uc131","".concat(f.name," \ubd80\uc11c\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))),g()}catch(t){c("\ucc98\ub9ac \uc2e4\ud328",t.message)}else c("\uc785\ub825 \uc624\ub958","\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ubd80\uc11c \ucf54\ub4dc\uc785\ub2c8\ub2e4.");else c("\uc785\ub825 \uc624\ub958","\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},children:[(0,Te.jsxs)("div",{className:"form-grid",children:[(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"deptName",children:"\ubd80\uc11c/\ud300 \uc774\ub984 *"}),(0,Te.jsx)("input",{type:"text",id:"deptName",value:f.name,onChange:e=>m(t=>(0,Ee.A)((0,Ee.A)({},t),{},{name:e.target.value})),placeholder:"\uc608: \uac1c\ubc1c\ud300, \ub9c8\ucf00\ud305\ubd80",className:"form-input",maxLength:20})]}),(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"deptCode",children:"\ubd80\uc11c \ucf54\ub4dc *"}),(0,Te.jsx)("input",{type:"text",id:"deptCode",value:f.code,onChange:e=>m(t=>(0,Ee.A)((0,Ee.A)({},t),{},{code:e.target.value.toLowerCase()})),placeholder:"\uc608: dev, marketing",className:"form-input",maxLength:10,disabled:h}),(0,Te.jsx)("div",{className:"form-help",children:"\ub85c\uadf8\uc778 ID\ub85c \uc0ac\uc6a9\ub429\ub2c8\ub2e4. \uc18c\ubb38\uc790, \uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4."})]}),(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"deptColor",children:"\ubd80\uc11c \uc0c9\uc0c1"}),(0,Te.jsx)("div",{className:"color-picker",children:["#4285f4","#34a853","#ff6b6b","#ffbb33","#9c27b0","#00bcd4","#ff5722","#607d8b","#795548","#e91e63","#3f51b5","#009688"].map(e=>(0,Te.jsx)("button",{type:"button",className:"color-option ".concat(f.color===e?"selected":""),style:{backgroundColor:e},onClick:()=>m(t=>(0,Ee.A)((0,Ee.A)({},t),{},{color:e}))},e))})]}),(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"deptPassword",children:"\ubd80\uc11c \ube44\ubc00\ubc88\ud638 *"}),(0,Te.jsxs)("div",{className:"password-input",children:[(0,Te.jsx)("input",{type:"text",id:"deptPassword",value:f.password,onChange:e=>m(t=>(0,Ee.A)((0,Ee.A)({},t),{},{password:e.target.value})),placeholder:"\ubd80\uc11c \ub85c\uadf8\uc778 \ube44\ubc00\ubc88\ud638",className:"form-input",maxLength:20}),(0,Te.jsx)("button",{type:"button",className:"generate-btn",onClick:()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let n=0;n<8;n++)t+=e.charAt(Math.floor(62*Math.random()));m(e=>(0,Ee.A)((0,Ee.A)({},e),{},{password:t}))},title:"\ub79c\ub364 \ube44\ubc00\ubc88\ud638 \uc0dd\uc131",children:"\ud83c\udfb2"})]}),(0,Te.jsx)("div",{className:"form-help",children:"\uc774 \ube44\ubc00\ubc88\ud638\ub85c \ud574\ub2f9 \ubd80\uc11c\uc5d0\uc11c \ub85c\uadf8\uc778\ud569\ub2c8\ub2e4."})]})]}),(0,Te.jsxs)("div",{className:"form-actions",children:[(0,Te.jsx)("button",{type:"button",className:"cancel-btn",onClick:g,children:"\ucde8\uc18c"}),(0,Te.jsx)("button",{type:"submit",className:"submit-btn",children:h?"\uc218\uc815 \uc644\ub8cc":"\ubd80\uc11c \uc0dd\uc131"})]})]})]})}):(0,Te.jsx)(Te.Fragment,{children:(0,Te.jsxs)("div",{className:"department-list",children:[(0,Te.jsxs)("div",{className:"list-header",children:[(0,Te.jsxs)("h3",{children:["\ub4f1\ub85d\ub41c \ubd80\uc11c/\ud300 (",r.length,"\uac1c)"]}),(0,Te.jsx)("button",{className:"add-button",onClick:()=>d(!0),children:"+ \uc0c8 \ubd80\uc11c \ucd94\uac00"})]}),0===r.length?(0,Te.jsxs)("div",{className:"empty-state",children:[(0,Te.jsx)("div",{className:"empty-icon",children:"\ud83c\udfe2"}),(0,Te.jsx)("div",{className:"empty-text",children:"\ub4f1\ub85d\ub41c \ubd80\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,Te.jsx)("button",{className:"empty-action",onClick:()=>d(!0),children:"\uccab \ubc88\uc9f8 \ubd80\uc11c \ub9cc\ub4e4\uae30"})]}):(0,Te.jsx)("div",{className:"department-cards",children:r.map(e=>(0,Te.jsxs)("div",{className:"dept-card",children:[(0,Te.jsxs)("div",{className:"dept-card-header",children:[(0,Te.jsxs)("div",{className:"dept-info",children:[(0,Te.jsx)("div",{className:"dept-color-indicator",style:{backgroundColor:e.color}}),(0,Te.jsxs)("div",{className:"dept-details",children:[(0,Te.jsx)("div",{className:"dept-name",children:e.name}),(0,Te.jsxs)("div",{className:"dept-code",children:["ID: ",e.code]})]})]}),(0,Te.jsxs)("div",{className:"dept-actions",children:[(0,Te.jsx)("button",{className:"edit-btn",onClick:()=>(e=>{m({name:e.name,code:e.code,color:e.color,password:e.password}),p(e),d(!0)})(e),title:"\uc218\uc815",children:"\u270f\ufe0f"}),(0,Te.jsx)("button",{className:"delete-btn",onClick:()=>(async(e,t)=>{if(window.confirm("\uc815\ub9d0\ub85c ".concat(t," \ubd80\uc11c\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")))try{await a(e),l("\ubd80\uc11c \uc0ad\uc81c","".concat(t," \ubd80\uc11c\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}catch(n){c("\uc0ad\uc81c \uc2e4\ud328",n.message)}})(e.code,e.name),title:"\uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})]})]}),(0,Te.jsx)("div",{className:"dept-card-body",children:(0,Te.jsxs)("div",{className:"dept-credential",children:[(0,Te.jsx)("span",{className:"credential-label",children:"\ub85c\uadf8\uc778 \uc815\ubcf4:"}),(0,Te.jsxs)("span",{className:"credential-value",children:[e.code," / ",e.password]})]})})]},e.code))})]})})})]})}):null},Kt=e=>{let{isOpen:t,onClose:n}=e;const{departments:r}=Ae(),{showSuccess:s}=Ve(),[o,a]=(0,i.useState)({uptime:"0\uc77c 0\uc2dc\uac04 0\ubd84",memory:{used:0,total:0},departments:0,activeUsers:0,lastBackup:"\uc5c6\uc74c",firebaseStatus:"connected",version:"1.0.0"});(0,i.useEffect)(()=>{if(t){const e=Date.now()-24*Math.random()*60*60*1e3,t=Date.now()-e,n=Math.floor(t/864e5),i=Math.floor(t%864e5/36e5),s=Math.floor(t%36e5/6e4);a({uptime:"".concat(n,"\uc77c ").concat(i,"\uc2dc\uac04 ").concat(s,"\ubd84"),memory:{used:Math.floor(512*Math.random()+256),total:1024},departments:r.length,activeUsers:Math.floor(10*Math.random()+1),lastBackup:new Date(Date.now()-60*Math.random()*60*1e3).toLocaleString("ko-KR"),firebaseStatus:"connected",version:"1.0.0"})}},[t,r.length]);return t?(0,Te.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Te.jsxs)("div",{className:"system-status-modal",onClick:e=>e.stopPropagation(),children:[(0,Te.jsxs)("div",{className:"modal-header",children:[(0,Te.jsx)("h2",{className:"modal-title",children:"\ud83d\udcca \uc2dc\uc2a4\ud15c \uc0c1\ud0dc"}),(0,Te.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Te.jsxs)("div",{className:"modal-content",children:[(0,Te.jsxs)("div",{className:"status-section",children:[(0,Te.jsx)("h3",{className:"section-title",children:"\uc2dc\uc2a4\ud15c \uac1c\uc694"}),(0,Te.jsxs)("div",{className:"status-grid",children:[(0,Te.jsxs)("div",{className:"status-card",children:[(0,Te.jsx)("div",{className:"status-icon",children:"\u23f0"}),(0,Te.jsxs)("div",{className:"status-info",children:[(0,Te.jsx)("div",{className:"status-label",children:"\uc2dc\uc2a4\ud15c \uc5c5\ud0c0\uc784"}),(0,Te.jsx)("div",{className:"status-value",children:o.uptime})]})]}),(0,Te.jsxs)("div",{className:"status-card",children:[(0,Te.jsx)("div",{className:"status-icon",children:"\ud83d\udcbe"}),(0,Te.jsxs)("div",{className:"status-info",children:[(0,Te.jsx)("div",{className:"status-label",children:"\uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9"}),(0,Te.jsxs)("div",{className:"status-value",children:[o.memory.used,"MB / ",o.memory.total,"MB"]}),(0,Te.jsx)("div",{className:"memory-bar",children:(0,Te.jsx)("div",{className:"memory-fill",style:{width:"".concat(o.memory.used/o.memory.total*100,"%")}})})]})]}),(0,Te.jsxs)("div",{className:"status-card",children:[(0,Te.jsx)("div",{className:"status-icon",children:"\ud83c\udfe2"}),(0,Te.jsxs)("div",{className:"status-info",children:[(0,Te.jsx)("div",{className:"status-label",children:"\ub4f1\ub85d\ub41c \ubd80\uc11c"}),(0,Te.jsxs)("div",{className:"status-value",children:[o.departments,"\uac1c"]})]})]}),(0,Te.jsxs)("div",{className:"status-card",children:[(0,Te.jsx)("div",{className:"status-icon",children:"\ud83d\udc65"}),(0,Te.jsxs)("div",{className:"status-info",children:[(0,Te.jsx)("div",{className:"status-label",children:"\ud65c\uc131 \uc0ac\uc6a9\uc790"}),(0,Te.jsxs)("div",{className:"status-value",children:[o.activeUsers,"\uba85"]})]})]})]})]}),(0,Te.jsxs)("div",{className:"status-section",children:[(0,Te.jsx)("h3",{className:"section-title",children:"\uc11c\ube44\uc2a4 \uc0c1\ud0dc"}),(0,Te.jsxs)("div",{className:"service-list",children:[(0,Te.jsxs)("div",{className:"service-item",children:[(0,Te.jsx)("div",{className:"service-name",children:"Firebase \uc5f0\uacb0"}),(0,Te.jsxs)("div",{className:"service-status ".concat(o.firebaseStatus),children:[(0,Te.jsx)("span",{className:"status-dot"}),"connected"===o.firebaseStatus?"\uc815\uc0c1":"\uc624\ub958"]})]}),(0,Te.jsxs)("div",{className:"service-item",children:[(0,Te.jsx)("div",{className:"service-name",children:"\ubd80\uc11c \uad00\ub9ac \uc11c\ube44\uc2a4"}),(0,Te.jsxs)("div",{className:"service-status connected",children:[(0,Te.jsx)("span",{className:"status-dot"}),"\uc815\uc0c1"]})]}),(0,Te.jsxs)("div",{className:"service-item",children:[(0,Te.jsx)("div",{className:"service-name",children:"\ud734\uac00 \uad00\ub9ac \uc11c\ube44\uc2a4"}),(0,Te.jsxs)("div",{className:"service-status connected",children:[(0,Te.jsx)("span",{className:"status-dot"}),"\uc815\uc0c1"]})]}),(0,Te.jsxs)("div",{className:"service-item",children:[(0,Te.jsx)("div",{className:"service-name",children:"\uc54c\ub9bc \uc11c\ube44\uc2a4"}),(0,Te.jsxs)("div",{className:"service-status connected",children:[(0,Te.jsx)("span",{className:"status-dot"}),"\uc815\uc0c1"]})]})]})]}),(0,Te.jsxs)("div",{className:"status-section",children:[(0,Te.jsx)("h3",{className:"section-title",children:"\ubc31\uc5c5 \uc815\ubcf4"}),(0,Te.jsxs)("div",{className:"backup-info",children:[(0,Te.jsxs)("div",{className:"backup-item",children:[(0,Te.jsx)("span",{className:"backup-label",children:"\ub9c8\uc9c0\ub9c9 \ubc31\uc5c5:"}),(0,Te.jsx)("span",{className:"backup-value",children:o.lastBackup})]}),(0,Te.jsxs)("div",{className:"backup-item",children:[(0,Te.jsx)("span",{className:"backup-label",children:"\ubc31\uc5c5 \uc0c1\ud0dc:"}),(0,Te.jsx)("span",{className:"backup-value success",children:"\uc815\uc0c1"})]}),(0,Te.jsxs)("div",{className:"backup-item",children:[(0,Te.jsx)("span",{className:"backup-label",children:"\uc2dc\uc2a4\ud15c \ubc84\uc804:"}),(0,Te.jsxs)("span",{className:"backup-value",children:["v",o.version]})]})]})]})]}),(0,Te.jsxs)("div",{className:"modal-footer",children:[(0,Te.jsx)("button",{className:"refresh-button",onClick:()=>{s("\uc2dc\uc2a4\ud15c \uc0c8\ub85c\uace0\uce68","\uc2dc\uc2a4\ud15c \uc0c1\ud0dc\uac00 \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")},children:"\ud83d\udd04 \uc0c8\ub85c\uace0\uce68"}),(0,Te.jsx)("button",{className:"close-modal-button",onClick:n,children:"\ub2eb\uae30"})]})]})}):null},Yt=e=>{let{isOpen:t,onClose:r}=e;const{showSuccess:s,showError:o}=Ve(),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[d,h]=(0,i.useState)(""),[p,f]=(0,i.useState)(!1),[m,g]=(0,i.useState)({sessionTimeout:60,maxLoginAttempts:5,passwordMinLength:8,requireSpecialChars:!0,enableTwoFactor:!1,loginNotifications:!0,auditLog:!0}),v=(e,t)=>{g(n=>(0,Ee.A)((0,Ee.A)({},n),{},{[e]:t})),s("\uc124\uc815 \uc800\uc7a5","".concat(y(e)," \uc124\uc815\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))},y=e=>({sessionTimeout:"\uc138\uc158 \ud0c0\uc784\uc544\uc6c3",maxLoginAttempts:"\ucd5c\ub300 \ub85c\uadf8\uc778 \uc2dc\ub3c4",passwordMinLength:"\ucd5c\uc18c \ube44\ubc00\ubc88\ud638 \uae38\uc774",requireSpecialChars:"\ud2b9\uc218\ubb38\uc790 \ud544\uc218",enableTwoFactor:"2\ub2e8\uacc4 \uc778\uc99d",loginNotifications:"\ub85c\uadf8\uc778 \uc54c\ub9bc",auditLog:"\uac10\uc0ac \ub85c\uadf8"}[e]||e);return t?(0,Te.jsx)("div",{className:"modal-overlay",onClick:r,children:(0,Te.jsxs)("div",{className:"security-settings-modal",onClick:e=>e.stopPropagation(),children:[(0,Te.jsxs)("div",{className:"modal-header",children:[(0,Te.jsx)("h2",{className:"modal-title",children:"\ud83d\udd12 \ubcf4\uc548 \uc124\uc815"}),(0,Te.jsx)("button",{className:"close-button",onClick:r,children:"\xd7"})]}),(0,Te.jsxs)("div",{className:"modal-content",children:[(0,Te.jsxs)("div",{className:"security-section",children:[(0,Te.jsx)("h3",{className:"section-title",children:"\uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"}),(0,Te.jsxs)("form",{className:"password-form",onSubmit:async e=>{if(e.preventDefault(),!a||!c||!d)return void o("\uc785\ub825 \uc624\ub958","\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");const t=localStorage.getItem("adminPassword")||"admin2025!";if(a===t)if(c===d)if(c.length<m.passwordMinLength)o("\ubcf4\uc548 \uc624\ub958","\ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c ".concat(m.passwordMinLength,"\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."));else{f(!0);try{await new Promise(e=>setTimeout(e,1e3)),localStorage.setItem("adminPassword",c);const{database:e,ref:t,set:r}=await Promise.resolve().then(n.bind(n,514));if(e){const n=t(e,"system/adminPassword");await r(n,c)}s("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd","\uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),l(""),u(""),h("")}catch(r){o("\ubcc0\uacbd \uc2e4\ud328","\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{f(!1)}}else o("\uc785\ub825 \uc624\ub958","\uc0c8 \ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");else o("\uc778\uc99d \uc2e4\ud328","\ud604\uc7ac \ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4.")},children:[(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"currentPassword",children:"\ud604\uc7ac \ube44\ubc00\ubc88\ud638"}),(0,Te.jsx)("input",{type:"password",id:"currentPassword",value:a,onChange:e=>l(e.target.value),placeholder:"\ud604\uc7ac \uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638",className:"form-input"})]}),(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"newPassword",children:"\uc0c8 \ube44\ubc00\ubc88\ud638"}),(0,Te.jsx)("input",{type:"password",id:"newPassword",value:c,onChange:e=>u(e.target.value),placeholder:"\uc0c8 \uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638",className:"form-input"})]}),(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"confirmPassword",children:"\uc0c8 \ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,Te.jsx)("input",{type:"password",id:"confirmPassword",value:d,onChange:e=>h(e.target.value),placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638 \ub2e4\uc2dc \uc785\ub825",className:"form-input"})]}),(0,Te.jsx)("button",{type:"submit",className:"change-password-button",disabled:p,children:p?"\ubcc0\uacbd \uc911...":"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"})]})]}),(0,Te.jsxs)("div",{className:"security-section",children:[(0,Te.jsx)("h3",{className:"section-title",children:"\ubcf4\uc548 \uc815\ucc45"}),(0,Te.jsxs)("div",{className:"settings-grid",children:[(0,Te.jsxs)("div",{className:"setting-item",children:[(0,Te.jsxs)("div",{className:"setting-info",children:[(0,Te.jsx)("div",{className:"setting-label",children:"\uc138\uc158 \ud0c0\uc784\uc544\uc6c3 (\ubd84)"}),(0,Te.jsx)("div",{className:"setting-description",children:"\uc0ac\uc6a9\uc790 \uc138\uc158\uc774 \uc790\ub3d9\uc73c\ub85c \ub9cc\ub8cc\ub418\ub294 \uc2dc\uac04\uc785\ub2c8\ub2e4."})]}),(0,Te.jsxs)("select",{value:m.sessionTimeout,onChange:e=>v("sessionTimeout",parseInt(e.target.value)),className:"setting-select",children:[(0,Te.jsx)("option",{value:30,children:"30\ubd84"}),(0,Te.jsx)("option",{value:60,children:"1\uc2dc\uac04"}),(0,Te.jsx)("option",{value:120,children:"2\uc2dc\uac04"}),(0,Te.jsx)("option",{value:240,children:"4\uc2dc\uac04"})]})]}),(0,Te.jsxs)("div",{className:"setting-item",children:[(0,Te.jsxs)("div",{className:"setting-info",children:[(0,Te.jsx)("div",{className:"setting-label",children:"\ucd5c\ub300 \ub85c\uadf8\uc778 \uc2dc\ub3c4 \ud69f\uc218"}),(0,Te.jsx)("div",{className:"setting-description",children:"\ub85c\uadf8\uc778 \uc2e4\ud328 \uc2dc \uacc4\uc815 \uc7a0\uae08\uae4c\uc9c0\uc758 \uc2dc\ub3c4 \ud69f\uc218\uc785\ub2c8\ub2e4."})]}),(0,Te.jsxs)("select",{value:m.maxLoginAttempts,onChange:e=>v("maxLoginAttempts",parseInt(e.target.value)),className:"setting-select",children:[(0,Te.jsx)("option",{value:3,children:"3\ud68c"}),(0,Te.jsx)("option",{value:5,children:"5\ud68c"}),(0,Te.jsx)("option",{value:10,children:"10\ud68c"}),(0,Te.jsx)("option",{value:0,children:"\ubb34\uc81c\ud55c"})]})]}),(0,Te.jsxs)("div",{className:"setting-item",children:[(0,Te.jsxs)("div",{className:"setting-info",children:[(0,Te.jsx)("div",{className:"setting-label",children:"\ucd5c\uc18c \ube44\ubc00\ubc88\ud638 \uae38\uc774"}),(0,Te.jsx)("div",{className:"setting-description",children:"\ubd80\uc11c \ube44\ubc00\ubc88\ud638\uc758 \ucd5c\uc18c \uae00\uc790 \uc218\uc785\ub2c8\ub2e4."})]}),(0,Te.jsxs)("select",{value:m.passwordMinLength,onChange:e=>v("passwordMinLength",parseInt(e.target.value)),className:"setting-select",children:[(0,Te.jsx)("option",{value:6,children:"6\uc790"}),(0,Te.jsx)("option",{value:8,children:"8\uc790"}),(0,Te.jsx)("option",{value:10,children:"10\uc790"}),(0,Te.jsx)("option",{value:12,children:"12\uc790"})]})]})]})]}),(0,Te.jsxs)("div",{className:"security-section",children:[(0,Te.jsx)("h3",{className:"section-title",children:"\uace0\uae09 \ubcf4\uc548 \uc124\uc815"}),(0,Te.jsxs)("div",{className:"toggle-settings",children:[(0,Te.jsxs)("div",{className:"toggle-item",children:[(0,Te.jsxs)("div",{className:"toggle-info",children:[(0,Te.jsx)("div",{className:"toggle-label",children:"\ud2b9\uc218\ubb38\uc790 \ud544\uc218"}),(0,Te.jsx)("div",{className:"toggle-description",children:"\ube44\ubc00\ubc88\ud638\uc5d0 \ud2b9\uc218\ubb38\uc790 \ud3ec\ud568\uc744 \ud544\uc218\ub85c \ud569\ub2c8\ub2e4."})]}),(0,Te.jsxs)("label",{className:"toggle-switch",children:[(0,Te.jsx)("input",{type:"checkbox",checked:m.requireSpecialChars,onChange:e=>v("requireSpecialChars",e.target.checked)}),(0,Te.jsx)("span",{className:"toggle-slider"})]})]}),(0,Te.jsxs)("div",{className:"toggle-item",children:[(0,Te.jsxs)("div",{className:"toggle-info",children:[(0,Te.jsx)("div",{className:"toggle-label",children:"2\ub2e8\uacc4 \uc778\uc99d"}),(0,Te.jsx)("div",{className:"toggle-description",children:"\ucd94\uac00 \ubcf4\uc548\uc744 \uc704\ud55c 2\ub2e8\uacc4 \uc778\uc99d\uc744 \ud65c\uc131\ud654\ud569\ub2c8\ub2e4."})]}),(0,Te.jsxs)("label",{className:"toggle-switch",children:[(0,Te.jsx)("input",{type:"checkbox",checked:m.enableTwoFactor,onChange:e=>v("enableTwoFactor",e.target.checked)}),(0,Te.jsx)("span",{className:"toggle-slider"})]})]}),(0,Te.jsxs)("div",{className:"toggle-item",children:[(0,Te.jsxs)("div",{className:"toggle-info",children:[(0,Te.jsx)("div",{className:"toggle-label",children:"\ub85c\uadf8\uc778 \uc54c\ub9bc"}),(0,Te.jsx)("div",{className:"toggle-description",children:"\uc0c8\ub85c\uc6b4 \ub85c\uadf8\uc778 \uc2dc \uad00\ub9ac\uc790\uc5d0\uac8c \uc54c\ub9bc\uc744 \ubcf4\ub0c5\ub2c8\ub2e4."})]}),(0,Te.jsxs)("label",{className:"toggle-switch",children:[(0,Te.jsx)("input",{type:"checkbox",checked:m.loginNotifications,onChange:e=>v("loginNotifications",e.target.checked)}),(0,Te.jsx)("span",{className:"toggle-slider"})]})]}),(0,Te.jsxs)("div",{className:"toggle-item",children:[(0,Te.jsxs)("div",{className:"toggle-info",children:[(0,Te.jsx)("div",{className:"toggle-label",children:"\uac10\uc0ac \ub85c\uadf8"}),(0,Te.jsx)("div",{className:"toggle-description",children:"\uc2dc\uc2a4\ud15c \uc811\uadfc \ubc0f \ubcc0\uacbd \uc0ac\ud56d\uc744 \ub85c\uadf8\ub85c \uae30\ub85d\ud569\ub2c8\ub2e4."})]}),(0,Te.jsxs)("label",{className:"toggle-switch",children:[(0,Te.jsx)("input",{type:"checkbox",checked:m.auditLog,onChange:e=>v("auditLog",e.target.checked)}),(0,Te.jsx)("span",{className:"toggle-slider"})]})]})]})]})]}),(0,Te.jsx)("div",{className:"modal-footer",children:(0,Te.jsx)("button",{className:"close-modal-button",onClick:r,children:"\ub2eb\uae30"})})]})}):null},Gt=e=>{let{isOpen:t,onClose:n}=e;const{departments:r}=Ae(),{showSuccess:s,showError:o}=Ve(),[a,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)([]),[p,f]=(0,i.useState)(null);(0,i.useEffect)(()=>{if(t){const e=[];for(let t=0;t<10;t++){const n=new Date(Date.now()-24*t*60*60*1e3);e.push({id:"backup_".concat(t),date:n.toISOString(),type:0===t?"auto":Math.random()>.5?"manual":"auto",size:Math.floor(50*Math.random()+10)+"MB",departments:Math.floor(Math.random()*r.length+1),status:Math.random()>.1?"success":"failed",description:0===t?"\ucd5c\uc2e0 \uc790\ub3d9 \ubc31\uc5c5":1===t?"\uc2dc\uc2a4\ud15c \uc5c5\ub370\uc774\ud2b8 \uc804 \ubc31\uc5c5":2===t?"\uc6d4\uac04 \uc815\uae30 \ubc31\uc5c5":"\uc790\ub3d9 \ubc31\uc5c5 #".concat(t)})}h(e)}},[t,r.length]);return t?(0,Te.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Te.jsxs)("div",{className:"backup-manager-modal",onClick:e=>e.stopPropagation(),children:[(0,Te.jsxs)("div",{className:"modal-header",children:[(0,Te.jsx)("h2",{className:"modal-title",children:"\ud83d\udcbe \ubc31\uc5c5 \uad00\ub9ac"}),(0,Te.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Te.jsxs)("div",{className:"modal-content",children:[(0,Te.jsxs)("div",{className:"backup-section",children:[(0,Te.jsx)("h3",{className:"section-title",children:"\uc0c8 \ubc31\uc5c5 \uc0dd\uc131"}),(0,Te.jsxs)("div",{className:"backup-create",children:[(0,Te.jsxs)("div",{className:"backup-info",children:[(0,Te.jsxs)("div",{className:"info-item",children:[(0,Te.jsx)("span",{className:"info-label",children:"\ubc31\uc5c5 \ub300\uc0c1:"}),(0,Te.jsxs)("span",{className:"info-value",children:[r.length,"\uac1c \ubd80\uc11c"]})]}),(0,Te.jsxs)("div",{className:"info-item",children:[(0,Te.jsx)("span",{className:"info-label",children:"\uc608\uc0c1 \uc6a9\ub7c9:"}),(0,Te.jsxs)("span",{className:"info-value",children:["\uc57d ",Math.floor(5*r.length+20),"MB"]})]}),(0,Te.jsxs)("div",{className:"info-item",children:[(0,Te.jsx)("span",{className:"info-label",children:"\ubc31\uc5c5 \ud0c0\uc785:"}),(0,Te.jsx)("span",{className:"info-value",children:"\uc804\uccb4 \uc2dc\uc2a4\ud15c \ubc31\uc5c5"})]})]}),(0,Te.jsx)("button",{className:"create-backup-button",onClick:async()=>{l(!0);try{await new Promise(e=>setTimeout(e,3e3));const e={id:"backup_".concat(Date.now()),date:(new Date).toISOString(),type:"manual",size:Math.floor(50*Math.random()+10)+"MB",departments:r.length,status:"success",description:"\uc218\ub3d9 \ubc31\uc5c5"};h(t=>[e,...t]),s("\ubc31\uc5c5 \uc644\ub8cc","\uc2dc\uc2a4\ud15c \ubc31\uc5c5\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){o("\ubc31\uc5c5 \uc2e4\ud328","\ubc31\uc5c5 \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{l(!1)}},disabled:a,children:a?(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("span",{className:"loading-spinner",children:"\u23f3"}),"\ubc31\uc5c5 \uc0dd\uc131 \uc911..."]}):(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("span",{className:"backup-icon",children:"\ud83d\udcbe"}),"\uc9c0\uae08 \ubc31\uc5c5\ud558\uae30"]})})]})]}),(0,Te.jsxs)("div",{className:"backup-section",children:[(0,Te.jsx)("h3",{className:"section-title",children:"\ubc31\uc5c5 \ud788\uc2a4\ud1a0\ub9ac"}),(0,Te.jsx)("div",{className:"backup-history",children:0===d.length?(0,Te.jsxs)("div",{className:"no-backups",children:[(0,Te.jsx)("div",{className:"no-backup-icon",children:"\ud83d\udce6"}),(0,Te.jsx)("div",{className:"no-backup-text",children:"\uc0dd\uc131\ub41c \ubc31\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"})]}):(0,Te.jsx)("div",{className:"backup-list",children:d.map(e=>{return(0,Te.jsxs)("div",{className:"backup-item",children:[(0,Te.jsxs)("div",{className:"backup-main-info",children:[(0,Te.jsxs)("div",{className:"backup-header",children:[(0,Te.jsxs)("div",{className:"backup-title",children:[(r=e.type,"auto"===r?"\ud83d\udd04":"\ud83d\udc64"),(0,Te.jsx)("span",{className:"backup-name",children:e.description}),(n=e.status,"success"===n?"\u2705":"\u274c")]}),(0,Te.jsx)("div",{className:"backup-date",children:(t=e.date,new Date(t).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}))})]}),(0,Te.jsxs)("div",{className:"backup-details",children:[(0,Te.jsx)("span",{className:"backup-size",children:e.size}),(0,Te.jsxs)("span",{className:"backup-departments",children:[e.departments,"\uac1c \ubd80\uc11c"]}),(0,Te.jsx)("span",{className:"backup-status ".concat(e.status),children:"success"===e.status?"\uc131\uacf5":"\uc2e4\ud328"})]})]}),"success"===e.status&&(0,Te.jsxs)("div",{className:"backup-actions",children:[(0,Te.jsx)("button",{className:"action-button restore-button",onClick:()=>(async e=>{if(window.confirm("".concat(new Date(e.date).toLocaleString("ko-KR")," \ubc31\uc5c5\uc73c\ub85c \ubcf5\uc6d0\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\ud604\uc7ac \ub370\uc774\ud130\ub294 \ubaa8\ub450 \uc0ad\uc81c\ub429\ub2c8\ub2e4."))){u(!0),f(e.id);try{await new Promise(e=>setTimeout(e,5e3)),s("\ubcf5\uc6d0 \uc644\ub8cc","\uc2dc\uc2a4\ud15c\uc774 \uc131\uacf5\uc801\uc73c\ub85c \ubcf5\uc6d0\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(t){o("\ubcf5\uc6d0 \uc2e4\ud328","\ubc31\uc5c5 \ubcf5\uc6d0 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{u(!1),f(null)}}})(e),disabled:c,title:"\ubcf5\uc6d0",children:c&&p===e.id?(0,Te.jsx)("span",{className:"loading-spinner",children:"\u23f3"}):"\ud83d\udd04"}),(0,Te.jsx)("button",{className:"action-button download-button",onClick:()=>{s("\ub2e4\uc6b4\ub85c\ub4dc \uc2dc\uc791","\ubc31\uc5c5 \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc\uac00 \uc2dc\uc791\ub429\ub2c8\ub2e4.")},title:"\ub2e4\uc6b4\ub85c\ub4dc",children:"\ud83d\udce5"}),(0,Te.jsx)("button",{className:"action-button delete-button",onClick:()=>{return t=e.id,void(window.confirm("\uc774 \ubc31\uc5c5\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\uc0ad\uc81c\ub41c \ubc31\uc5c5\uc740 \ubcf5\uad6c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")&&(h(e=>e.filter(e=>e.id!==t)),s("\ubc31\uc5c5 \uc0ad\uc81c","\ubc31\uc5c5\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")));var t},title:"\uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})]})]},e.id);var t,n,r})})})]}),(0,Te.jsxs)("div",{className:"backup-section",children:[(0,Te.jsx)("h3",{className:"section-title",children:"\uc790\ub3d9 \ubc31\uc5c5 \uc124\uc815"}),(0,Te.jsxs)("div",{className:"auto-backup-settings",children:[(0,Te.jsxs)("div",{className:"setting-item",children:[(0,Te.jsxs)("div",{className:"setting-info",children:[(0,Te.jsx)("div",{className:"setting-label",children:"\uc790\ub3d9 \ubc31\uc5c5 \uc8fc\uae30"}),(0,Te.jsx)("div",{className:"setting-description",children:"\uc2dc\uc2a4\ud15c\uc774 \uc790\ub3d9\uc73c\ub85c \ubc31\uc5c5\uc744 \uc0dd\uc131\ud558\ub294 \uc8fc\uae30\uc785\ub2c8\ub2e4."})]}),(0,Te.jsxs)("select",{className:"setting-select",children:[(0,Te.jsx)("option",{value:"daily",children:"\ub9e4\uc77c"}),(0,Te.jsx)("option",{value:"weekly",children:"\ub9e4\uc8fc"}),(0,Te.jsx)("option",{value:"monthly",children:"\ub9e4\uc6d4"}),(0,Te.jsx)("option",{value:"disabled",children:"\ube44\ud65c\uc131\ud654"})]})]}),(0,Te.jsxs)("div",{className:"setting-item",children:[(0,Te.jsxs)("div",{className:"setting-info",children:[(0,Te.jsx)("div",{className:"setting-label",children:"\ubcf4\uad00 \uae30\uac04"}),(0,Te.jsx)("div",{className:"setting-description",children:"\uc790\ub3d9 \uc0dd\uc131\ub41c \ubc31\uc5c5\uc744 \ubcf4\uad00\ud560 \uae30\uac04\uc785\ub2c8\ub2e4."})]}),(0,Te.jsxs)("select",{className:"setting-select",children:[(0,Te.jsx)("option",{value:"7",children:"7\uc77c"}),(0,Te.jsx)("option",{value:"30",children:"30\uc77c"}),(0,Te.jsx)("option",{value:"90",children:"90\uc77c"}),(0,Te.jsx)("option",{value:"365",children:"1\ub144"})]})]})]})]})]}),(0,Te.jsx)("div",{className:"modal-footer",children:(0,Te.jsx)("button",{className:"close-modal-button",onClick:n,children:"\ub2eb\uae30"})})]})}):null},Qt=e=>{let{onLogout:t}=e;const{departments:n}=Ae(),{showSuccess:r}=Ve(),[s,o]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(!1);return(0,Te.jsxs)("div",{className:"admin-dashboard",children:[(0,Te.jsx)("div",{className:"admin-header",children:(0,Te.jsxs)("div",{className:"header-content",children:[(0,Te.jsxs)("div",{className:"admin-info",children:[(0,Te.jsx)("h1",{className:"dashboard-title",children:"\ud83d\udd10 \uc2dc\uc2a4\ud15c \uad00\ub9ac\uc790"}),(0,Te.jsx)("p",{className:"dashboard-subtitle",children:"\ubd80\uc11c/\ud300 \uc0dd\uc131 \ubc0f \uc804\uccb4 \uc2dc\uc2a4\ud15c \uad00\ub9ac"})]}),(0,Te.jsx)("button",{className:"logout-button",onClick:()=>{r("\ub85c\uadf8\uc544\uc6c3","\uad00\ub9ac\uc790 \uc138\uc158\uc774 \uc885\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),t()},children:"\ub85c\uadf8\uc544\uc6c3"})]})}),(0,Te.jsxs)("div",{className:"admin-content",children:[(0,Te.jsxs)("div",{className:"dashboard-grid",children:[(0,Te.jsxs)("div",{className:"admin-card",children:[(0,Te.jsxs)("div",{className:"card-header",children:[(0,Te.jsx)("h3",{className:"card-title",children:"\ud83c\udfe2 \ubd80\uc11c/\ud300 \uad00\ub9ac"}),(0,Te.jsxs)("div",{className:"card-badge",children:[n.length,"\uac1c"]})]}),(0,Te.jsxs)("div",{className:"card-content",children:[(0,Te.jsxs)("p",{className:"card-description",children:["\uc0c8\ub85c\uc6b4 \ubd80\uc11c\ub098 \ud300\uc744 \uc0dd\uc131\ud558\uace0",(0,Te.jsx)("br",{}),"\uae30\uc874 \ubd80\uc11c\uc758 \uc815\ubcf4\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4."]}),(0,Te.jsx)("div",{className:"card-stats",children:(0,Te.jsxs)("div",{className:"stat-item",children:[(0,Te.jsx)("span",{className:"stat-label",children:"\ud65c\uc131 \ubd80\uc11c"}),(0,Te.jsx)("span",{className:"stat-value",children:n.length})]})})]}),(0,Te.jsx)("div",{className:"card-actions",children:(0,Te.jsx)("button",{className:"action-button primary",onClick:()=>o(!0),children:"\ubd80\uc11c \uad00\ub9ac"})})]}),(0,Te.jsxs)("div",{className:"admin-card",children:[(0,Te.jsxs)("div",{className:"card-header",children:[(0,Te.jsx)("h3",{className:"card-title",children:"\ud83d\udcca \uc2dc\uc2a4\ud15c \ud604\ud669"}),(0,Te.jsx)("div",{className:"card-badge status-active",children:"\uc815\uc0c1"})]}),(0,Te.jsxs)("div",{className:"card-content",children:[(0,Te.jsxs)("p",{className:"card-description",children:["\uc804\uccb4 \uc2dc\uc2a4\ud15c\uc758 \uc0c1\ud0dc\uc640",(0,Te.jsx)("br",{}),"\uc8fc\uc694 \uc9c0\ud45c\ub97c \ud655\uc778\ud569\ub2c8\ub2e4."]}),(0,Te.jsx)("div",{className:"card-stats",children:(0,Te.jsxs)("div",{className:"stat-item",children:[(0,Te.jsx)("span",{className:"stat-label",children:"Firebase"}),(0,Te.jsx)("span",{className:"stat-value connected",children:"\uc5f0\uacb0\ub428"})]})})]}),(0,Te.jsx)("div",{className:"card-actions",children:(0,Te.jsx)("button",{className:"action-button secondary",onClick:()=>l(!0),children:"\uc2dc\uc2a4\ud15c \uc0c1\ud0dc"})})]}),(0,Te.jsxs)("div",{className:"admin-card",children:[(0,Te.jsxs)("div",{className:"card-header",children:[(0,Te.jsx)("h3",{className:"card-title",children:"\ud83d\udd12 \ubcf4\uc548 \uc124\uc815"}),(0,Te.jsx)("div",{className:"card-badge secure",children:"\ubcf4\uc548"})]}),(0,Te.jsxs)("div",{className:"card-content",children:[(0,Te.jsxs)("p",{className:"card-description",children:["\uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \ubc0f",(0,Te.jsx)("br",{}),"\ubcf4\uc548 \uc815\ucc45\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."]}),(0,Te.jsx)("div",{className:"card-stats",children:(0,Te.jsxs)("div",{className:"stat-item",children:[(0,Te.jsx)("span",{className:"stat-label",children:"\ubcf4\uc548 \uc218\uc900"}),(0,Te.jsx)("span",{className:"stat-value secure",children:"\ub192\uc74c"})]})})]}),(0,Te.jsx)("div",{className:"card-actions",children:(0,Te.jsx)("button",{className:"action-button warning",onClick:()=>u(!0),children:"\ubcf4\uc548 \uc124\uc815"})})]}),(0,Te.jsxs)("div",{className:"admin-card",children:[(0,Te.jsxs)("div",{className:"card-header",children:[(0,Te.jsx)("h3",{className:"card-title",children:"\ud83d\udcbe \ub370\uc774\ud130 \uad00\ub9ac"}),(0,Te.jsx)("div",{className:"card-badge",children:"\ubc31\uc5c5"})]}),(0,Te.jsxs)("div",{className:"card-content",children:[(0,Te.jsxs)("p",{className:"card-description",children:["\uc804\uccb4 \uc2dc\uc2a4\ud15c \ub370\uc774\ud130\uc758",(0,Te.jsx)("br",{}),"\ubc31\uc5c5 \ubc0f \ubcf5\uc6d0\uc744 \uad00\ub9ac\ud569\ub2c8\ub2e4."]}),(0,Te.jsx)("div",{className:"card-stats",children:(0,Te.jsxs)("div",{className:"stat-item",children:[(0,Te.jsx)("span",{className:"stat-label",children:"\ub9c8\uc9c0\ub9c9 \ubc31\uc5c5"}),(0,Te.jsx)("span",{className:"stat-value",children:"1\uc2dc\uac04 \uc804"})]})})]}),(0,Te.jsx)("div",{className:"card-actions",children:(0,Te.jsx)("button",{className:"action-button secondary",onClick:()=>h(!0),children:"\ubc31\uc5c5 \uad00\ub9ac"})})]})]}),(0,Te.jsxs)("div",{className:"department-preview",children:[(0,Te.jsx)("h3",{className:"preview-title",children:"\ub4f1\ub85d\ub41c \ubd80\uc11c/\ud300"}),(0,Te.jsxs)("div",{className:"department-grid",children:[n.map(e=>(0,Te.jsxs)("div",{className:"department-preview-card",children:[(0,Te.jsxs)("div",{className:"dept-info",children:[(0,Te.jsx)("div",{className:"dept-color",style:{backgroundColor:e.color}}),(0,Te.jsxs)("div",{className:"dept-details",children:[(0,Te.jsx)("div",{className:"dept-name",children:e.name}),(0,Te.jsxs)("div",{className:"dept-code",children:["ID: ",e.code]})]})]}),(0,Te.jsx)("div",{className:"dept-status",children:(0,Te.jsx)("span",{className:"status-badge active",children:"\ud65c\uc131"})})]},e.code)),0===n.length&&(0,Te.jsxs)("div",{className:"no-departments",children:[(0,Te.jsx)("div",{className:"no-dept-icon",children:"\ud83c\udfe2"}),(0,Te.jsx)("div",{className:"no-dept-text",children:"\ub4f1\ub85d\ub41c \ubd80\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,Te.jsx)("button",{className:"create-first-dept",onClick:()=>o(!0),children:"\uccab \ubc88\uc9f8 \ubd80\uc11c \uc0dd\uc131\ud558\uae30"})]})]})]})]}),(0,Te.jsx)(qt,{isOpen:s,onClose:()=>o(!1)}),(0,Te.jsx)(Kt,{isOpen:a,onClose:()=>l(!1)}),(0,Te.jsx)(Yt,{isOpen:c,onClose:()=>u(!1)}),(0,Te.jsx)(Gt,{isOpen:d,onClose:()=>h(!1)})]})},$t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Jt(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Xt={date:Jt({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Jt({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Jt({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Zt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function en(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function tn(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const o=s[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(a,e=>e.test(o)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(a,e=>e.test(o));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(o.length)}}}function nn(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;return{value:o,rest:t.slice(i.length)}}}const rn={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=$t[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Xt,formatRelative:(e,t,n,r)=>Zt[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:en({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:en({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:en({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:en({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:en({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:nn({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:tn({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:tn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:tn({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:tn({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:tn({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let sn={};function on(){return sn}Math.pow(10,8);const an=6048e5;function ln(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function cn(e){const t=ln(e);return t.setHours(0,0,0,0),t}function un(e){const t=ln(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function dn(e,t){const n=cn(e),r=cn(t),i=+n-un(n),s=+r-un(r);return Math.round((i-s)/864e5)}function hn(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function pn(e){const t=ln(e),n=hn(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function fn(e){const t=ln(e);return dn(t,pn(t))+1}function mn(e,t){var n,r,i,s,o,a;const l=on(),c=null!==(n=null!==(r=null!==(i=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==i?i:l.weekStartsOn)&&void 0!==r?r:null===(a=l.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==n?n:0,u=ln(e),d=u.getDay(),h=(d<c?7:0)+d-c;return u.setDate(u.getDate()-h),u.setHours(0,0,0,0),u}function gn(e){return mn(e,{weekStartsOn:1})}function vn(e){const t=ln(e),n=t.getFullYear(),r=hn(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=gn(r),s=hn(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=gn(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function yn(e){const t=vn(e),n=hn(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),gn(n)}function bn(e){const t=ln(e),n=+gn(t)-+yn(t);return Math.round(n/an)+1}function _n(e,t){var n,r,i,s,o,a;const l=ln(e),c=l.getFullYear(),u=on(),d=null!==(n=null!==(r=null!==(i=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(a=u.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==n?n:1,h=hn(e,0);h.setFullYear(c+1,0,d),h.setHours(0,0,0,0);const p=mn(h,t),f=hn(e,0);f.setFullYear(c,0,d),f.setHours(0,0,0,0);const m=mn(f,t);return l.getTime()>=p.getTime()?c+1:l.getTime()>=m.getTime()?c:c-1}function wn(e,t){var n,r,i,s,o,a;const l=on(),c=null!==(n=null!==(r=null!==(i=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==i?i:l.firstWeekContainsDate)&&void 0!==r?r:null===(a=l.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==n?n:1,u=_n(e,t),d=hn(e,0);d.setFullYear(u,0,c),d.setHours(0,0,0,0);return mn(d,t)}function xn(e,t){const n=ln(e),r=+mn(n,t)-+wn(n,t);return Math.round(r/an)+1}function Cn(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const kn={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Cn("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Cn(n+1,2)},d:(e,t)=>Cn(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Cn(e.getHours()%12||12,t.length),H:(e,t)=>Cn(e.getHours(),t.length),m:(e,t)=>Cn(e.getMinutes(),t.length),s:(e,t)=>Cn(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return Cn(Math.trunc(r*Math.pow(10,n-3)),t.length)}},En="midnight",Sn="noon",Nn="morning",Tn="afternoon",In="evening",Pn="night",An={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return kn.y(e,t)},Y:function(e,t,n,r){const i=_n(e,r),s=i>0?i:1-i;if("YY"===t){return Cn(s%100,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):Cn(s,t.length)},R:function(e,t){return Cn(vn(e),t.length)},u:function(e,t){return Cn(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Cn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Cn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return kn.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Cn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=xn(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Cn(i,t.length)},I:function(e,t,n){const r=bn(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Cn(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):kn.d(e,t)},D:function(e,t,n){const r=fn(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Cn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Cn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Cn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return Cn(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?Sn:0===r?En:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?In:r>=12?Tn:r>=4?Nn:Pn,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return kn.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):kn.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Cn(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Cn(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):kn.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):kn.s(e,t)},S:function(e,t){return kn.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return jn(r);case"XXXX":case"XX":return Rn(r);default:return Rn(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return jn(r);case"xxxx":case"xx":return Rn(r);default:return Rn(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Dn(r,":");default:return"GMT"+Rn(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Dn(r,":");default:return"GMT"+Rn(r,":")}},t:function(e,t,n){return Cn(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return Cn(e.getTime(),t.length)}};function Dn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return 0===s?n+String(i):n+String(i)+t+Cn(s,2)}function jn(e,t){if(e%60===0){return(e>0?"-":"+")+Cn(Math.abs(e)/60,2)}return Rn(e,t)}function Rn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+Cn(Math.trunc(r/60),2)+t+Cn(r%60,2)}const Mn=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},On=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Ln={p:On,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Mn(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",Mn(r,t)).replace("{{time}}",On(i,t))}},Fn=/^D+$/,Vn=/^Y+$/,Un=["D","DD","YY","YYYY"];function Bn(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function zn(e){if(!Bn(e)&&"number"!==typeof e)return!1;const t=ln(e);return!isNaN(Number(t))}const Wn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qn=/^'([^]*?)'?$/,Kn=/''/g,Yn=/[a-zA-Z]/;function Gn(e,t,n){var r,i,s,o,a,l,c,u,d,h,p,f,m,g;const v=on(),y=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:v.locale)&&void 0!==r?r:rn,b=null!==(s=null!==(o=null!==(a=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:v.firstWeekContainsDate)&&void 0!==o?o:null===(u=v.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==s?s:1,_=null!==(d=null!==(h=null!==(p=null!==(f=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==f?f:null===n||void 0===n||null===(m=n.locale)||void 0===m||null===(m=m.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==p?p:v.weekStartsOn)&&void 0!==h?h:null===(g=v.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==d?d:0,w=ln(e);if(!zn(w))throw new RangeError("Invalid time value");let x=t.match(Hn).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,Ln[t])(e,y.formatLong)}return e}).join("").match(Wn).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Qn(e)};if(An[t])return{isToken:!0,value:e};if(t.match(Yn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});y.localize.preprocessor&&(x=y.localize.preprocessor(w,x));const C={firstWeekContainsDate:b,weekStartsOn:_,locale:y};return x.map(r=>{if(!r.isToken)return r.value;const i=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return Vn.test(e)}(i))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return Fn.test(e)}(i))||function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),Un.includes(e))throw new RangeError(r)}(i,t,String(e));return(0,An[i[0]])(w,i,y.localize,C)}).join("")}function Qn(e){const t=e.match(qn);return t?t[1].replace(Kn,"'"):e}function $n(e){const t=ln(e).getDay();return 0===t||6===t}const Jn={lessThanXSeconds:{one:"1\ucd08 \ubbf8\ub9cc",other:"{{count}}\ucd08 \ubbf8\ub9cc"},xSeconds:{one:"1\ucd08",other:"{{count}}\ucd08"},halfAMinute:"30\ucd08",lessThanXMinutes:{one:"1\ubd84 \ubbf8\ub9cc",other:"{{count}}\ubd84 \ubbf8\ub9cc"},xMinutes:{one:"1\ubd84",other:"{{count}}\ubd84"},aboutXHours:{one:"\uc57d 1\uc2dc\uac04",other:"\uc57d {{count}}\uc2dc\uac04"},xHours:{one:"1\uc2dc\uac04",other:"{{count}}\uc2dc\uac04"},xDays:{one:"1\uc77c",other:"{{count}}\uc77c"},aboutXWeeks:{one:"\uc57d 1\uc8fc",other:"\uc57d {{count}}\uc8fc"},xWeeks:{one:"1\uc8fc",other:"{{count}}\uc8fc"},aboutXMonths:{one:"\uc57d 1\uac1c\uc6d4",other:"\uc57d {{count}}\uac1c\uc6d4"},xMonths:{one:"1\uac1c\uc6d4",other:"{{count}}\uac1c\uc6d4"},aboutXYears:{one:"\uc57d 1\ub144",other:"\uc57d {{count}}\ub144"},xYears:{one:"1\ub144",other:"{{count}}\ub144"},overXYears:{one:"1\ub144 \uc774\uc0c1",other:"{{count}}\ub144 \uc774\uc0c1"},almostXYears:{one:"\uac70\uc758 1\ub144",other:"\uac70\uc758 {{count}}\ub144"}},Xn={date:Jt({formats:{full:"y\ub144 M\uc6d4 d\uc77c EEEE",long:"y\ub144 M\uc6d4 d\uc77c",medium:"y.MM.dd",short:"y.MM.dd"},defaultWidth:"full"}),time:Jt({formats:{full:"a H\uc2dc mm\ubd84 ss\ucd08 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:Jt({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},Zn={lastWeek:"'\uc9c0\ub09c' eeee p",yesterday:"'\uc5b4\uc81c' p",today:"'\uc624\ub298' p",tomorrow:"'\ub0b4\uc77c' p",nextWeek:"'\ub2e4\uc74c' eeee p",other:"P"},er={code:"ko",formatDistance:(e,t,n)=>{let r;const i=Jn[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?r+" \ud6c4":r+" \uc804":r},formatLong:Xn,formatRelative:(e,t,n,r)=>Zn[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e);switch(String(null===t||void 0===t?void 0:t.unit)){case"minute":case"second":return String(n);case"date":return n+"\uc77c";default:return n+"\ubc88\uc9f8"}},era:en({values:{narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["\uae30\uc6d0\uc804","\uc11c\uae30"]},defaultWidth:"wide"}),quarter:en({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1\ubd84\uae30","2\ubd84\uae30","3\ubd84\uae30","4\ubd84\uae30"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:en({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"],wide:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"]},defaultWidth:"wide"}),day:en({values:{narrow:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],short:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],abbreviated:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],wide:["\uc77c\uc694\uc77c","\uc6d4\uc694\uc77c","\ud654\uc694\uc77c","\uc218\uc694\uc77c","\ubaa9\uc694\uc77c","\uae08\uc694\uc77c","\ud1a0\uc694\uc77c"]},defaultWidth:"wide"}),dayPeriod:en({values:{narrow:{am:"\uc624\uc804",pm:"\uc624\ud6c4",midnight:"\uc790\uc815",noon:"\uc815\uc624",morning:"\uc544\uce68",afternoon:"\uc624\ud6c4",evening:"\uc800\ub141",night:"\ubc24"},abbreviated:{am:"\uc624\uc804",pm:"\uc624\ud6c4",midnight:"\uc790\uc815",noon:"\uc815\uc624",morning:"\uc544\uce68",afternoon:"\uc624\ud6c4",evening:"\uc800\ub141",night:"\ubc24"},wide:{am:"\uc624\uc804",pm:"\uc624\ud6c4",midnight:"\uc790\uc815",noon:"\uc815\uc624",morning:"\uc544\uce68",afternoon:"\uc624\ud6c4",evening:"\uc800\ub141",night:"\ubc24"}},defaultWidth:"wide",formattingValues:{narrow:{am:"\uc624\uc804",pm:"\uc624\ud6c4",midnight:"\uc790\uc815",noon:"\uc815\uc624",morning:"\uc544\uce68",afternoon:"\uc624\ud6c4",evening:"\uc800\ub141",night:"\ubc24"},abbreviated:{am:"\uc624\uc804",pm:"\uc624\ud6c4",midnight:"\uc790\uc815",noon:"\uc815\uc624",morning:"\uc544\uce68",afternoon:"\uc624\ud6c4",evening:"\uc800\ub141",night:"\ubc24"},wide:{am:"\uc624\uc804",pm:"\uc624\ud6c4",midnight:"\uc790\uc815",noon:"\uc815\uc624",morning:"\uc544\uce68",afternoon:"\uc624\ud6c4",evening:"\uc800\ub141",night:"\ubc24"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:nn({matchPattern:/^(\d+)(\uc77c|\ubc88\uc9f8)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:tn({matchPatterns:{narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(\uae30\uc6d0\uc804|\uc11c\uae30)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^(bc|\uae30\uc6d0\uc804)/i,/^(ad|\uc11c\uae30)/i]},defaultParseWidth:"any"}),quarter:tn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]\uc0ac?\ubd84\uae30/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:tn({matchPatterns:{narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])\uc6d4/i,wide:/^(1[012]|[123456789])\uc6d4/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1\uc6d4?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:tn({matchPatterns:{narrow:/^[\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0]/,short:/^[\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0]/,abbreviated:/^[\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0]/,wide:/^[\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0]\uc694\uc77c/},defaultMatchWidth:"wide",parsePatterns:{any:[/^\uc77c/,/^\uc6d4/,/^\ud654/,/^\uc218/,/^\ubaa9/,/^\uae08/,/^\ud1a0/]},defaultParseWidth:"any"}),dayPeriod:tn({matchPatterns:{any:/^(am|pm|\uc624\uc804|\uc624\ud6c4|\uc790\uc815|\uc815\uc624|\uc544\uce68|\uc800\ub141|\ubc24)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(am|\uc624\uc804)/i,pm:/^(pm|\uc624\ud6c4)/i,midnight:/^\uc790\uc815/i,noon:/^\uc815\uc624/i,morning:/^\uc544\uce68/i,afternoon:/^\uc624\ud6c4/i,evening:/^\uc800\ub141/i,night:/^\ubc24/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},tr=e=>e?("string"===typeof e&&(e=new Date(e)),isNaN(e.getTime())?(console.warn("formatDateToKorean: Invalid date provided",e),""):Gn(e,"yyyy\ub144 M\uc6d4 d\uc77c",{locale:er})):"",nr=e=>("string"===typeof e&&(e=new Date(e)),$n(e)),rr=e=>["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"][e]||"",ir=e=>{let{isOpen:t,onClose:n}=e;const{currentDepartment:r,logout:s,updateDepartmentPassword:o}=Ae(),[a,l]=(0,i.useState)("info"),[c,u]=(0,i.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[d,h]=(0,i.useState)(!1),[p,f]=(0,i.useState)("");return t?(0,Te.jsx)("div",{className:"account-modal-overlay",onClick:n,children:(0,Te.jsxs)("div",{className:"account-modal",onClick:e=>e.stopPropagation(),children:[(0,Te.jsxs)("div",{className:"account-modal-header",children:[(0,Te.jsx)("h2",{children:"\uacc4\uc815 \uad00\ub9ac"}),(0,Te.jsx)("button",{className:"account-modal-close",onClick:n,children:"\u2715"})]}),(0,Te.jsxs)("div",{className:"account-modal-tabs",children:[(0,Te.jsx)("button",{className:"account-tab ".concat("info"===a?"active":""),onClick:()=>l("info"),children:"\uacc4\uc815 \uc815\ubcf4"}),(0,Te.jsx)("button",{className:"account-tab ".concat("password"===a?"active":""),onClick:()=>l("password"),children:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"})]}),(0,Te.jsxs)("div",{className:"account-modal-content",children:["info"===a&&(0,Te.jsxs)("div",{className:"account-info-tab",children:[(0,Te.jsxs)("div",{className:"account-info-section",children:[(0,Te.jsx)("h3",{children:"\ubd80\uc11c \uc815\ubcf4"}),(0,Te.jsxs)("div",{className:"account-info-item",children:[(0,Te.jsx)("label",{children:"\ubd80\uc11c\uba85"}),(0,Te.jsx)("div",{className:"account-info-value",children:(null===r||void 0===r?void 0:r.name)||"\uc54c \uc218 \uc5c6\uc74c"})]}),(0,Te.jsxs)("div",{className:"account-info-item",children:[(0,Te.jsx)("label",{children:"\ubd80\uc11c \ucf54\ub4dc"}),(0,Te.jsx)("div",{className:"account-info-value",children:(null===r||void 0===r?void 0:r.code)||"\uc54c \uc218 \uc5c6\uc74c"})]}),(0,Te.jsxs)("div",{className:"account-info-item",children:[(0,Te.jsx)("label",{children:"\ub85c\uadf8\uc778 \uc2dc\uac04"}),(0,Te.jsx)("div",{className:"account-info-value",children:(new Date).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]})]}),(0,Te.jsxs)("div",{className:"account-info-section",children:[(0,Te.jsx)("h3",{children:"\uc2dc\uc2a4\ud15c \uc815\ubcf4"}),(0,Te.jsxs)("div",{className:"account-info-item",children:[(0,Te.jsx)("label",{children:"\uc571 \ubc84\uc804"}),(0,Te.jsx)("div",{className:"account-info-value",children:"v1.0.0"})]}),(0,Te.jsxs)("div",{className:"account-info-item",children:[(0,Te.jsx)("label",{children:"\ucd5c\uadfc \uc5c5\ub370\uc774\ud2b8"}),(0,Te.jsx)("div",{className:"account-info-value",children:"2025\ub144 7\uc6d4"})]})]}),(0,Te.jsx)("div",{className:"account-actions",children:(0,Te.jsx)("button",{className:"account-logout-btn",onClick:()=>{s(),n()},children:"\ub85c\uadf8\uc544\uc6c3"})})]}),"password"===a&&(0,Te.jsxs)("div",{className:"account-password-tab",children:[(0,Te.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h(!0),f(""),c.newPassword!==c.confirmPassword)return f("\uc0c8 \ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),void h(!1);if(c.newPassword.length<4)return f("\ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 4\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."),void h(!1);try{const e=localStorage.getItem("dept_".concat(null===r||void 0===r?void 0:r.code,"_password"));if(e&&e!==c.currentPassword)return f("\ud604\uc7ac \ube44\ubc00\ubc88\ud638\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),void h(!1);try{await o(null===r||void 0===r?void 0:r.code,c.newPassword),f("\ube44\ubc00\ubc88\ud638\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(t){f("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),console.error("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc2e4\ud328:",t)}u({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{f("")},3e3)}catch(t){f("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}h(!1)},children:[(0,Te.jsxs)("div",{className:"password-form-group",children:[(0,Te.jsx)("label",{htmlFor:"currentPassword",children:"\ud604\uc7ac \ube44\ubc00\ubc88\ud638"}),(0,Te.jsx)("input",{type:"password",id:"currentPassword",value:c.currentPassword,onChange:e=>u(t=>(0,Ee.A)((0,Ee.A)({},t),{},{currentPassword:e.target.value})),required:!0,placeholder:"\ud604\uc7ac \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694"})]}),(0,Te.jsxs)("div",{className:"password-form-group",children:[(0,Te.jsx)("label",{htmlFor:"newPassword",children:"\uc0c8 \ube44\ubc00\ubc88\ud638"}),(0,Te.jsx)("input",{type:"password",id:"newPassword",value:c.newPassword,onChange:e=>u(t=>(0,Ee.A)((0,Ee.A)({},t),{},{newPassword:e.target.value})),required:!0,placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694 (\ucd5c\uc18c 4\uc790)",minLength:"4"})]}),(0,Te.jsxs)("div",{className:"password-form-group",children:[(0,Te.jsx)("label",{htmlFor:"confirmPassword",children:"\uc0c8 \ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,Te.jsx)("input",{type:"password",id:"confirmPassword",value:c.confirmPassword,onChange:e=>u(t=>(0,Ee.A)((0,Ee.A)({},t),{},{confirmPassword:e.target.value})),required:!0,placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638\ub97c \ub2e4\uc2dc \uc785\ub825\ud558\uc138\uc694",minLength:"4"})]}),p&&(0,Te.jsx)("div",{className:"password-message ".concat(p.includes("\uc131\uacf5")?"success":"error"),children:p}),(0,Te.jsx)("div",{className:"password-form-actions",children:(0,Te.jsx)("button",{type:"submit",className:"password-change-btn",disabled:d,children:d?"\ubcc0\uacbd \uc911...":"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"})})]}),(0,Te.jsxs)("div",{className:"password-tips",children:[(0,Te.jsx)("h4",{children:"\ube44\ubc00\ubc88\ud638 \uc548\uc804 \uc218\uce59"}),(0,Te.jsxs)("ul",{children:[(0,Te.jsx)("li",{children:"\ucd5c\uc18c 4\uc790 \uc774\uc0c1\uc758 \ube44\ubc00\ubc88\ud638\ub97c \uc0ac\uc6a9\ud558\uc138\uc694"}),(0,Te.jsx)("li",{children:"\ub2e4\ub978 \uc0ac\ub78c\uacfc \ube44\ubc00\ubc88\ud638\ub97c \uacf5\uc720\ud558\uc9c0 \ub9c8\uc138\uc694"}),(0,Te.jsx)("li",{children:"\uc815\uae30\uc801\uc73c\ub85c \ube44\ubc00\ubc88\ud638\ub97c \ubcc0\uacbd\ud558\uc138\uc694"}),(0,Te.jsx)("li",{children:"\ucd94\uce21\ud558\uae30 \uc5b4\ub824\uc6b4 \ube44\ubc00\ubc88\ud638\ub97c \uc0ac\uc6a9\ud558\uc138\uc694"})]})]})]})]})]})}):null},sr=e=>{let{user:t,onLogout:n}=e;const{state:r,actions:s}=Vt(),{theme:o,toggleTheme:a,getThemeIcon:l,getThemeLabel:c,setSpecificTheme:u}=Bt(),{currentDepartment:d,logout:h}=Ae(),{selectedYear:p,selectedMonth:f}=r,[m,g]=(0,i.useState)(!1),[v,y]=(0,i.useState)(!1),[b,_]=(0,i.useState)(!1),[w,x]=(0,i.useState)(!1),[C,k]=(0,i.useState)(!1);(0,i.useEffect)(()=>{const e=()=>{k(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const E=(0,i.useCallback)(()=>{0===f?s.setSelectedDate(p-1,11):s.setSelectedDate(p,f-1)},[p,f,s]),S=(0,i.useCallback)(()=>{11===f?s.setSelectedDate(p+1,0):s.setSelectedDate(p,f+1)},[p,f,s]),N=(0,i.useCallback)(()=>{const e=new Date;s.setSelectedDate(e.getFullYear(),e.getMonth())},[s]),T=(0,i.useCallback)(e=>{const t=parseInt(e.target.value);s.setSelectedDate(t,f)},[f,s]),I=(0,i.useCallback)(e=>{const t=parseInt(e.target.value);s.setSelectedDate(p,t)},[p,s]),P=(0,i.useMemo)(()=>(new Date).getFullYear(),[]),A=(0,i.useMemo)(()=>Array.from({length:10},(e,t)=>P-5+t),[P]),D=(0,i.useMemo)(()=>Array.from({length:12},(e,t)=>t),[]);return(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsxs)("header",{className:"modern-header",children:[C&&(0,Te.jsxs)("div",{className:"mobile-header",children:[(0,Te.jsx)("button",{className:"burger-menu-btn",onClick:()=>_(!0),"aria-label":"\uba54\ub274 \uc5f4\uae30",children:(0,Te.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M3 12h18M3 6h18M3 18h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),(0,Te.jsxs)("div",{className:"mobile-nav-container",children:[(0,Te.jsx)("button",{className:"nav-btn",onClick:E,children:(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,Te.jsxs)("div",{className:"mobile-date-display",onClick:()=>x(!w),children:[(0,Te.jsxs)("span",{className:"date-text",children:[p,"\ub144 ",rr(f)]}),(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"dropdown-icon",children:(0,Te.jsx)("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),(0,Te.jsx)("button",{className:"nav-btn",onClick:S,children:(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M9 18l6-6-6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,Te.jsx)("button",{className:"account-btn",onClick:()=>y(!0),"aria-label":"\uacc4\uc815 \uad00\ub9ac",children:(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),C&&w&&(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("div",{className:"date-picker-backdrop",onClick:()=>x(!1)}),(0,Te.jsx)("div",{className:"date-picker-dropdown",children:(0,Te.jsxs)("div",{className:"date-picker-content",children:[(0,Te.jsxs)("div",{className:"date-picker-selects",children:[(0,Te.jsx)("select",{value:p,onChange:T,className:"year-select",children:A.map(e=>(0,Te.jsxs)("option",{value:e,children:[e,"\ub144"]},e))}),(0,Te.jsx)("select",{value:f,onChange:I,className:"month-select",children:D.map(e=>(0,Te.jsx)("option",{value:e,children:rr(e)},e))})]}),(0,Te.jsxs)("div",{className:"date-picker-actions",children:[(0,Te.jsx)("button",{onClick:N,className:"today-btn",children:"\uc624\ub298"}),(0,Te.jsx)("button",{onClick:()=>x(!1),className:"confirm-btn",children:"\ud655\uc778"})]})]})})]}),!C&&(0,Te.jsxs)("div",{className:"desktop-header",children:[(0,Te.jsx)("div",{className:"header-left",children:(0,Te.jsxs)("div",{className:"logo-container",children:[(0,Te.jsx)("div",{className:"logo-icon",children:(0,Te.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,Te.jsx)("path",{d:"M8 2v3M16 2v3M3 10h18M5 4h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V6a2 2 0 012-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,Te.jsx)("path",{d:"M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01M16 18h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,Te.jsxs)("div",{className:"title-section",children:[(0,Te.jsx)("h1",{className:"main-title",children:"\ud734\uac00\uad00\ub9ac\uc2dc\uc2a4\ud15c"}),(0,Te.jsx)("p",{className:"department-name",style:{color:(null===d||void 0===d?void 0:d.color)||"#666"},children:(null===d||void 0===d?void 0:d.name)||"\ubd80\uc11c \ubbf8\uc120\ud0dd"})]})]})}),(0,Te.jsx)("div",{className:"header-center",children:(0,Te.jsxs)("div",{className:"date-navigation",children:[(0,Te.jsx)("button",{className:"nav-button",onClick:E,children:(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,Te.jsxs)("div",{className:"date-selectors",children:[(0,Te.jsx)("select",{className:"year-selector",value:p,onChange:T,children:A.map(e=>(0,Te.jsxs)("option",{value:e,children:[e,"\ub144"]},e))}),(0,Te.jsx)("select",{className:"month-selector",value:f,onChange:I,children:D.map(e=>(0,Te.jsx)("option",{value:e,children:rr(e)},e))})]}),(0,Te.jsx)("button",{className:"nav-button",onClick:S,children:(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M9 18l6-6-6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}),(0,Te.jsxs)("div",{className:"header-right",children:[(0,Te.jsxs)("div",{className:"action-buttons",children:[(0,Te.jsxs)("button",{className:"action-button",onClick:()=>s.setModal("batchInput"),title:"\ud14d\uc2a4\ud2b8 \uc77c\uad04 \uc785\ub825",children:[(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M12 5v14M5 12h14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),(0,Te.jsx)("span",{children:"\uc77c\uad04\uc785\ub825"})]}),(0,Te.jsxs)("button",{className:"action-button",onClick:()=>s.setModal("employeeManager"),title:"\uc9c1\uc6d0 \ubc0f \ubd80\uc11c \uad00\ub9ac",children:[(0,Te.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[(0,Te.jsx)("path",{d:"M12 14l9-5-9-5-9 5 9 5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Te.jsx)("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,Te.jsx)("span",{children:"\ubd80\uc11c\uad00\ub9ac"})]}),(0,Te.jsx)("button",{className:"action-button",onClick:N,title:"\uc624\ub298\ub85c \uc774\ub3d9",children:(0,Te.jsx)("span",{children:"\uc624\ub298"})})]}),(0,Te.jsx)("div",{className:"theme-toggle header-theme-toggle",children:(0,Te.jsx)("button",{className:"theme-button header-theme-button",onClick:a,title:"\ud604\uc7ac: ".concat("light"===o?"\ub77c\uc774\ud2b8 \ubaa8\ub4dc":"dark"===o?"\ub2e4\ud06c \ubaa8\ub4dc":"\uc2dc\uc2a4\ud15c \uc124\uc815"),"aria-label":"\ud14c\ub9c8 \ubcc0\uacbd",children:(0,Te.jsx)("span",{className:"theme-icon",children:"light"===o?"Light":"dark"===o?"Dark":"Auto"})})}),(0,Te.jsxs)("div",{className:"user-section",children:[(0,Te.jsx)("button",{className:"user-avatar",onClick:()=>y(!0),title:"\uacc4\uc815 \uad00\ub9ac",children:(0,Te.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),(0,Te.jsxs)("button",{className:"logout-button",onClick:()=>{h(),n&&n()},title:"\ub85c\uadf8\uc544\uc6c3",children:[(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),(0,Te.jsx)("span",{children:"\ub85c\uadf8\uc544\uc6c3"})]})]})]})]})]}),C&&b&&(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("div",{className:"sidebar-backdrop",onClick:()=>_(!1)}),(0,Te.jsxs)("div",{className:"mobile-sidebar",children:[(0,Te.jsxs)("div",{className:"sidebar-header",children:[(0,Te.jsxs)("div",{className:"sidebar-title",children:[(0,Te.jsx)("div",{className:"logo-icon",children:(0,Te.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,Te.jsx)("path",{d:"M8 2v3M16 2v3M3 10h18M5 4h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V6a2 2 0 012-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,Te.jsx)("path",{d:"M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01M16 18h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,Te.jsxs)("div",{children:[(0,Te.jsx)("h2",{children:"\ud734\uac00\uad00\ub9ac\uc2dc\uc2a4\ud15c"}),(0,Te.jsx)("p",{style:{color:(null===d||void 0===d?void 0:d.color)||"#666"},children:(null===d||void 0===d?void 0:d.name)||"\ubd80\uc11c \ubbf8\uc120\ud0dd"})]})]}),(0,Te.jsx)("button",{className:"sidebar-close",onClick:()=>_(!1),"aria-label":"\uba54\ub274 \ub2eb\uae30",children:(0,Te.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,Te.jsx)("div",{className:"sidebar-content",children:(0,Te.jsxs)("div",{className:"sidebar-menu",children:[(0,Te.jsxs)("button",{className:"sidebar-menu-item",onClick:()=>{s.setModal("batchInput"),_(!1)},children:[(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M12 5v14M5 12h14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),(0,Te.jsx)("span",{children:"\uc77c\uad04 \uc785\ub825"})]}),(0,Te.jsxs)("button",{className:"sidebar-menu-item",onClick:()=>{s.setModal("employeeManager"),_(!1)},children:[(0,Te.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,Te.jsx)("path",{d:"M12 14l9-5-9-5-9 5 9 5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Te.jsx)("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,Te.jsx)("span",{children:"\ubd80\uc11c \uad00\ub9ac"})]}),(0,Te.jsxs)("button",{className:"sidebar-menu-item",onClick:()=>{s.toggleMobileFilter(),_(!1)},children:[(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,Te.jsx)("span",{children:"\ud544\ud130"})]}),(0,Te.jsxs)("button",{className:"sidebar-menu-item",onClick:()=>{a(),_(!1)},children:[(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,Te.jsx)("span",{children:"light"===o?"\ub77c\uc774\ud2b8 \ubaa8\ub4dc":"dark"===o?"\ub2e4\ud06c \ubaa8\ub4dc":"\uc790\ub3d9 \ubaa8\ub4dc"})]}),(0,Te.jsx)("div",{className:"sidebar-divider"}),(0,Te.jsxs)("button",{className:"sidebar-menu-item logout",onClick:()=>{h(),n&&n(),_(!1)},children:[(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),(0,Te.jsx)("span",{children:"\ub85c\uadf8\uc544\uc6c3"})]})]})})]})]}),(0,Te.jsx)(ir,{isOpen:v,onClose:()=>y(!1)})]})},or=e=>{let{consecutiveGroup:t,selectedEmployee:n,formData:r,setFormData:s,formatDateToKorean:o}=e;const[a,l]=(0,i.useState)(r.date||""),c=(()=>{const e=[],n=new Date(t.startDate),r=new Date(t.endDate);for(let t=new Date(n);t<=r;t.setDate(t.getDate()+1)){const n=t.toISOString().split("T")[0];e.push({date:n,formatted:o(n)})}return e})();i.useEffect(()=>{if(!a||!c.some(e=>e.date===a)){var e;const t=null===(e=c[0])||void 0===e?void 0:e.date;t&&(l(t),s(e=>(0,Ee.A)((0,Ee.A)({},e),{},{date:t})))}},[c,a,s]);return(0,Te.jsxs)("div",{className:"edit-context-info",children:[(0,Te.jsxs)("div",{className:"context-header",children:[(0,Te.jsx)("h4",{children:"\uc5f0\ud734 \uae30\uac04 - \uc218\uc815\ud560 \ub0a0\uc9dc \uc120\ud0dd"}),(0,Te.jsxs)("p",{className:"context-subtitle",children:[null===n||void 0===n?void 0:n.name,"\ub2d8\uc758 \uc5f0\ud734 (",o(t.startDate)," ~ ",o(t.endDate),")"]})]}),(0,Te.jsx)("div",{className:"consecutive-date-selector",children:c.map(e=>{let{date:n,formatted:r}=e;return(0,Te.jsxs)("label",{className:"date-option ".concat(a===n?"selected":""),children:[(0,Te.jsx)("input",{type:"radio",name:"consecutiveDate",value:n,checked:a===n,onChange:()=>(e=>{l(e);const n=t.vacations.find(t=>t.date===e);n?(console.log("[VacationModal] \ud83c\udfaf \uc120\ud0dd\ub41c \ub0a0\uc9dc\uc758 \ud734\uac00 \uc815\ubcf4:",{id:n.id,date:n.date,type:n.type}),s(t=>(0,Ee.A)((0,Ee.A)({},t),{},{id:n.id,date:e,type:n.type,description:n.description||""}))):s(t=>(0,Ee.A)((0,Ee.A)({},t),{},{date:e}))})(n)}),(0,Te.jsx)("div",{className:"date-option-content",children:(0,Te.jsx)("span",{className:"date-text",children:r})})]},n)})}),(0,Te.jsx)("div",{className:"context-details",children:(0,Te.jsxs)("div",{className:"context-item",children:[(0,Te.jsx)("span",{className:"context-label",children:"\ud604\uc7ac \uc720\ud615:"}),(0,Te.jsx)("span",{className:"context-value",children:r.type})]})})]})},ar=()=>{var e,t,n,r,s,o,a,l;const{state:c,actions:u}=Vt(),{ui:d,employees:h}=c,p=(0,i.useRef)(0),f=(0,i.useRef)(!1);p.current+=1,(0,i.useEffect)(()=>{if("vacation"===d.activeModal||"editVacation"===d.activeModal)return f.current?void console.warn("[VacationModal] \ud83d\udea8 \uc911\ubcf5 \ub9c8\uc6b4\ud2b8 \uc2dc\ub3c4 \ucc28\ub2e8"):(f.current=!0,()=>{f.current=!1})},[d.activeModal]),console.log("[VacationModal] \ub80c\ub354\ub9c1 \uccb4\ud06c:",{renderCount:p.current,activeModal:d.activeModal,modalProps:d.modalProps,isMounted:f.current});const[m,g]=(0,i.useState)({id:null,date:"",employeeId:"",type:"\uc5f0\ucc28",description:""}),[v,y]=(0,i.useState)({}),[b,_]=(0,i.useState)(!1),w="editVacation"===d.activeModal;(0,i.useEffect)(()=>{var e;if(console.log("[VacationModal] \ud83d\udd04 \ub370\uc774\ud130 \ucd08\uae30\ud654 \uc2dc\uc791:",{activeModal:d.activeModal,modalProps:d.modalProps,hasVacation:!(null===(e=d.modalProps)||void 0===e||!e.vacation),isEditMode:"editVacation"===d.activeModal}),"vacation"===d.activeModal||"editVacation"===d.activeModal)if("editVacation"===d.activeModal&&d.modalProps&&d.modalProps.vacation){console.log("[VacationModal] \u2705 editVacation \ubaa8\ub4dc - vacation \ub370\uc774\ud130 \uc788\uc74c:",d.modalProps.vacation);const{vacation:e}=d.modalProps;g({id:e.id||null,date:e.date||"",employeeId:e.employeeId||"",type:e.type||"\uc5f0\ucc28",description:e.description||""}),console.log("[VacationModal] \ud83d\udcdd formData \uc124\uc815 \uc644\ub8cc")}else if(d.modalProps&&d.modalProps.date){var t;console.log("[VacationModal] \ud83d\udcc5 modalProps\uc5d0\uc11c date \uc0ac\uc6a9:",d.modalProps),g({id:null,date:d.modalProps.date||"",employeeId:(null===(t=d.modalProps.employee)||void 0===t?void 0:t.id)||"",type:d.modalProps.type||"\uc5f0\ucc28",description:""})}else if(d.selectedDate){const e=d.selectedDate.getFullYear(),t=String(d.selectedDate.getMonth()+1).padStart(2,"0"),n=String(d.selectedDate.getDate()).padStart(2,"0"),r="".concat(e,"-").concat(t,"-").concat(n);g({id:null,date:r,employeeId:"",type:"\uc5f0\ucc28",description:""})}y({})},[d.activeModal,d.selectedDate,null===(e=d.modalProps)||void 0===e||null===(t=e.vacation)||void 0===t?void 0:t.id,null===(n=d.modalProps)||void 0===n?void 0:n.date,null===(r=d.modalProps)||void 0===r||null===(s=r.employee)||void 0===s?void 0:s.id]),(0,i.useEffect)(()=>{if(m.date&&m.employeeId){const e=u.detectConflicts(m),{consecutiveGroup:t}=d.modalProps||{},n=w&&t&&t.isConsecutive;let r=!1;e.length>0&&(r=n?e.some(e=>{const n=t.vacations.some(t=>t.id===e.id);return!n}):e.some(e=>e.id!==m.id)),y(r?e=>(0,Ee.A)((0,Ee.A)({},e),{},{conflict:"\uc774\ubbf8 \ud574\ub2f9 \ub0a0\uc9dc\uc5d0 \ud734\uac00\uac00 \uc788\uc2b5\ub2c8\ub2e4."}):e=>(0,Ee.A)((0,Ee.A)({},e),{},{conflict:null}))}},[m.date,m.employeeId,u,m.id,w,null===(o=d.modalProps)||void 0===o?void 0:o.consecutiveGroup]);const x=e=>{const{name:t,value:n}=e.target;g(e=>(0,Ee.A)((0,Ee.A)({},e),{},{[t]:n})),v[t]&&y(e=>(0,Ee.A)((0,Ee.A)({},e),{},{[t]:null}))},C=async e=>{if(e.preventDefault(),(()=>{const e={};return m.date||(e.date="\ub0a0\uc9dc\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694."),m.employeeId||(e.employeeId="\uc9c1\uc6d0\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."),m.type||(e.type="\ud734\uac00 \uc720\ud615\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."),v.conflict&&(e.conflict=v.conflict),y(e),0===Object.keys(e).length})()){_(!0);try{const e=(0,Ee.A)((0,Ee.A)({},m),{},{employeeId:parseInt(m.employeeId)});console.log("\ud83c\udfaf \ud734\uac00 \uc800\uc7a5 \uc2dc\uc791:",JSON.stringify(e,null,2)),console.log("\ud83c\udfaf \uc800\uc7a5 \uc804 \ud604\uc7ac \ud734\uac00 \uac1c\uc218:",c.vacations.length);const t=h.find(t=>t.id===e.employeeId);if(!t)throw new Error("\uc9c1\uc6d0\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. ID: ".concat(e.employeeId));if(console.log("\ud83c\udfaf \ud734\uac00 \uc800\uc7a5 \ub300\uc0c1 \uc9c1\uc6d0:",t.name),w)await u.updateVacation(e),console.log("\ud83c\udfaf \ud734\uac00 \uc218\uc815 \uc644\ub8cc - \uc5f0\uc18d\ud734\uac00 \uc790\ub3d9 \uc7ac\uacc4\uc0b0\ub428");else{const t=await u.addVacation(e);console.log("\ud83c\udfaf \ud734\uac00 \ucd94\uac00 \uc644\ub8cc:",t),t?console.log("\ud83c\udfaf Firebase \uc800\uc7a5 \uc131\uacf5 - ID:",t.id):console.error("\ud83c\udfaf \ud734\uac00 \uc800\uc7a5 \uc2e4\ud328 - savedVacation\uc774 null/undefined")}u.setModal(null)}catch(t){console.error("\ud734\uac00 \uc800\uc7a5 \uc624\ub958:",t),t.message.includes("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uc9c1\uc6d0")?y({submit:"\uc624\ub958: ".concat(t.message)}):y({submit:"\uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."})}finally{_(!1)}}},k=async()=>{console.log("[VacationModal] \ud83d\uddd1\ufe0f handleDeleteSingleDay \uc2dc\uc791"),console.log("[VacationModal] \ud83d\udccb \uc0ad\uc81c\ud560 \ud734\uac00 \uc815\ubcf4:",{id:m.id,date:m.date,employeeId:m.employeeId,type:m.type}),console.log("[VacationModal] \ud83d\udc64 \uc120\ud0dd\ub41c \uc9c1\uc6d0:",{id:null===N||void 0===N?void 0:N.id,name:null===N||void 0===N?void 0:N.name});const e=tr(m.date),t=e?"".concat(N.name,"\ub2d8\uc758 ").concat(e," \ud734\uac00\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"):"".concat(N.name,"\ub2d8\uc758 \ud574\ub2f9 \ub0a0\uc9dc \ud734\uac00\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");if(window.confirm(t))try{console.log("[VacationModal] \u2705 \uc0ac\uc6a9\uc790 \ud655\uc778 - \uc0ad\uc81c \uc9c4\ud589:",m.id),await u.deleteVacationDay(m.id,m.date),u.setModal(null),console.log("[VacationModal] \ud83c\udfaf \uc0ad\uc81c \uc644\ub8cc")}catch(n){console.error("[VacationModal] \u274c \uc0ad\uc81c \uc2e4\ud328:",n)}else console.log("[VacationModal] \u274c \uc0ac\uc6a9\uc790 \ucde8\uc18c - \uc0ad\uc81c \uc911\ub2e8")},E=async()=>{const{consecutiveGroup:e}=d.modalProps||{};if(e&&e.isConsecutive&&e.startDate&&e.endDate){const t=tr(e.startDate),n=tr(e.endDate);let r;r=t&&n?"".concat(N.name,"\ub2d8\uc758 \uc5f0\ud734 \uc804\uccb4 (").concat(t," ~ ").concat(n,")\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"):"".concat(N.name,"\ub2d8\uc758 \uc5f0\ud734 \uc804\uccb4\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"),window.confirm(r)&&(u.deleteConsecutiveVacations(e.startDate,e.endDate,e.employeeId),u.setModal(null))}else if(window.confirm("".concat(N.name,"\ub2d8\uc758 \ubaa8\ub4e0 ").concat(m.type," \ud734\uac00\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{await u.deleteVacation(m.id),u.setModal(null),console.log("[VacationModal] \ud83c\udfaf \uc804\uccb4 \ud734\uac00 \uc0ad\uc81c \uc644\ub8cc")}catch(t){console.error("[VacationModal] \u274c \uc804\uccb4 \ud734\uac00 \uc0ad\uc81c \uc2e4\ud328:",t)}},S=()=>{u.setModal(null),g({id:null,date:"",employeeId:"",type:"\uc5f0\ucc28",description:""}),y({})},N=h.find(e=>e.id===m.employeeId);if("vacation"!==d.activeModal&&"editVacation"!==d.activeModal)return console.log("[VacationModal] \u274c \ubaa8\ub2ec \ub80c\ub354\ub9c1 \uc548 \ud568 - activeModal:",d.activeModal),null;console.log("[VacationModal] \ud83c\udfa8 \ubaa8\ub2ec \ub80c\ub354\ub9c1 \uc2dc\uc791:",{activeModal:d.activeModal,isEditMode:w,formData:m,selectedEmployee:null===N||void 0===N?void 0:N.name});return(0,Te.jsx)("div",{className:"vacation-modal-overlay",onClick:S,children:(0,Te.jsxs)("div",{className:"vacation-modal-container",onClick:e=>e.stopPropagation(),children:[(0,Te.jsxs)("div",{className:"vacation-modal-header",children:[(0,Te.jsx)("h2",{className:"vacation-modal-title",children:(()=>{if(!w)return"\ud734\uac00 \ub4f1\ub85d";const{consecutiveGroup:e}=d.modalProps||{};if(e&&e.isConsecutive&&e.startDate&&e.endDate){const t=tr(e.startDate),n=tr(e.endDate);if(t&&n)return"\ud734\uac00 \uc218\uc815 - \uc5f0\ud734 (".concat(t," ~ ").concat(n,")")}if(m.date){const e=tr(m.date);if(e)return"\ud734\uac00 \uc218\uc815 - ".concat(e)}return"\ud734\uac00 \uc218\uc815"})()}),(0,Te.jsx)("button",{className:"vacation-modal-close",onClick:S,children:(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),(0,Te.jsxs)("div",{className:"vacation-modal-content",children:[w&&d.modalProps&&(()=>{const{consecutiveGroup:e}=d.modalProps;return e&&e.isConsecutive&&e.startDate&&e.endDate?(0,Te.jsx)(or,{consecutiveGroup:e,selectedEmployee:N,formData:m,setFormData:g,formatDateToKorean:tr}):(0,Te.jsx)("div",{className:"edit-context-info",children:(0,Te.jsx)("div",{className:"context-details",children:(0,Te.jsxs)("div",{className:"context-item",children:[(0,Te.jsx)("span",{className:"context-label",children:"\uc218\uc815\uc911\uc778 \ud734\uac00"}),(0,Te.jsx)("span",{className:"context-label",children:"\ud604\uc7ac \uc720\ud615:"}),(0,Te.jsx)("span",{className:"context-value",children:m.type})]})})})})(),(0,Te.jsxs)("form",{onSubmit:C,className:"vacation-form",children:[(0,Te.jsxs)("div",{className:"form-field",children:[(0,Te.jsx)("label",{className:"field-label",children:(0,Te.jsx)("span",{className:"label-text",children:"\ud734\uac00 \ub0a0\uc9dc"})}),(0,Te.jsxs)("div",{className:"input-wrapper",children:[w&&null!==(a=d.modalProps)&&void 0!==a&&null!==(l=a.consecutiveGroup)&&void 0!==l&&l.isConsecutive?(0,Te.jsx)("div",{className:"selected-date-display",children:(0,Te.jsxs)("div",{className:"date-display-content",children:[(0,Te.jsx)("span",{className:"date-display-text",children:tr(m.date)||"\ub0a0\uc9dc\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),(0,Te.jsx)("span",{className:"date-display-note",children:"\uc704\uc5d0\uc11c \uc218\uc815\ud560 \ub0a0\uc9dc\ub97c \uc120\ud0dd\ud558\uc138\uc694"})]})}):(0,Te.jsx)("input",{type:"date",name:"date",value:m.date,onChange:x,className:"modern-input ".concat(v.date?"error":""),required:!0}),v.date&&(0,Te.jsx)("div",{className:"error-message",children:v.date})]})]}),(0,Te.jsxs)("div",{className:"form-field",children:[(0,Te.jsx)("label",{className:"field-label",children:(0,Te.jsx)("span",{className:"label-text",children:"\uc9c1\uc6d0 \uc120\ud0dd"})}),(0,Te.jsxs)("div",{className:"input-wrapper",children:[(0,Te.jsxs)("select",{name:"employeeId",value:m.employeeId,onChange:x,className:"modern-select ".concat(v.employeeId?"error":""),required:!0,disabled:!1,children:[(0,Te.jsx)("option",{value:"",children:"\uc9c1\uc6d0\uc744 \uc120\ud0dd\ud558\uc138\uc694"}),h.map(e=>(0,Te.jsxs)("option",{value:e.id,children:[e.name," (",e.team,")"]},e.id))]}),N&&!w&&(0,Te.jsxs)("div",{className:"selected-employee-preview",children:[(0,Te.jsx)("div",{className:"employee-avatar",children:N.name.charAt(0)}),(0,Te.jsxs)("div",{className:"employee-info",children:[(0,Te.jsx)("span",{className:"employee-name",children:N.name}),(0,Te.jsx)("span",{className:"employee-team",children:N.team})]})]}),v.employeeId&&(0,Te.jsx)("div",{className:"error-message",children:v.employeeId})]})]}),(0,Te.jsxs)("div",{className:"form-field",children:[(0,Te.jsx)("label",{className:"field-label",children:(0,Te.jsx)("span",{className:"label-text",children:"\ud734\uac00 \uc720\ud615"})}),(0,Te.jsxs)("div",{className:"input-wrapper",children:[(0,Te.jsx)("div",{className:"vacation-type-grid",children:[{value:"\uc5f0\ucc28",label:"\uc5f0\ucc28",color:"#4285f4"},{value:"\uc624\uc804",label:"\uc624\uc804\ubc18\ucc28",color:"#34a853"},{value:"\uc624\ud6c4",label:"\uc624\ud6c4\ubc18\ucc28",color:"#fbbc04"},{value:"\ud2b9\ubcc4",label:"\ud2b9\ubcc4\ud734\uac00",color:"#ea4335"},{value:"\ubcd1\uac00",label:"\ubcd1\uac00",color:"#9aa0a6"},{value:"\uc5c5\ubb34",label:"\uc5c5\ubb34\uc77c\uc815",color:"#674ea7"}].map(e=>(0,Te.jsxs)("label",{className:"vacation-type-card ".concat(m.type===e.value?"selected":""),children:[(0,Te.jsx)("input",{type:"radio",name:"type",value:e.value,checked:m.type===e.value,onChange:x,className:"type-radio"}),(0,Te.jsx)("div",{className:"type-indicator",style:{backgroundColor:e.color}}),(0,Te.jsx)("span",{className:"type-label",children:e.label})]},e.value))}),v.type&&(0,Te.jsx)("div",{className:"error-message",children:v.type})]})]}),(0,Te.jsxs)("div",{className:"form-field",children:[(0,Te.jsx)("label",{className:"field-label",children:(0,Te.jsx)("span",{className:"label-text",children:"\uc124\uba85 (\uc120\ud0dd\uc0ac\ud56d)"})}),(0,Te.jsx)("div",{className:"input-wrapper",children:(0,Te.jsx)("textarea",{name:"description",value:m.description,onChange:x,className:"modern-textarea",placeholder:"\ud734\uac00 \uc0ac\uc720\ub098 \ucd94\uac00 \uc815\ubcf4\ub97c \uc785\ub825\ud558\uc138\uc694...",rows:"3"})})]}),v.conflict&&(0,Te.jsx)("div",{className:"alert alert-warning",children:(0,Te.jsx)("span",{className:"alert-text",children:v.conflict})}),v.submit&&(0,Te.jsx)("div",{className:"alert alert-error",children:(0,Te.jsx)("span",{className:"alert-text",children:v.submit})})]})]}),(0,Te.jsx)("div",{className:"vacation-modal-footer",children:(0,Te.jsxs)("div",{className:"footer-actions",children:[w&&(()=>{const{consecutiveGroup:e}=d.modalProps||{},t=e&&e.isConsecutive&&e.startDate&&e.endDate;return(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsxs)("button",{type:"button",onClick:k,className:"action-button delete-button",disabled:b,children:[(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),(0,Te.jsx)("span",{className:"button-text",children:t?"\uc120\ud0dd\ub41c \ub0a0\uc9dc \uc0ad\uc81c":"\ud734\uac00 \uc0ad\uc81c"})]}),t&&(0,Te.jsxs)("button",{type:"button",onClick:E,className:"action-button delete-button",disabled:b,title:(()=>{const t=tr(e.startDate),n=tr(e.endDate);return t&&n?"\uc5f0\ud734 \uc804\uccb4 (".concat(t," ~ ").concat(n,") \uc0ad\uc81c"):"\uc5f0\ud734 \uc804\uccb4 \uc0ad\uc81c"})(),children:[(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),(0,Te.jsx)("span",{className:"button-text",children:"\uc5f0\ud734 \uc804\uccb4 \uc0ad\uc81c"})]})]})})(),(0,Te.jsxs)("div",{className:"primary-actions",children:[(0,Te.jsx)("button",{type:"button",onClick:S,className:"action-button cancel-button",disabled:b,children:(0,Te.jsx)("span",{className:"button-text",children:"\ucde8\uc18c"})}),(0,Te.jsxs)("button",{onClick:C,className:"action-button submit-button",disabled:b||!!v.conflict,children:[(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),(0,Te.jsx)("span",{className:"button-text",children:b?"\uc800\uc7a5 \uc911...":w?"\uc218\uc815\ud558\uae30":"\ub4f1\ub85d\ud558\uae30"})]})]})]})})]})})},lr=(0,i.memo)(ar),cr=e=>{let{isOpen:t,onClose:n,data:r}=e;const{actions:i}=Vt();if(!r)return null;const s={date:r.date||(new Date).toISOString().split("T")[0],vacations:r.vacations||[],employees:r.employees||[]},{date:o,vacations:a=[],employees:l=[]}=s,c=e=>l.find(t=>t.id===e)||{name:"\uc54c \uc218 \uc5c6\uc74c",color:"#6B7280"},{day:u,dayOfWeek:d}=(e=>{const t=new Date(e);return{day:t.getDate(),dayOfWeek:["\uc77c\uc694\uc77c","\uc6d4\uc694\uc77c","\ud654\uc694\uc77c","\uc218\uc694\uc77c","\ubaa9\uc694\uc77c","\uae08\uc694\uc77c","\ud1a0\uc694\uc77c"][t.getDay()]}})(o);return(0,Te.jsx)("div",{className:"google-modal-overlay",onClick:n,children:(0,Te.jsxs)("div",{className:"google-day-modal",onClick:e=>e.stopPropagation(),children:[(0,Te.jsxs)("div",{className:"google-modal-header",children:[(0,Te.jsxs)("div",{className:"google-date-section",children:[(0,Te.jsx)("div",{className:"google-day-number",children:u}),(0,Te.jsx)("div",{className:"google-day-name",children:d})]}),(0,Te.jsx)("div",{className:"google-header-actions",children:(0,Te.jsx)("button",{className:"google-close-btn",onClick:n,children:(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"currentColor"})})})})]}),(0,Te.jsx)("div",{className:"google-modal-divider"}),(0,Te.jsx)("div",{className:"google-date-info",children:(0,Te.jsxs)("span",{className:"google-date-text",children:["\ud55c\uad6d 6\uc6d4 ",u,"\uc77c"]})}),(0,Te.jsx)("div",{className:"google-events-list",children:a.map((e,t)=>{const n=c(e.employeeId),r=(e=>{switch(e){case"\uc5f0\ucc28":return{backgroundColor:"#4285F4",color:"white",label:"\uc5f0\ucc28"};case"\uc624\uc804":return{backgroundColor:"#FF9800",color:"white",label:"\uc624\uc804 \ubc18\ucc28"};case"\uc624\ud6c4":return{backgroundColor:"#FF9800",color:"white",label:"\uc624\ud6c4 \ubc18\ucc28"};case"\ud2b9\ubcc4":return{backgroundColor:"#0F9D58",color:"white",label:"\ud2b9\ubcc4\ud734\uac00"};case"\ubcd1\uac00":return{backgroundColor:"#EA4335",color:"white",label:"\ubcd1\uac00"};case"\uc5c5\ubb34":return{backgroundColor:"#9C27B0",color:"white",label:"\uc5c5\ubb34"};default:return{backgroundColor:"#9E9E9E",color:"white",label:e}}})(e.type);return(0,Te.jsxs)("div",{className:"google-event-item",children:[(0,Te.jsx)("div",{className:"google-event-time-indicator",children:(0,Te.jsx)("div",{className:"google-event-color-bar",style:{backgroundColor:r.backgroundColor}})}),(0,Te.jsxs)("div",{className:"google-event-content",onClick:()=>(e=>{const t=c(e.employeeId);i.openModal("editVacation",{date:o,vacation:e,employee:t})})(e),style:{cursor:"pointer"},children:[(0,Te.jsx)("div",{className:"google-event-title",children:(0,Te.jsx)("span",{className:"google-event-name",children:n.name})}),(0,Te.jsxs)("div",{className:"google-event-subtitle",children:[r.label,e.description&&" \u2022 ".concat(e.description)]})]})]},"".concat(e.employeeId,"-").concat(e.type,"-").concat(t))})}),(0,Te.jsx)("div",{className:"google-modal-footer",children:(0,Te.jsxs)("button",{className:"google-add-event-btn",onClick:()=>{i.openModal("addVacation",{date:o,employee:null,type:"\uc5f0\ucc28"})},children:[(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",fill:"currentColor"})}),(0,Te.jsxs)("span",{children:[(e=>{const t=new Date(e),n=(t.getFullYear(),t.getMonth()+1),r=t.getDate();return"".concat(n,"\uc6d4 ").concat(r,"\uc77c")})(o),"\uc5d0 \ucd94\uac00"]})]})})]})})},ur={manager:0,leader:1,member:2},dr={manager:"\ubd80\uc7a5",leader:"\ud300\uc7a5",member:"\ud300\uc6d0"},hr=i.memo(()=>{const{state:e,actions:t}=Vt(),{employees:n}=e,[r,s]=(0,i.useState)({}),[o,a]=(0,i.useState)({}),l=(0,i.useMemo)(()=>{const e={};n.forEach(t=>{const n=t.team||"\ubbf8\uc9c0\uc815";e[n]||(e[n]={id:n,name:n,employees:[],totalCount:0}),e[n].employees.push(t),e[n].totalCount++}),Object.values(e).forEach(e=>{e.employees.sort((e,t)=>{var n,r;return(null!==(n=ur[e.position])&&void 0!==n?n:3)-(null!==(r=ur[t.position])&&void 0!==r?r:3)})});return Object.values(e).sort((e,t)=>{const n=e.employees.some(e=>"manager"===e.position),r=t.employees.some(e=>"manager"===e.position);return n&&!r?-1:!n&&r?1:e.name.localeCompare(t.name)})},[n]);i.useEffect(()=>{const e={},t={};l.forEach(n=>{r[n.id]||(e[n.id]={checked:!0,collapsed:!1}),n.employees.forEach(e=>{o[e.id]||(t[e.id]=!0)})}),Object.keys(e).length>0&&s(t=>(0,Ee.A)((0,Ee.A)({},t),e)),Object.keys(t).length>0&&a(e=>(0,Ee.A)((0,Ee.A)({},e),t))},[l]);const c=(0,i.useMemo)(()=>l.every(e=>{var t;return null===(t=r[e.id])||void 0===t?void 0:t.checked}),[l,r]),u=(0,i.useMemo)(()=>l.some(e=>{var t;return null===(t=r[e.id])||void 0===t?void 0:t.checked}),[l,r]),d=(0,i.useMemo)(()=>{let e=0;return l.forEach(t=>{var n;null!==(n=r[t.id])&&void 0!==n&&n.checked&&t.employees.forEach(t=>{o[t.id]&&e++})}),e},[l,r,o]),h=(0,i.useCallback)(e=>{var t;return null!==(t=r[e.id])&&void 0!==t&&t.checked?e.employees.filter(e=>o[e.id]).length:0},[r,o]),p=(0,i.useCallback)((e,n)=>{const r=[];l.forEach(t=>{var i;null!==(i=e[t.id])&&void 0!==i&&i.checked&&t.employees.forEach(e=>{n[e.id]&&r.push(e.id)})}),t.setFilters({selectedEmployees:r,selectedTeams:l.filter(t=>{var n;return null===(n=e[t.id])||void 0===n?void 0:n.checked}).map(e=>e.id)})},[l,t]),f=(0,i.useCallback)(()=>{const e=!c,t=(0,Ee.A)({},r),n=(0,Ee.A)({},o);l.forEach(r=>{t[r.id]=(0,Ee.A)((0,Ee.A)({},t[r.id]),{},{checked:e}),r.employees.forEach(t=>{n[t.id]=e})}),s(t),a(n),p(t,n)},[c,l,r,o,p]),m=(0,i.useCallback)(e=>{var t,n;const i=l.find(t=>t.id===e),c=(0,Ee.A)((0,Ee.A)({},r),{},{[e]:(0,Ee.A)((0,Ee.A)({},r[e]),{},{checked:!(null!==(t=r[e])&&void 0!==t&&t.checked),collapsed:null===(n=r[e])||void 0===n?void 0:n.collapsed})}),u=(0,Ee.A)({},o);c[e].checked&&i.employees.forEach(e=>{u[e.id]=!0}),s(c),a(u),p(c,u)},[l,r,o,p]),g=(0,i.useCallback)(e=>{const t=(0,Ee.A)((0,Ee.A)({},o),{},{[e]:!o[e]});a(t),p(r,t)},[o,r,p]),v=(0,i.useCallback)(e=>{var t;const n=(0,Ee.A)((0,Ee.A)({},r),{},{[e]:(0,Ee.A)((0,Ee.A)({},r[e]),{},{collapsed:!(null!==(t=r[e])&&void 0!==t&&t.collapsed)})});s(n)},[r]),y=(0,i.useCallback)(()=>{const e={},t={};l.forEach(n=>{e[n.id]={checked:!0,collapsed:!1},n.employees.forEach(e=>{t[e.id]=!0})}),s(e),a(t),p(e,t)},[l,p]);return(0,Te.jsxs)("div",{className:"advanced-filter",children:[(0,Te.jsxs)("div",{className:"filter-controls-unified",children:[(0,Te.jsxs)("label",{className:"global-checkbox-container",children:[(0,Te.jsx)("input",{type:"checkbox",checked:c,ref:e=>{e&&(e.indeterminate=u&&!c)},onChange:f,className:"global-checkbox-input"}),(0,Te.jsx)("div",{className:"checkbox-design"}),(0,Te.jsx)("span",{className:"global-checkbox-label",children:"\uc804\uccb4 \uc120\ud0dd"})]}),(0,Te.jsxs)("span",{className:"filter-stats",children:[d," / ",n.length]}),(0,Te.jsxs)("button",{className:"reset-button",onClick:y,disabled:c&&l.every(e=>{var t;return!(null!==(t=r[e.id])&&void 0!==t&&t.collapsed)}),title:"\ud544\ud130 \ucd08\uae30\ud654",children:[(0,Te.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[(0,Te.jsx)("path",{d:"M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,Te.jsx)("path",{d:"M21 3v5h-5M21 12a9 9 0 01-9 9 9.75 9.75 0 01-6.74-2.74L3 16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,Te.jsx)("path",{d:"M8 21v-5h5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),"\ucd08\uae30\ud654"]})]}),(0,Te.jsxs)("div",{className:"team-filters",children:[(0,Te.jsx)("div",{className:"team-list",children:l.map(e=>{const t=r[e.id]||{checked:!0,collapsed:!1},n=t.checked,i=t.collapsed,s=h(e);return(0,Te.jsxs)("div",{className:"team-item ".concat(n?"team-visible":"team-hidden"),children:[(0,Te.jsxs)("div",{className:"team-header",children:[(0,Te.jsx)("button",{className:"collapse-toggle",onClick:()=>v(e.id),title:i?"\ud3bc\uce58\uae30":"\uc811\uae30",children:(0,Te.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",className:"toggle-arrow ".concat(i?"collapsed":"expanded"),children:(0,Te.jsx)("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),(0,Te.jsxs)("label",{className:"team-checkbox-container",children:[(0,Te.jsx)("input",{type:"checkbox",checked:n,onChange:()=>m(e.id),className:"team-checkbox-input"}),(0,Te.jsx)("div",{className:"checkbox-design team-checkbox"})]}),(0,Te.jsx)("span",{className:"team-name",children:e.name}),(0,Te.jsx)("span",{className:"team-count",children:n?"".concat(s,"/").concat(e.totalCount):"".concat(e.totalCount)})]}),!i&&(0,Te.jsxs)("div",{className:"employee-list horizontal-layout",children:[e.employees.map(e=>{const t=o[e.id];return(0,Te.jsxs)("div",{className:"employee-item ".concat(t?"employee-visible":"employee-hidden"),onClick:()=>g(e.id),children:[(0,Te.jsx)("input",{type:"checkbox",checked:t,onChange:()=>g(e.id),className:"employee-checkbox-input",onClick:e=>e.stopPropagation(),"aria-label":"".concat(e.name," ").concat(dr[e.position]||e.position," \ud45c\uc2dc \uc5ec\ubd80")}),(0,Te.jsx)("div",{className:"checkbox-design employee-checkbox"}),(0,Te.jsxs)("div",{className:"employee-info horizontal",children:[(0,Te.jsx)("div",{className:"employee-avatar",style:{backgroundColor:e.color||"#4285f4"},title:"".concat(e.name," ").concat(dr[e.position]||e.position)}),(0,Te.jsx)("div",{className:"employee-text",children:(0,Te.jsx)("span",{className:"employee-name",children:e.name})})]}),(0,Te.jsx)("span",{className:"employee-team ".concat("manager"===e.position?"manager":"leader"===e.position?"leader":""),children:dr[e.position]||e.position})]},e.id)}),0===e.employees.length&&(0,Te.jsx)("div",{className:"empty-team",children:(0,Te.jsx)("span",{className:"empty-message",children:"\ub4f1\ub85d\ub41c \uc9c1\uc6d0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"})})]})]},e.id)})}),0===l.length&&(0,Te.jsxs)("div",{className:"empty-filter",children:[(0,Te.jsx)("div",{className:"empty-title",children:"\uc9c1\uc6d0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,Te.jsx)("div",{className:"empty-description",children:"\ubd80\uc11c \uad00\ub9ac\uc5d0\uc11c \uc9c1\uc6d0\uc744 \uba3c\uc800 \ub4f1\ub85d\ud574\uc8fc\uc138\uc694"})]})]})]})});hr.displayName="AdvancedFilter";const pr=hr,fr=e=>{let{isOpen:t,onClose:n,title:r,children:s,size:o="medium",showCloseButton:a=!0,closeOnOverlayClick:l=!0,closeOnEscape:c=!0,className:u=""}=e;const d=(0,i.useRef)(null),h=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(t){const e=document.querySelectorAll(".modal-overlay");if(e.length>1){console.warn("[Modal] \ud83d\udea8 \uc911\ubcf5 \ubaa8\ub2ec \uac10\uc9c0\ub428:",e.length,"\uac1c - \uae30\uc874 \ubaa8\ub2ec\ub4e4 \uc815\ub9ac");for(let t=1;t<e.length;t++)e[t].remove()}}},[t]),(0,i.useEffect)(()=>{if(t){var e;h.current=document.activeElement;const t=null===(e=d.current)||void 0===e?void 0:e.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t&&t.focus()}else h.current&&h.current.focus()},[t]),(0,i.useEffect)(()=>{const e=e=>{l&&d.current&&!d.current.contains(e.target)&&n()};if(t)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t,n,l]),(0,i.useEffect)(()=>{const e=e=>{c&&"Escape"===e.key&&n()};if(t)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,n,c]),(0,i.useEffect)(()=>(t&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="unset"}),[t]);const p=(0,i.useCallback)(e=>{e.stopPropagation()},[]),f=(0,i.useCallback)(e=>{if("Tab"===e.key){var t;const n=null===(t=d.current)||void 0===t?void 0:t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),r=n[0],i=n[n.length-1];e.shiftKey&&document.activeElement===r?(e.preventDefault(),i.focus()):e.shiftKey||document.activeElement!==i||(e.preventDefault(),r.focus())}},[]);if(!t)return null;const m=(0,Te.jsx)("div",{className:"modal-overlay",role:"dialog","aria-modal":"true",style:{pointerEvents:"auto"},onClick:l?n:void 0,children:(0,Te.jsxs)("div",{className:"modal-container modal-".concat(o," ").concat(u),ref:d,onClick:p,onKeyDown:f,children:[(r||a)&&(0,Te.jsxs)("div",{className:"modal-header",children:[r&&(0,Te.jsx)("h2",{className:"modal-title",children:r}),a&&(0,Te.jsx)("button",{className:"modal-close-button",onClick:n,"aria-label":"\ubaa8\ub2ec \ub2eb\uae30",children:(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),(0,Te.jsx)("div",{className:"modal-content",children:s})]})});return(0,be.createPortal)(m,document.body)},mr=e=>{let{isOpen:t,onClose:n}=e;const{state:r,actions:s}=Vt(),[o,a]=(0,i.useState)(""),[l,c]=(0,i.useState)([]),[u,d]=(0,i.useState)([]),[h,p]=(0,i.useState)([]),[f,m]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(!o.trim())return c([]),d([]),void p([]);const e=setTimeout(()=>{g()},500);return()=>clearTimeout(e)},[o]);const g=(0,i.useCallback)(()=>{if(!o.trim())return;const e=[],t=[],n=[],i=o.split(/[\n\r]+/).map(e=>e.trim()).filter(e=>e);let s=null,a=null;const l=(new Date).getFullYear(),u=e=>{let t="\uc5f0\ucc28",n=e;const r=e.match(/\((\uc624\uc804|\uc624\ud6c4|AM|PM|am|pm)\)/i);if(r){const i=r[1].toLowerCase();t="\uc624\uc804"===i||"am"===i?"\uc624\uc804":"\uc624\ud6c4",n=e.replace(/\([^)]*\)/g,"").trim()}const i=[{regex:/^(\d{4})(\d{2})(\d{2})$/,year:1,month:2,day:3},{regex:/^(\d{4})[-\/\.](\d{1,2})[-\/\.](\d{1,2})$/,year:1,month:2,day:3},{regex:/^(\d{2})[-\/\.](\d{1,2})[-\/\.](\d{1,2})$/,year:1,month:2,day:3,shortYear:!0},{regex:/^(\d{2})(\d{2})(\d{2})$/,year:1,month:2,day:3,shortYear:!0},{regex:/^(\d{2})(\d{2})$/,month:1,day:2},{regex:/^(\d{1,2})[-\/\.](\d{1,2})$/,month:1,day:2},{regex:/^(\d{1})[-\/](\d{1,2})$/,month:1,day:2},{regex:/^(\d{1,2})$/,day:1,currentMonth:!0}];for(const s of i){const r=n.match(s.regex);if(r){let n,i,o;if(s.year?(n=parseInt(r[s.year]),s.shortYear&&(n=n<50?2e3+n:1900+n)):n=l,s.month?i=parseInt(r[s.month]):s.currentMonth&&(i=(new Date).getMonth()+1),o=parseInt(r[s.day]),i<1||i>12||o<1||o>31)return null;const a=new Date(n,i-1,o);if(a.getMonth()!==i-1||a.getDate()!==o)return null;const c=a.getFullYear(),u=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return{date:"".concat(c,"-").concat(u,"-").concat(d),type:t,originalText:e,parsedAs:"".concat(c,"/").concat(u,"/").concat(d," (").concat(t,")")}}}return null};i.forEach((i,o)=>{const l=i.split(/[,;\uff0c\uff1b]+/).map(e=>e.trim()).filter(e=>e);let c=!1;for(const e of l){const n=u(e);if(n){if(c=!0,!s){t.push("".concat(o+1,"\ubc88 \uc904: \uc9c1\uc6d0 \uc774\ub984 \uc5c6\uc774 \ub0a0\uc9dc\uac00 \uc785\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4. (").concat(e,")"));continue}a.vacations.push(n)}}if(!c){a&&a.vacations.length>0&&e.push(a),s=i,a={name:s,vacations:[]};r.employees.map(e=>e.name).includes(s)||n.push("'".concat(s,"'\ub294 \ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 \uc9c1\uc6d0\uc785\ub2c8\ub2e4. \uc790\ub3d9\uc73c\ub85c \ucd94\uac00\ub429\ub2c8\ub2e4."))}}),a&&a.vacations.length>0&&e.push(a),c(e),d(t),p(n)},[o,r.employees]),v=(0,i.useCallback)(async()=>{if(0!==l.length){m(!0);try{let t=0,n=[],i=0,o=[...r.employees];for(const r of l){let a=o.find(e=>e.name===r.name);if(!a){const e={name:r.name,team:"\uae30\ud0c0",position:"member",color:null};a=await s.addEmployee(e),o.push(a),n.push(r.name),console.log("[BatchInput] \u2705 \uc0c8 \uc9c1\uc6d0 \ucd94\uac00: ".concat(r.name," (ID: ").concat(a.id,")"))}for(const n of r.vacations)try{const e=JSON.parse(localStorage.getItem("currentDepartment")||"{}"),r="vacations_".concat(e.code||"default"),o=JSON.parse(localStorage.getItem(r)||"[]").find(e=>e.date===n.date&&e.employeeId===a.id);o&&(i++,await s.deleteVacation(o.id));const l={date:n.date,employeeId:a.id,type:n.type};await s.addVacation(l),t++,console.log("[BatchInput] \u2705 \ud734\uac00 \ub4f1\ub85d \uc644\ub8cc: ".concat(a.name," - ").concat(n.date," (").concat(n.type,")"))}catch(e){console.error("[BatchInput] \u274c \ud734\uac00 \ub4f1\ub85d \uc2e4\ud328: ".concat(a.name," - ").concat(n.date),e)}}console.log("[BatchInput] \ud83d\udd04 state \ub3d9\uae30\ud654 \ub300\uae30..."),await new Promise(e=>setTimeout(e,500)),console.log("[BatchInput] \ud83d\udd04 \ud544\ud130 \ucd08\uae30\ud654 \uc911...");const a=o.map(e=>e.id),c=n.map(e=>{const t=o.find(t=>t.name===e);return t?t.id:null}).filter(Boolean),u=l.map(e=>{const t=o.find(t=>t.name===e.name);return t?t.id:null}).filter(Boolean);console.log("[BatchInput] \ud83d\udccb \uc0c8\ub85c \ucd94\uac00\ub41c \uc9c1\uc6d0 ID\ub4e4:",c),console.log("[BatchInput] \ud83d\udccb \ud734\uac00\uac00 \ub4f1\ub85d\ub41c \uc9c1\uc6d0 ID\ub4e4:",u),console.log("[BatchInput] \ud83d\udccb \ubaa8\ub4e0 \uc9c1\uc6d0 ID\ub4e4 (\uc5c5\ub370\uc774\ud2b8\ub41c):",a),console.log("[BatchInput] \ud83d\udccb \uae30\uc874 state.employees:",r.employees.map(e=>e.id)),s.setFilters({selectedEmployees:a,selectedTeams:[]}),console.log("[BatchInput] \u2705 state \ub3d9\uae30\ud654 \uc644\ub8cc");let d="".concat(t,"\uac74\uc758 \ud734\uac00\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");i>0&&(d+="\n(\uae30\uc874 \ud734\uac00 ".concat(i,"\uac74\uc774 \ub36e\uc5b4\uc4f0\uae30\ub418\uc5c8\uc2b5\ub2c8\ub2e4.)")),n.length>0&&(d+="\n\n\uc0c8\ub85c \ucd94\uac00\ub41c \uc9c1\uc6d0: ".concat(n.join(", "))),alert(d),y()}catch(e){console.error("\uc77c\uad04 \ub4f1\ub85d \uc624\ub958:",e),alert("\ub4f1\ub85d \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{m(!1)}}else alert("\ub4f1\ub85d\ud560 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")},[l,r.employees,r.vacations,s]),y=(0,i.useCallback)(()=>{a(""),c([]),d([]),p([]),n()},[n]),b=(0,i.useCallback)(()=>{a("\uae40\ucca0\uc218\n0715\n2025/07/16(\uc624\uc804)\n25-07-17\n7/18\n\n\ubc15\uc601\ud76c\n20250719\n0720(\uc624\ud6c4)\n0721, 0722, 0723\n\n\uc815\uac1c\ubc1c\n2025.07.24\n25/07/25\n26")},[]),_=l.reduce((e,t)=>e+t.vacations.length,0);return(0,Te.jsx)(fr,{isOpen:t,onClose:y,title:"\uc77c\uad04 \ud734\uac00 \uc785\ub825",size:"xlarge",className:"batch-input-modal",children:(0,Te.jsxs)("div",{className:"compact-batch-layout",children:[(0,Te.jsxs)("div",{className:"input-panel",children:[(0,Te.jsxs)("div",{className:"input-header",children:[(0,Te.jsxs)("div",{className:"input-title",children:[(0,Te.jsx)("span",{children:"\ud83d\udcdd \ub370\uc774\ud130 \uc785\ub825"}),(0,Te.jsx)("button",{className:"example-btn",onClick:b,title:"\uc608\uc2dc \ud14d\uc2a4\ud2b8 \uc0bd\uc785",children:"\ud83d\udca1 \uc608\uc2dc"})]}),(0,Te.jsxs)("div",{className:"quick-guide",children:[(0,Te.jsx)("span",{className:"guide-item",children:"\ud83d\udc64 \uc774\ub984"}),(0,Te.jsx)("span",{className:"guide-separator",children:"\u2192"}),(0,Te.jsx)("span",{className:"guide-item",children:"\ud83d\udcc5 \ub0a0\uc9dc (MMDD, YYYY-MM-DD \ub4f1)"}),(0,Te.jsx)("span",{className:"guide-separator",children:"\u2192"}),(0,Te.jsx)("span",{className:"guide-item",children:"\u23ed\ufe0f \ube48\uc904\ub85c \uad6c\ubd84"})]})]}),(0,Te.jsx)("textarea",{value:o,onChange:e=>a(e.target.value),placeholder:"\uae40\ucca0\uc218\n0715\n0716(\uc624\uc804) \ubc15\uc601\ud76c\n2025-07-20\n0721, 0722",className:"compact-textarea"}),(0,Te.jsxs)("div",{className:"input-actions",children:[(0,Te.jsx)("button",{className:"register-btn",onClick:v,disabled:0===l.length||u.length>0||f,children:f?"\ub4f1\ub85d \uc911...":"\ud734\uac00 \ub4f1\ub85d (".concat(_,"\uac74)")}),(0,Te.jsx)("button",{className:"cancel-btn",onClick:y,children:"\ucde8\uc18c"})]})]}),(0,Te.jsxs)("div",{className:"result-panel",children:[(0,Te.jsxs)("div",{className:"result-header",children:[(0,Te.jsx)("span",{children:"\ud83d\udd0d \ud30c\uc2f1 \uacb0\uacfc"}),_>0&&(0,Te.jsxs)("div",{className:"result-stats",children:[(0,Te.jsxs)("span",{className:"stat-badge",children:[l.length,"\uba85"]}),(0,Te.jsxs)("span",{className:"stat-badge",children:[_,"\uac74"]})]})]}),(0,Te.jsxs)("div",{className:"result-content",children:[u.length>0&&(0,Te.jsxs)("div",{className:"error-section",children:[(0,Te.jsx)("div",{className:"error-header",children:"\u274c \ud30c\uc2f1 \uc624\ub958"}),u.map((e,t)=>(0,Te.jsx)("div",{className:"error-item",children:e},t))]}),h.length>0&&(0,Te.jsxs)("div",{className:"warning-section",children:[(0,Te.jsx)("div",{className:"warning-header",children:"\u26a0\ufe0f \uc8fc\uc758\uc0ac\ud56d"}),h.map((e,t)=>(0,Te.jsx)("div",{className:"warning-item",children:e},t))]}),l.length>0&&0===u.length&&(0,Te.jsxs)("div",{className:"success-section",children:[(0,Te.jsx)("div",{className:"success-header",children:"\u2705 \ud30c\uc2f1 \uc644\ub8cc"}),(0,Te.jsx)("div",{className:"employee-list",children:l.map((e,t)=>(0,Te.jsxs)("div",{className:"employee-result",children:[(0,Te.jsx)("div",{className:"employee-name",children:e.name}),(0,Te.jsx)("div",{className:"vacation-tags",children:e.vacations.map((e,t)=>(0,Te.jsxs)("span",{className:"vacation-tag",children:[e.date.replace(/^2025-/,""),"\uc5f0\ucc28"!==e.type&&(0,Te.jsxs)("span",{className:"vacation-type",children:["(",e.type,")"]})]},t))})]},t))})]}),!o.trim()&&(0,Te.jsxs)("div",{className:"empty-state",children:[(0,Te.jsx)("div",{className:"empty-icon",children:"\ud83d\udcdd"}),(0,Te.jsx)("div",{className:"empty-text",children:"\uc67c\ucabd\uc5d0 \ud734\uac00 \ub370\uc774\ud130\ub97c \uc785\ub825\ud558\uc138\uc694"}),(0,Te.jsx)("div",{className:"empty-subtitle",children:"\uc2e4\uc2dc\uac04\uc73c\ub85c \ud30c\uc2f1 \uacb0\uacfc\uac00 \ud45c\uc2dc\ub429\ub2c8\ub2e4"})]})]})]})]})})},gr=i.memo(e=>{let{isOpen:t,onClose:n}=e;const{state:r,actions:s}=Vt(),[o,a]=(0,i.useState)("employees"),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(null),[h,p]=(0,i.useState)(null),[f,m]=(0,i.useState)(null),[g,v]=(0,i.useState)({name:"",team:"",position:"member",color:null}),[y,b]=(0,i.useState)(!1),[_,w]=(0,i.useState)(!1),[x,C]=(0,i.useState)({name:""}),k=(0,i.useCallback)(()=>{if(!g.name.trim())return void alert("\uc9c1\uc6d0 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if((r.employees||[]).find(e=>e.name===g.name.trim()))return void alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc9c1\uc6d0 \uc774\ub984\uc785\ub2c8\ub2e4.");const e=(0,Ee.A)((0,Ee.A)({},g),{},{name:g.name.trim(),team:g.team||"\uae30\ud0c0"});s.addEmployee(e),v({name:"",team:"",position:"member",color:null})},[g,r.employees,s]),E=(0,i.useCallback)(e=>{c(e.id),d((0,Ee.A)({},e))},[]),S=(0,i.useCallback)(()=>{if(!u.name.trim())return void alert("\uc9c1\uc6d0 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");r.employees.find(e=>e.name===u.name.trim()&&e.id!==u.id)?alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc9c1\uc6d0 \uc774\ub984\uc785\ub2c8\ub2e4."):(s.updateEmployee((0,Ee.A)((0,Ee.A)({},u),{},{name:u.name.trim(),team:u.team||"\uae30\ud0c0"})),c(null),d(null))},[u,r.employees,s]),N=(0,i.useCallback)(()=>{c(null),d(null)},[]),T=(0,i.useCallback)((e,t)=>{const n=r.vacations.filter(t=>t.employeeId===e).length,i=n>0?"".concat(t,"\ub2d8\uc744 \uc0ad\uc81c\ud558\uba74 \uad00\ub828\ub41c \ud734\uac00 ").concat(n,"\uac74\ub3c4 \ud568\uaed8 \uc0ad\uc81c\ub429\ub2c8\ub2e4.\n\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"):"".concat(t,"\ub2d8\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");window.confirm(i)&&s.deleteEmployee(e)},[r.vacations,s]),I=(0,i.useCallback)(()=>{if(!x.name.trim())return void alert("\ubd80\uc11c \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(r.departments.find(e=>e.name===x.name.trim()))return void alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ubd80\uc11c \uc774\ub984\uc785\ub2c8\ub2e4.");const e={id:Date.now(),name:x.name.trim()};s.setDepartments([...r.departments,e]),C({name:""})},[x,r.departments,s]),P=(0,i.useCallback)(e=>{p(e.id),m((0,Ee.A)({},e))},[]),A=(0,i.useCallback)(()=>{var e;if(!f.name.trim())return void alert("\ubd80\uc11c \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(r.departments.find(e=>e.name===f.name.trim()&&e.id!==f.id))return void alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ubd80\uc11c \uc774\ub984\uc785\ub2c8\ub2e4.");const t=null===(e=r.departments.find(e=>e.id===f.id))||void 0===e?void 0:e.name,n=(r.departments||[]).map(e=>e.id===f.id?(0,Ee.A)((0,Ee.A)({},e),{},{name:f.name.trim()}):e);if(s.setDepartments(n),t&&t!==f.name.trim()){const e=(r.employees||[]).map(e=>e.team===t?(0,Ee.A)((0,Ee.A)({},e),{},{team:f.name.trim()}):e);s.setEmployees(e)}p(null),m(null)},[f,r.departments,r.employees,s]),D=(0,i.useCallback)(()=>{p(null),m(null)},[]),j=(0,i.useCallback)((e,t)=>{const n=r.employees.filter(e=>e.team===t).length,i=n>0?"".concat(t," \ubd80\uc11c\ub97c \uc0ad\uc81c\ud558\uba74 \uc18c\uc18d \uc9c1\uc6d0 ").concat(n,"\uba85\uc758 \ubd80\uc11c\uac00 '\uae30\ud0c0'\ub85c \ubcc0\uacbd\ub429\ub2c8\ub2e4.\n\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"):"".concat(t," \ubd80\uc11c\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");if(window.confirm(i)){const i=r.departments.filter(t=>t.id!==e);if(s.setDepartments(i),n>0){const e=(r.employees||[]).map(e=>e.team===t?(0,Ee.A)((0,Ee.A)({},e),{},{team:"\uae30\ud0c0"}):e);s.setEmployees(e)}}},[r.employees,r.departments,s]),R=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1"],M=(0,i.useMemo)(()=>[...new Set([...(r.departments||[]).map(e=>e.name),...(r.employees||[]).map(e=>e.team),"\uae30\ud0c0"])].filter(Boolean),[r.departments,r.employees]),O=(0,i.useCallback)((e,t)=>{"Enter"===e.key&&t()},[]);return t?(0,Te.jsx)("div",{className:"employee-manager-modal",children:(0,Te.jsxs)("div",{className:"employee-manager-content",children:[(0,Te.jsxs)("div",{className:"employee-manager-header",children:[(0,Te.jsxs)("button",{className:"back-to-calendar-btn mobile-only",onClick:n,children:[(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,Te.jsx)("span",{children:"\ub2ec\ub825"})]}),(0,Te.jsx)("h2",{className:"employee-manager-title",children:"\uad00\ub9ac"}),(0,Te.jsx)("button",{className:"close-button",onClick:n,children:(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),(0,Te.jsxs)("div",{className:"employee-manager-body",children:[(0,Te.jsxs)("div",{className:"tab-buttons",children:[(0,Te.jsxs)("button",{className:"tab-button ".concat("employees"===o?"active":""),onClick:()=>a("employees"),children:["\uc9c1\uc6d0 (",r.employees.length,")"]}),(0,Te.jsxs)("button",{className:"tab-button ".concat("departments"===o?"active":""),onClick:()=>a("departments"),children:["\ubd80\uc11c (",r.departments.length,")"]})]}),"employees"===o&&(0,Te.jsx)("div",{className:"tab-content",children:(0,Te.jsxs)("div",{className:"teams-section",children:[(0,Te.jsxs)("div",{className:"add-team-form",children:[(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"new-employee-name",className:"form-label",children:"\uc0c8 \uc9c1\uc6d0 \ucd94\uac00"}),(0,Te.jsx)("input",{id:"new-employee-name",className:"form-input",type:"text",placeholder:"\uc9c1\uc6d0 \uc774\ub984",value:g.name,onChange:e=>v((0,Ee.A)((0,Ee.A)({},g),{},{name:e.target.value})),onKeyPress:e=>O(e,k),"aria-label":"\uc0c8 \uc9c1\uc6d0 \uc774\ub984 \uc785\ub825"})]}),(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"new-employee-team",className:"form-label visually-hidden",children:"\ubd80\uc11c \uc120\ud0dd"}),(0,Te.jsxs)("select",{id:"new-employee-team",className:"select-input",value:g.team,onChange:e=>v((0,Ee.A)((0,Ee.A)({},g),{},{team:e.target.value})),"aria-label":"\uc9c1\uc6d0 \ubd80\uc11c \uc120\ud0dd",children:[(0,Te.jsx)("option",{value:"",children:"\ubd80\uc11c \uc120\ud0dd"}),M.map(e=>(0,Te.jsx)("option",{value:e,children:e},e))]})]}),(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"new-employee-position",className:"form-label visually-hidden",children:"\uc9c1\uae09 \uc120\ud0dd"}),(0,Te.jsxs)("select",{id:"new-employee-position",className:"select-input",value:g.position,onChange:e=>v((0,Ee.A)((0,Ee.A)({},g),{},{position:e.target.value})),"aria-label":"\uc9c1\uc6d0 \uc9c1\uae09 \uc120\ud0dd",children:[(0,Te.jsx)("option",{value:"member",children:"\uc77c\ubc18"}),(0,Te.jsx)("option",{value:"leader",children:"\ud300\uc7a5"}),(0,Te.jsx)("option",{value:"manager",children:"\ubd80\uc7a5"})]})]}),(0,Te.jsxs)("div",{className:"color-and-add-row",children:[(0,Te.jsxs)("div",{className:"color-selection-wrapper",children:[(0,Te.jsxs)("button",{type:"button",className:"color-select-button ".concat(null===g.color?"auto":"custom"),onClick:()=>b(!y),children:[null===g.color?(0,Te.jsx)("span",{children:"\uc0c9\uc0c1"}):(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("div",{className:"selected-color-dot",style:{backgroundColor:g.color}}),(0,Te.jsx)("span",{children:"\uc0c9\uc0c1"})]}),(0,Te.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),y&&(0,Te.jsxs)("div",{className:"color-picker-dropdown",children:[(0,Te.jsx)("button",{className:"color-auto-option ".concat(null===g.color?"active":""),onClick:()=>{v((0,Ee.A)((0,Ee.A)({},g),{},{color:null})),b(!1)},children:"\uc790\ub3d9"}),(0,Te.jsx)("div",{className:"color-options",children:R.map(e=>(0,Te.jsx)("button",{className:"color-dot ".concat(g.color===e?"active":""),style:{backgroundColor:e},onClick:()=>{v((0,Ee.A)((0,Ee.A)({},g),{},{color:e})),b(!1)}},e))})]})]}),(0,Te.jsx)("button",{className:"add-button",onClick:k,children:"\uc9c1\uc6d0 \ucd94\uac00"})]})]}),(0,Te.jsx)("div",{className:"employees-grid",children:(r.employees||[]).map(e=>(0,Te.jsx)("div",{className:"employee-card",children:l===e.id?(0,Te.jsxs)("div",{className:"employee-edit-form",children:[(0,Te.jsx)("input",{className:"form-input",type:"text",value:(null===u||void 0===u?void 0:u.name)||"",onChange:e=>d((0,Ee.A)((0,Ee.A)({},u),{},{name:e.target.value})),placeholder:"\uc9c1\uc6d0 \uc774\ub984","aria-label":"\uc9c1\uc6d0 \uc774\ub984 \ud3b8\uc9d1: ".concat((null===u||void 0===u?void 0:u.name)||"")}),(0,Te.jsx)("select",{className:"select-input",value:(null===u||void 0===u?void 0:u.team)||"",onChange:e=>d((0,Ee.A)((0,Ee.A)({},u),{},{team:e.target.value})),"aria-label":"\uc9c1\uc6d0 \ubd80\uc11c \ud3b8\uc9d1",children:M.map(e=>(0,Te.jsx)("option",{value:e,children:e},e))}),(0,Te.jsxs)("select",{className:"select-input",value:(null===u||void 0===u?void 0:u.position)||"member",onChange:e=>d((0,Ee.A)((0,Ee.A)({},u),{},{position:e.target.value})),"aria-label":"\uc9c1\uc6d0 \uc9c1\uae09 \ud3b8\uc9d1",children:[(0,Te.jsx)("option",{value:"member",children:"\uc77c\ubc18"}),(0,Te.jsx)("option",{value:"leader",children:"\ud300\uc7a5"}),(0,Te.jsx)("option",{value:"manager",children:"\ubd80\uc7a5"})]}),(0,Te.jsxs)("div",{className:"color-selection-wrapper",children:[(0,Te.jsxs)("button",{type:"button",className:"color-select-button ".concat(null===(null===u||void 0===u?void 0:u.color)?"auto":"custom"),onClick:()=>w(!_),children:[null===(null===u||void 0===u?void 0:u.color)?(0,Te.jsx)("span",{children:"\uc0c9\uc0c1"}):(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("div",{className:"selected-color-dot",style:{backgroundColor:null===u||void 0===u?void 0:u.color}}),(0,Te.jsx)("span",{children:"\uc0c9\uc0c1"})]}),(0,Te.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),_&&(0,Te.jsxs)("div",{className:"color-picker-dropdown",children:[(0,Te.jsx)("button",{className:"color-auto-option ".concat(null===(null===u||void 0===u?void 0:u.color)?"active":""),onClick:()=>{d((0,Ee.A)((0,Ee.A)({},u),{},{color:null})),w(!1)},children:"\uc790\ub3d9"}),(0,Te.jsx)("div",{className:"color-options",children:R.map(e=>(0,Te.jsx)("button",{className:"color-dot ".concat((null===u||void 0===u?void 0:u.color)===e?"active":""),style:{backgroundColor:e},onClick:()=>{d((0,Ee.A)((0,Ee.A)({},u),{},{color:e})),w(!1)}},e))})]})]}),(0,Te.jsxs)("div",{className:"edit-actions",children:[(0,Te.jsx)("button",{className:"btn-small btn-primary",onClick:S,children:"\uc800\uc7a5"}),(0,Te.jsx)("button",{className:"btn-small btn-secondary",onClick:N,children:"\ucde8\uc18c"})]})]}):(0,Te.jsx)("div",{className:"employee-card-content",children:(0,Te.jsxs)("div",{className:"employee-info-row",children:[(0,Te.jsxs)("div",{className:"employee-name-section",children:[e.color&&(0,Te.jsx)("div",{className:"employee-color-dot",style:{backgroundColor:e.color}}),(0,Te.jsx)("span",{className:"employee-name",children:e.name})]}),(0,Te.jsxs)("div",{className:"employee-actions",children:[(0,Te.jsx)("button",{className:"btn-icon btn-edit",onClick:()=>E(e),title:"\uc218\uc815",children:(0,Te.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",children:[(0,Te.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Te.jsx)("path",{d:"m18.5 2.5 3 3L12 15H9v-3L18.5 2.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,Te.jsx)("button",{className:"btn-icon btn-delete",onClick:()=>T(e.id,e.name),title:"\uc0ad\uc81c",children:(0,Te.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",children:[(0,Te.jsx)("path",{d:"M3 6h18m-2 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Te.jsx)("path",{d:"M10 11v6m4-6v6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]})})},e.id))})]})}),"departments"===o&&(0,Te.jsx)("div",{className:"tab-content",children:(0,Te.jsxs)("div",{className:"teams-section",children:[(0,Te.jsxs)("div",{className:"add-team-form",children:[(0,Te.jsxs)("div",{className:"form-group",children:[(0,Te.jsx)("label",{htmlFor:"new-department-name",className:"form-label",children:"\uc0c8 \ubd80\uc11c \ucd94\uac00"}),(0,Te.jsx)("input",{id:"new-department-name",className:"form-input",type:"text",placeholder:"\ubd80\uc11c \uc774\ub984",value:x.name,onChange:e=>C((0,Ee.A)((0,Ee.A)({},x),{},{name:e.target.value})),onKeyPress:e=>O(e,I),"aria-label":"\uc0c8 \ubd80\uc11c \uc774\ub984 \uc785\ub825"})]}),(0,Te.jsx)("button",{className:"add-button",onClick:I,children:"\ubd80\uc11c \ucd94\uac00"})]}),(0,Te.jsx)("div",{className:"teams-list",children:(r.departments||[]).map(e=>(0,Te.jsx)("div",{className:"team-card",children:h===e.id?(0,Te.jsxs)("div",{className:"team-edit-form",children:[(0,Te.jsx)("div",{className:"form-group",children:(0,Te.jsx)("input",{className:"form-input",type:"text",value:(null===f||void 0===f?void 0:f.name)||"",onChange:e=>m((0,Ee.A)((0,Ee.A)({},f),{},{name:e.target.value})),placeholder:"\ubd80\uc11c \uc774\ub984",onKeyPress:e=>O(e,A),"aria-label":"\ubd80\uc11c \uc774\ub984 \ud3b8\uc9d1: ".concat((null===f||void 0===f?void 0:f.name)||"")})}),(0,Te.jsxs)("div",{className:"edit-actions",children:[(0,Te.jsx)("button",{className:"btn-small btn-primary",onClick:A,children:"\uc800\uc7a5"}),(0,Te.jsx)("button",{className:"btn-small btn-secondary",onClick:D,children:"\ucde8\uc18c"})]})]}):(0,Te.jsxs)("div",{className:"team-header",children:[(0,Te.jsx)("h3",{className:"team-name",children:e.name}),(0,Te.jsxs)("div",{className:"team-stats",children:[(0,Te.jsxs)("span",{className:"stat-badge",children:["\uc9c1\uc6d0 ",r.employees.filter(t=>t.team===e.name).length,"\uba85"]}),(0,Te.jsx)("button",{className:"btn-small btn-secondary",onClick:()=>P(e),children:"\uc218\uc815"}),(0,Te.jsx)("button",{className:"delete-team-button",onClick:()=>j(e.id,e.name),children:"\uc0ad\uc81c"})]})]})},e.id))})]})})]})]})}):null});gr.displayName="EmployeeManager";const vr=gr,yr=i.forwardRef((e,t)=>{let{date:n,dateString:r,isCurrentMonth:i,isSunday:s,isSaturday:o,isToday:a,holiday:l,employees:c,vacations:u,halfDayVacations:d,getConsecutiveGroupForDate:h,dayWidth:p}=e;const{actions:f}=Vt(),m=e=>{if(null!==e&&void 0!==e&&e.includes("\uc624\uc804")||null!==e&&void 0!==e&&e.includes("\uc624\ud6c4"))return e;switch(e){case"\uc5f0\ucc28":return"\uc5f0\ucc28";case"\ud2b9\ubcc4\ud734\uac00":return"\ud2b9\ubcc4";case"\ubcd1\uac00":return"\ubcd1\uac00";case"\uc5c5\ubb34":return"\uc5c5\ubb34";default:return e}},g=n.getDate(),v=l,y=l?l.name:"",b=(nr(n),v?4:5),_=u.length>b?u.length-b:0,w=["calendar-day",!i&&"other-month",a&&"today",s&&"sunday",o&&"saturday",v&&"holiday",u.length>0&&"has-vacation"].filter(Boolean).join(" "),x=(e,t)=>{e.stopPropagation();const i=c.find(e=>e.id===t.employeeId),s=h(n,t.employeeId);if("\uc5c5\ubb34"===t.type&&t.description){const e="".concat((null===i||void 0===i?void 0:i.name)||"\uc54c \uc218 \uc5c6\uc74c","\ub2d8\uc758 \uc5c5\ubb34 \uc77c\uc815\n\n\ud83d\udccb \uc5c5\ubb34 \ub0b4\uc6a9: ").concat(t.description,"\n\n\uc218\uc815\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");window.confirm(e)&&f.openModal("editVacation",{date:r,vacation:t,employee:i,consecutiveGroup:s})}else f.openModal("editVacation",{date:r,vacation:t,employee:i,consecutiveGroup:s})},C=e=>{const t=c.find(t=>t.id===e);return t?t.color||"#6B7280":"#ff6b6b"},k=(e,t,r)=>{const i=C(e.employeeId),s=c.find(t=>t.id===e.employeeId),o=h(n,e.employeeId);if(o&&o.isConsecutive){const t=o.vacations.find(e=>e.date===o.startDate);if(t&&["\uc624\uc804","\uc624\ud6c4"].includes(t.type)&&e.date===o.startDate&&e.type===t.type)return null}return(0,Te.jsx)("div",{className:"half-vacation-bar ".concat("\uc624\uc804"===e.type?"morning":"afternoon"),style:{backgroundColor:i,borderColor:i,justifyContent:"\uc624\uc804"===e.type?"flex-start":"flex-end",textAlign:"\uc624\uc804"===e.type?"left":"right"},onClick:t=>x(t,e),title:"".concat(s?s.name:"\uc54c \uc218 \uc5c6\uc74c"," - ").concat(e.type,"\ubc18\ucc28"),children:(0,Te.jsx)("span",{className:"half-vacation-text",children:s?s.name:"\uc54c \uc218 \uc5c6\uc74c"})},"".concat(e.type,"-").concat(e.employeeId,"-").concat(t))},E=(()=>{const e=u.filter(e=>!["\uc624\uc804","\uc624\ud6c4"].includes(e.type)).length,t=d.length>0?1:0,n=e+t,r=40+22*Math.min(n,5)+20*t+12,i=n>5?20:0;return Math.max(100,r+i)})();return(0,Te.jsxs)("div",{className:w,onClick:()=>{if(console.log("[CalendarDay] \ud83d\uddb1\ufe0f \ud074\ub9ad \uc774\ubca4\ud2b8 \ubc1c\uc0dd:",{dateString:r,isCurrentMonth:i,vacationsCount:u.length,halfDayVacationsCount:d.length}),!i)return void console.log("[CalendarDay] \u274c \ud604\uc7ac \uc6d4\uc774 \uc544\ub2c8\ubbc0\ub85c \ud074\ub9ad \ubb34\uc2dc");if(!f||!f.openModal)return void console.error("[CalendarDay] \u274c actions.openModal\uc774 \uc5c6\uc2b5\ub2c8\ub2e4!",f);console.log("[CalendarDay] \u2705 \ud074\ub9ad \ucc98\ub9ac \uc2dc\uc791...");let e=[...u,...d];if(0===e.length&&c.forEach(t=>{const i=h(n,t.id);if(i&&i.isConsecutive){const t=new Date(i.startDate),n=new Date(i.endDate),s=new Date(r);if(s>=t&&s<=n){const t=i.vacations.find(e=>e.date===r);t&&e.push(t)}}}),console.log("[CalendarDay] \ud83d\udcca \ud734\uac00 \ub370\uc774\ud130 \ubd84\uc11d:",{totalVacations:e.length,vacationDetails:e.map(e=>({id:e.id,employeeId:e.employeeId,type:e.type}))}),e.length>0){console.log("[CalendarDay] \ud83d\udcc5 \uc77c\uc790\ubcc4 \ud734\uac00 \ubaa8\ub2ec \uc5f4\uae30...");try{f.openModal("dayVacations",{date:r,vacations:e,employees:c}),console.log("[CalendarDay] \u2705 \uc77c\uc790\ubcc4 \ud734\uac00 \ubaa8\ub2ec \uc624\ud508 \uc644\ub8cc")}catch(t){console.error("[CalendarDay] \u274c \uc77c\uc790\ubcc4 \ud734\uac00 \ubaa8\ub2ec \uc624\ud508 \uc2e4\ud328:",t)}}else{console.log("[CalendarDay] \u2795 \ube48 \uc77c\uc790 \ud074\ub9ad - \ud734\uac00 \ucd94\uac00 \ubaa8\ub2ec \uc5f4\uae30:",{dateString:r,actualDate:n.toISOString().split("T")[0],isCurrentMonth:i});try{f.openModal("addVacation",{date:r,employee:null,type:"\uc5f0\ucc28"}),console.log("[CalendarDay] \u2705 \ud734\uac00 \ucd94\uac00 \ubaa8\ub2ec \uc624\ud508 \uc644\ub8cc")}catch(t){console.error("[CalendarDay] \u274c \ud734\uac00 \ucd94\uac00 \ubaa8\ub2ec \uc624\ud508 \uc2e4\ud328:",t)}}},title:v?y:"",style:{minHeight:"".concat(E,"px")},ref:t,children:[(0,Te.jsxs)("div",{className:"day-header",children:[(0,Te.jsx)("span",{className:"day-number",children:g}),v&&(0,Te.jsx)("span",{className:"holiday-name",children:y}),_>0&&(0,Te.jsxs)("span",{className:"header-overflow-indicator",style:{color:"#5f6368",background:"rgba(95, 99, 104, 0.1)",padding:"1px 4px",borderRadius:"8px",cursor:"pointer",fontWeight:"500",border:"1px solid rgba(95, 99, 104, 0.2)",marginLeft:"4px",transition:"all 0.2s ease"},onClick:e=>{e.stopPropagation();const t=u.filter(e=>["\uc624\uc804","\uc624\ud6c4"].includes(e.type)),n=[...u,...t];f.openModal("dayVacations",{date:r,vacations:n,employees:c})},onMouseEnter:e=>{e.target.style.backgroundColor="rgba(95, 99, 104, 0.15)",e.target.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.target.style.backgroundColor="rgba(95, 99, 104, 0.1)",e.target.style.transform="translateY(0)"},title:"".concat(_,"\uac1c\uc758 \ucd94\uac00 \ud734\uac00\uac00 \uc788\uc2b5\ub2c8\ub2e4. \ud074\ub9ad\ud558\uc5ec \ubaa8\ub450 \ubcf4\uae30"),children:["+",_]})]}),(0,Te.jsxs)("div",{className:"day-content",children:[(0,Te.jsx)("div",{className:"full-day-vacations",children:(()=>{let e=u.filter(e=>!["\uc624\uc804","\uc624\ud6c4"].includes(e.type));const t=u.filter(e=>["\uc624\uc804","\uc624\ud6c4"].includes(e.type));t.forEach(t=>{const i=h(n,t.employeeId);if(i&&i.isConsecutive){i.startDate===r&&!e.some(e=>e.employeeId===t.employeeId)&&e.push((0,Ee.A)((0,Ee.A)({},t),{},{type:"\uc5f0\ud734",isVirtualForConsecutive:!0}))}});const i=e.sort((e,t)=>(e.trackIndex||0)-(t.trackIndex||0)),s=v?4:5,o=i.slice(0,s),a=(i.length,o.map(e=>((e,t)=>{const i=C(e.employeeId),s=(e=>{switch(e){case"\uc5f0\ucc28":default:return"vacation-annual";case"\uc624\uc804":return"vacation-morning";case"\uc624\ud6c4":return"vacation-afternoon";case"\ud2b9\ubcc4":return"vacation-special";case"\ubcd1\uac00":return"vacation-sick";case"\uc5c5\ubb34":return"vacation-work"}})(e.type),o=c.find(t=>t.id===e.employeeId),a=h(n,e.employeeId),l=a&&a.startDate===r;if(a&&a.endDate,a&&a.isConsecutive){if(!a.vacations||0===a.vacations.length)return null;const t=a.vacations.some(t=>t.date===r&&t.employeeId===e.employeeId);if(!t)return null;if(!l)return null}if((!a||!a.isConsecutive)&&(e.isVirtualForConsecutive||e.isVirtualForConsecutiveRender))return null;let u={backgroundColor:i,border:"none",boxShadow:"none",fontSize:"11px",fontWeight:"500",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},d={},f="";if(a&&a.isConsecutive){const r=h(n,e.employeeId);if(r&&r.isConsecutive){const e=new Date(a.startDate),n=new Date(a.endDate),r=a.vacations.find(e=>e.date===a.startDate),i=a.vacations.find(e=>e.date===a.endDate),s=["\uc624\uc804","\uc624\ud6c4"].includes(null===r||void 0===r?void 0:r.type),o=["\uc624\uc804","\uc624\ud6c4"].includes(null===i||void 0===i?void 0:i.type),l=s&&"\uc624\ud6c4"===r.type?.5:0,c=o&&"\uc624\uc804"===i.type?.5:1,u=(n.getTime()-e.getTime())/864e5+1-1+c-l;if(window.innerWidth<=768)d={position:"absolute",left:"0px",top:"".concat(22*t+6,"px"),zIndex:20,width:"100%",height:"18px",overflow:"hidden",borderRadius:"8px"};else{const e=p&&p>0?p:140,n=u*e,r=22*t+6;d={position:"absolute",left:"".concat(l*e,"px"),top:"".concat(r,"px"),zIndex:20,width:"".concat(n,"px"),height:"18px",overflow:"visible",borderRadius:"4px"}}f="consecutive-bar"}else d={position:"absolute",left:"0px",top:"".concat(22*t+6,"px"),zIndex:15,width:"100%",height:"18px",borderRadius:"8px"}}else d={position:"absolute",left:"0px",top:"".concat(22*t+6,"px"),zIndex:15,width:"100%",height:"18px",borderRadius:"4px"};const g=a&&a.isConsecutive,v=(0,Te.jsx)("div",{className:"vacation-bar ".concat(s," ").concat(f),style:(0,Ee.A)((0,Ee.A)({},u),d),onClick:t=>{if((e.isVirtualForConsecutive||e.isVirtualForConsecutiveRender)&&a&&a.vacations.length>0){const e=a.vacations.find(e=>e.date===r);if(e)return void x(t,e)}x(t,e)},title:"".concat(o?o.name:"\uc54c \uc218 \uc5c6\uc74c"," - ").concat(e.isVirtualForConsecutive||e.isVirtualForConsecutiveRender?"\uc5f0\ud734":e.type).concat(e.description?" (".concat(e.description,")"):""),children:g?(0,Te.jsxs)("div",{className:"google-vacation-content",style:{padding:"2px 6px",color:"white",fontSize:"11px",fontWeight:"500",lineHeight:"14px",textAlign:"center"},children:[o?o.name:"\uc54c \uc218 \uc5c6\uc74c"," ",new Date(a.startDate).getDate(),"\uc77c~",new Date(a.endDate).getDate(),"\uc77c \uc5f0\ud734"]}):(0,Te.jsxs)("div",{className:"google-vacation-content",style:{padding:"2px 6px",color:"white",fontSize:"11px",fontWeight:"500",lineHeight:"14px",textAlign:"center"},children:[o?o.name:"\uc54c \uc218 \uc5c6\uc74c"," ",m(e.type)]})},"vacation-".concat(e.employeeId,"-").concat(e.type,"-").concat(t));return v})(e,e.trackIndex||0)).filter(Boolean));return a})()}),(()=>{const e=d.filter(e=>"\uc624\uc804"===e.type),t=d.filter(e=>"\uc624\ud6c4"===e.type),i=[...e,...t].some(e=>{const t=h(n,e.employeeId);if(!t||!t.isConsecutive)return!1;const i=t.vacations.find(e=>e.date===t.startDate),s=i&&["\uc624\uc804","\uc624\ud6c4"].includes(i.type),o=t.startDate===r;return s&&o}),s=u.filter(e=>!["\uc624\uc804","\uc624\ud6c4"].includes(e.type));let o,a=-1;s.forEach(e=>{a=Math.max(a,e.trackIndex||0)}),o=22*(a+1)+6;const l=i?18:10;return 0===e.length&&0===t.length?null:(0,Te.jsxs)("div",{className:"half-day-container",style:{position:"absolute",top:"".concat(o,"px"),left:"0px",right:"0px",width:"100%",zIndex:l,overflow:"hidden"},children:[(0,Te.jsx)("div",{className:"morning-half",children:e.map((e,n)=>k(e,n,t.length)).filter(Boolean)}),(0,Te.jsx)("div",{className:"afternoon-half",children:t.map((t,n)=>k(t,n,e.length)).filter(Boolean)})]})})(),i&&0===u.length&&(0,Te.jsx)("div",{className:"add-vacation-hint",children:(0,Te.jsx)("div",{className:"add-vacation-icon",children:(0,Te.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Te.jsx)("path",{d:"M12 5V19M5 12H19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})})]})]})}),br=yr,_r=e=>{let{width:t="100%",height:n="16px",variant:r="text",className:i="",count:s=1}=e;const o="skeleton skeleton-".concat(r," ").concat(i);return s>1?(0,Te.jsx)("div",{className:"skeleton-group",children:Array.from({length:s},(e,r)=>(0,Te.jsx)("div",{className:o,style:{width:t,height:n}},r))}):(0,Te.jsx)("div",{className:o,style:{width:t,height:n}})},wr=()=>(0,Te.jsxs)("div",{className:"calendar-skeleton",children:[(0,Te.jsxs)("div",{className:"calendar-header-skeleton",children:[(0,Te.jsx)(_r,{width:"120px",height:"24px"}),(0,Te.jsx)(_r,{width:"200px",height:"20px"})]}),(0,Te.jsx)("div",{className:"calendar-weekdays-skeleton",children:Array.from({length:7},(e,t)=>(0,Te.jsx)(_r,{width:"100%",height:"16px"},t))}),(0,Te.jsx)("div",{className:"calendar-grid-skeleton",children:Array.from({length:35},(e,t)=>(0,Te.jsxs)("div",{className:"calendar-day-skeleton",children:[(0,Te.jsx)(_r,{width:"20px",height:"20px",variant:"circular"}),(0,Te.jsx)("div",{className:"vacation-bars-skeleton",children:(0,Te.jsx)(_r,{width:"80%",height:"12px",count:Math.floor(3*Math.random())})})]},t))})]});const xr=new class{constructor(){this.cache=new Map,this.FREE_API_BASE_URL="https://holidays.dist.be",this.GOV_API_URL="https://apis.data.go.kr/B090041/openapi/service/SpcdeInfoService/getRestDeInfo",this.SERVICE_KEY="7BZDblK8NIBj32BvDQ5jWi/YyHJJfhDHESiBYljCaocAPUQZc8IG5ltkJvlVR8J1AinP5izo2WA2F68xWyUTKA=="}async getHolidays(e){if(this.cache.has(e))return this.cache.get(e);try{console.log("\ud83d\udcc5 ".concat(e,"\ub144 \uacf5\ud734\uc77c \ub370\uc774\ud130 \uc694\uccad \uc911... (\uc815\ubd80 API \uc6b0\uc120)"));let t=await this.getHolidaysFromGovAPI(e);return 0===t.length&&(console.log("\ud83d\udd04 \uc815\ubd80 API \uc2e4\ud328, \ubb34\ub8cc API\ub85c \uc7ac\uc2dc\ub3c4..."),t=await this.getHolidaysFromFreeAPI(e)),0===t.length&&(console.log("\ud83d\udd04 \ubaa8\ub4e0 API \uc2e4\ud328, \uae30\ubcf8 \ub370\uc774\ud130 \uc0ac\uc6a9"),t=this.getFallbackHolidays(e)),console.log("\u2705 ".concat(e,"\ub144 \uacf5\ud734\uc77c ").concat(t.length,"\uac1c \ub85c\ub4dc\ub428:"),t.map(e=>e.name).join(", ")),this.cache.set(e,t),t}catch(t){console.error("\u274c ".concat(e,"\ub144 \uacf5\ud734\uc77c \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:"),t);const n=this.getFallbackHolidays(e);return this.cache.set(e,n),n}}async getHolidaysFromGovAPI(e){try{const r=[];for(let i=1;i<=12;i++){const s=i.toString().padStart(2,"0"),o="".concat(this.GOV_API_URL,"?serviceKey=").concat(this.SERVICE_KEY,"&solYear=").concat(e,"&solMonth=").concat(s),a=await fetch(o);if(!a.ok)throw new Error("HTTP error! status: ".concat(a.status));const l=await a.text(),c=new DOMParser,u=c.parseFromString(l,"text/xml").getElementsByTagName("item");for(let e of u){var t,n;const i=null===(t=e.getElementsByTagName("dateName")[0])||void 0===t?void 0:t.textContent,s=null===(n=e.getElementsByTagName("locdate")[0])||void 0===n?void 0:n.textContent;if(i&&s){const e="".concat(s.substring(0,4),"-").concat(s.substring(4,6),"-").concat(s.substring(6,8));r.push({date:e,name:i,kind:1,remarks:null})}}}return r}catch(r){return console.error("\uc815\ubd80 API \ud638\ucd9c \uc2e4\ud328:",r),[]}}async getHolidaysFromFreeAPI(e){try{const t=await fetch("".concat(this.FREE_API_BASE_URL,"/").concat(e,".json"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return(await t.json()).filter(e=>!0===e.holiday).map(e=>({date:e.date,name:e.name,kind:e.kind,remarks:e.remarks}))}catch(t){return console.error("\ubb34\ub8cc API \ud638\ucd9c \uc2e4\ud328:",t),[]}}async isHoliday(e){const t=new Date(e),n=t.getFullYear(),r=this.formatDate(t);return(await this.getHolidays(n)).find(e=>e.date===r)||null}async getHolidaysForMonth(e,t){const n=await this.getHolidays(e),r=t.toString().padStart(2,"0");return n.filter(t=>t.date.startsWith("".concat(e,"-").concat(r)))}async preloadHolidays(e){const t=e.map(e=>this.getHolidays(e));await Promise.allSettled(t),console.log("\ud83d\ude80 ".concat(e.length,"\uac1c \uc5f0\ub3c4 \uacf5\ud734\uc77c \ub370\uc774\ud130 \ud504\ub9ac\ub85c\ub4dc \uc644\ub8cc"))}clearCache(){this.cache.clear(),console.log("\ud83d\uddd1\ufe0f \uacf5\ud734\uc77c \uce90\uc2dc \ucd08\uae30\ud654\ub428")}formatDate(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)}getFallbackHolidays(e){console.log("\ud83d\udd04 ".concat(e,"\ub144 \uae30\ubcf8 \uacf5\ud734\uc77c \ub370\uc774\ud130 \uc0ac\uc6a9"));return[...[{date:"".concat(e,"-01-01"),name:"\uc2e0\uc815",kind:1},{date:"".concat(e,"-03-01"),name:"\uc0bc\uc77c\uc808",kind:1},{date:"".concat(e,"-05-05"),name:"\uc5b4\ub9b0\uc774\ub0a0",kind:1},{date:"".concat(e,"-06-06"),name:"\ud604\ucda9\uc77c",kind:1},{date:"".concat(e,"-08-15"),name:"\uad11\ubcf5\uc808",kind:1},{date:"".concat(e,"-10-03"),name:"\uac1c\ucc9c\uc808",kind:1},{date:"".concat(e,"-10-09"),name:"\ud55c\uae00\ub0a0",kind:1},{date:"".concat(e,"-12-25"),name:"\ud06c\ub9ac\uc2a4\ub9c8\uc2a4",kind:1}],...2025===e?[{date:"2025-01-28",name:"\uc124\ub0a0 \uc804\ub0a0",kind:1},{date:"2025-01-29",name:"\uc124\ub0a0",kind:1},{date:"2025-01-30",name:"\uc124\ub0a0 \ub2e4\uc74c\ub0a0",kind:1},{date:"2025-05-05",name:"\uc11d\uac00\ud0c4\uc2e0\uc77c",kind:1},{date:"2025-10-05",name:"\ucd94\uc11d \uc5f0\ud734",kind:1},{date:"2025-10-06",name:"\ucd94\uc11d",kind:1},{date:"2025-10-07",name:"\ucd94\uc11d \uc5f0\ud734",kind:1},{date:"2025-10-08",name:"\ucd94\uc11d \ub300\uccb4\uacf5\ud734\uc77c",kind:1}]:[]]}getHolidayColor(e){switch(e){case 1:default:return"#ff4757";case 2:return"#ffa502";case 3:return"#3742fa";case 4:return"#7bed9f"}}getHolidayKindName(e){switch(e){case 1:return"\uacf5\ud734\uc77c";case 2:return"\uae30\ub150\uc77c";case 3:return"24\uc808\uae30";case 4:return"\uc7a1\uc808";default:return"\uae30\ud0c0"}}},Cr=xr,kr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{minSwipeDistance:n=50,preventDefaultTouchmoveEvent:r=!1}=t,s=(0,i.useRef)(null),o=(0,i.useRef)(null),a=(0,i.useRef)(null),l=(0,i.useRef)(null);return{onTouchStart:e=>{s.current=e.touches[0].clientX,o.current=e.touches[0].clientY,console.log("[useSwipe] \ud130\uce58 \uc2dc\uc791:",{x:s.current,y:o.current,target:e.target.className})},onTouchMove:e=>{r&&e.preventDefault(),console.log("[useSwipe] \ud130\uce58 \uc774\ub3d9:",{x:e.touches[0].clientX,y:e.touches[0].clientY})},onTouchEnd:t=>{if(!s.current||!o.current)return void console.log("[useSwipe] \ud130\uce58 \uc2dc\uc791 \uc88c\ud45c \uc5c6\uc74c");a.current=t.changedTouches[0].clientX,l.current=t.changedTouches[0].clientY;const r=s.current-a.current,i=o.current-l.current,c=Math.abs(r)>Math.abs(i);var u,d;(console.log("[useSwipe] \ud130\uce58 \uc885\ub8cc:",{startX:s.current,endX:a.current,distanceX:r,distanceY:i,isHorizontal:c,minDistance:n,willTrigger:c&&Math.abs(r)>n}),c&&Math.abs(r)>n)?r>0?(console.log("[useSwipe] \u2705 \uc67c\ucabd \uc2a4\uc640\uc774\ud504 \uac10\uc9c0\ub428"),null===(u=e.onSwipeLeft)||void 0===u||u.call(e)):(console.log("[useSwipe] \u2705 \uc624\ub978\ucabd \uc2a4\uc640\uc774\ud504 \uac10\uc9c0\ub428"),null===(d=e.onSwipeRight)||void 0===d||d.call(e)):console.log("[useSwipe] \u274c \uc2a4\uc640\uc774\ud504 \uc870\uac74 \ubbf8\ucda9\uc871");s.current=null,o.current=null,a.current=null,l.current=null}}},Er=e=>{let{date:t,isCurrentMonth:n,isToday:r,dayOfWeek:i,vacations:s,holiday:o,getConsecutiveGroupForDate:a,employees:l}=e;const{actions:c}=Vt(),u=t.getDate(),d=e=>{if(null!==e&&void 0!==e&&e.includes("\uc624\uc804")||null!==e&&void 0!==e&&e.includes("\uc624\ud6c4"))return e;switch(e){case"\uc5f0\ucc28":return"\uc5f0\ucc28";case"\ud2b9\ubcc4\ud734\uac00":return"\ud2b9\ubcc4";case"\ubcd1\uac00":return"\ubcd1\uac00";case"\uc5c5\ubb34":return"\uc5c5\ubb34";default:return e}},h=(()=>{const e=s.fullDay.filter(e=>!["\uc624\uc804","\uc624\ud6c4"].includes(e.type)).length,t=s.halfDay.length>0?1:0,n=20+18*(e+t)+16*t+8;return Math.max(85,n)})(),p=e=>{const t=l.find(t=>t.id===e);return t?t.color||"#4285f4":"#6B7280"},f=["mobile-calendar-day",!n&&"other-month",r&&"today",0===i&&"sunday",6===i&&"saturday",o&&"holiday"].filter(Boolean).join(" "),m=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)},g=o?4:5,v=s.fullDay.length>g?s.fullDay.length-g:0;return(0,Te.jsxs)("div",{className:f,onClick:()=>{if(!c||!c.openModal)return void console.error("[MobileCalendarDay] \u274c actions.openModal\uc774 \uc5c6\uc2b5\ub2c8\ub2e4!",c);if(!n){const e=t.getFullYear(),n=t.getMonth();return c.setSelectedDate(e,n),void setTimeout(()=>{const e=m(t),n=[...s.fullDay,...s.halfDay];n.length>0?c.openModal("dayVacations",{date:e,vacations:n,employees:l}):c.openModal("addVacation",{date:e,employee:null,type:"\uc5f0\ucc28"})},100)}const e=m(t),r=[...s.fullDay,...s.halfDay];try{c.openModal("dayVacations",{date:e,vacations:r,employees:l})}catch(i){console.error("[MobileCalendarDay] \u274c \uc77c\uc790\ubcc4 \ud734\uac00 \ubaa8\ub2ec \uc624\ud508 \uc2e4\ud328:",i)}},style:{minHeight:"".concat(h,"px")},children:[(0,Te.jsxs)("div",{className:"mobile-day-header",children:[(0,Te.jsx)("div",{className:"mobile-day-number",children:u}),v>0&&(0,Te.jsxs)("span",{className:"mobile-header-overflow",onClick:e=>{e.stopPropagation();const n=s.halfDay||[],r=[...s.fullDay,...n];c.openModal("dayVacations",{date:m(t),vacations:r,employees:l})},title:"".concat(v,"\uac1c\uc758 \ucd94\uac00 \ud734\uac00\uac00 \uc788\uc2b5\ub2c8\ub2e4. \ud074\ub9ad\ud558\uc5ec \ubaa8\ub450 \ubcf4\uae30"),children:["+",v]})]}),o&&(0,Te.jsx)("div",{className:"mobile-holiday-name",children:o.name}),(0,Te.jsxs)("div",{className:"mobile-vacations",children:[(()=>{const e=[],n=document.querySelector(".mobile-calendar-grid"),r=(n?n.clientWidth-6:350)/(4.4+1.2+1.2+.8),i=e=>0===e||6===e?.8*r:1.2*r,l=t.getDay(),c=i(l),u=o?4:5,h=s.fullDay.slice(0,u);s.fullDay.length;return h.forEach((n,r)=>{const s=p(n.employeeId),o=a(t,n.employeeId),l=o&&o.startDate===m(t);o&&(o.endDate,m(t));if(o&&o.isConsecutive){if(!o.vacations||0===o.vacations.length)return;const e=o.vacations.some(e=>e.date===m(t)&&e.employeeId===n.employeeId);if(!e)return;if(!l)return}if((!o||!o.isConsecutive)&&(n.isVirtualForConsecutive||n.isVirtualForConsecutiveRender))return;let u={backgroundColor:s,borderLeftColor:s,boxShadow:"0 0 0 1px ".concat(s,"40")},h="100%",f={},g="";if(o&&o.isConsecutive){const e=new Date(o.startDate),t=new Date(o.endDate),r=o.vacations.find(e=>e.date===o.startDate),s=o.vacations.find(e=>e.date===o.endDate),a=["\uc624\uc804","\uc624\ud6c4"].includes(null===r||void 0===r?void 0:r.type),l=["\uc624\uc804","\uc624\ud6c4"].includes(null===s||void 0===s?void 0:s.type),u=a&&"\uc624\ud6c4"===r.type?.5:0,d=l&&"\uc624\uc804"===s.type?.5:1,p=(t.getTime()-e.getTime())/864e5+1-1+d-u;Math.max(p,1);let m=0,v=new Date(o.startDate);const y=new Date(o.endDate);for(;v<=y;){const e=v.getDay();m+=i(e),v.setDate(v.getDate()+1)}const b=m-u*i(new Date(o.startDate).getDay())-(1-d)*i(new Date(o.endDate).getDay());h="".concat(Math.max(b,c),"px");const _=u*i(new Date(o.startDate).getDay()),w=18*n.trackIndex+6;f={position:"absolute",left:"".concat(_,"px"),top:"".concat(w,"px"),zIndex:20,width:h,height:"16px",overflow:"visible",borderRadius:"4px",pointerEvents:"auto"},g="consecutive-bar"}else{const e=18*n.trackIndex+6;f={position:"absolute",left:"0px",top:"".concat(e,"px"),zIndex:15,width:"100%",height:"16px",borderRadius:"4px"}}const v=o&&o.isConsecutive;e.push((0,Te.jsx)("div",{className:"mobile-vacation-bar ".concat(g),style:(0,Ee.A)((0,Ee.A)((0,Ee.A)({},u),f),{},{pointerEvents:"none"}),title:"".concat(n.employeeName," - ").concat(n.isVirtualForConsecutive||n.isVirtualForConsecutiveRender?"\uc5f0\ud734":n.type).concat(n.description?" (".concat(n.description,")"):""),children:v?(0,Te.jsx)("div",{className:"consecutive-vacation-content",children:(0,Te.jsxs)("span",{className:"mobile-vacation-text",children:[n.employeeName," ",new Date(o.startDate).getDate(),"\uc77c ~ ",new Date(o.endDate).getDate(),"\uc77c \uc5f0\ud734"]})}):(0,Te.jsx)("div",{className:"single-vacation-content",children:(0,Te.jsxs)("span",{className:"mobile-vacation-text",children:[n.employeeName," ",d(n.type)]})})},"vacation-".concat(n.employeeId,"-").concat(n.type,"-").concat(r)))}),e})(),(()=>{const e=s.halfDay.filter(e=>"\uc624\uc804"===e.type),n=s.halfDay.filter(e=>"\uc624\ud6c4"===e.type),r=[...e,...n].some(e=>{const n=a(t,e.employeeId);if(!n||!n.isConsecutive)return!1;const r=n.vacations.find(e=>e.date===n.startDate),i=r&&["\uc624\uc804","\uc624\ud6c4"].includes(r.type),s=n.startDate===m(t);return i&&s}),i=(s.fullDay.filter(e=>{if(["\uc624\uc804","\uc624\ud6c4"].includes(e.type))return!1;const n=a(t,e.employeeId);if(n&&n.isConsecutive){const e=n.vacations.find(e=>e.date===n.startDate);if(e&&["\uc624\uc804","\uc624\ud6c4"].includes(e.type))return!1}return!0}).length,18*s.fullDay.length+6),o=r?18:10;return 0===e.length&&0===n.length?null:(0,Te.jsxs)("div",{className:"mobile-half-day-container",style:{position:"absolute",top:"".concat(i,"px"),left:"0px",width:"100%",zIndex:o,display:"flex",flexDirection:"row",gap:"0px"},children:[(0,Te.jsx)("div",{className:"mobile-morning-half",style:{width:"50%",display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:e.map((e,n)=>{const r=p(e.employeeId),i=a(t,e.employeeId);if(i&&i.isConsecutive){const t=i.vacations.find(e=>e.date===i.startDate);if(t&&["\uc624\uc804","\uc624\ud6c4"].includes(t.type)&&e.date===i.startDate&&e.type===t.type)return null}return(0,Te.jsx)("div",{className:"mobile-half-day-item mobile-morning-item",style:{backgroundColor:r,borderColor:r,width:"100%",height:"16px",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"flex-start",fontSize:"10px",fontWeight:"600",color:"white",cursor:"pointer",paddingLeft:"4px",marginBottom:"2px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:"".concat(e.employeeName,": ").concat(e.type,"\ubc18\ucc28"),children:e.employeeName},"morning-".concat(e.employeeId,"-").concat(n))}).filter(Boolean)}),(0,Te.jsx)("div",{className:"mobile-afternoon-half",style:{width:"50%",display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:n.map((e,n)=>{const r=p(e.employeeId),i=a(t,e.employeeId);if(i&&i.isConsecutive){const t=i.vacations.find(e=>e.date===i.startDate);if(t&&["\uc624\uc804","\uc624\ud6c4"].includes(t.type)&&e.date===i.startDate&&e.type===t.type)return null}return(0,Te.jsx)("div",{className:"mobile-half-day-item mobile-afternoon-item",style:{backgroundColor:r,borderColor:r,width:"100%",height:"16px",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"10px",fontWeight:"600",color:"white",cursor:"pointer",paddingRight:"4px",marginBottom:"2px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:"".concat(e.employeeName,": ").concat(e.type,"\ubc18\ucc28"),children:e.employeeName},"afternoon-".concat(e.employeeId,"-").concat(n))}).filter(Boolean)})]})})()]})]})},Sr=e=>{let{holidays:t,filteredEmployees:n}=e;const{state:r,actions:s}=Vt(),{selectedYear:o=(new Date).getFullYear(),selectedMonth:a=(new Date).getMonth(),vacations:l=[],employees:c=[]}=r,[u,d]=(0,i.useState)(!0),h=(0,i.useCallback)(()=>{console.log("[\ubaa8\ubc14\uc77c \uc2a4\uc640\uc774\ud504] \uc774\uc804 \ub2ec\ub85c \uc774\ub3d9 \uc2e4\ud589"),0===a?s.setSelectedDate(o-1,11):s.setSelectedDate(o,a-1)},[o,a,s]),p=(0,i.useCallback)(()=>{console.log("[\ubaa8\ubc14\uc77c \uc2a4\uc640\uc774\ud504] \ub2e4\uc74c \ub2ec\ub85c \uc774\ub3d9 \uc2e4\ud589"),11===a?s.setSelectedDate(o+1,0):s.setSelectedDate(o,a+1)},[o,a,s]),f=kr({onSwipeLeft:()=>{console.log("[\ubaa8\ubc14\uc77c \uc2a4\uc640\uc774\ud504] \u2705 \ub2e4\uc74c \ub2ec\ub85c \uc774\ub3d9"),p()},onSwipeRight:()=>{console.log("[\ubaa8\ubc14\uc77c \uc2a4\uc640\uc774\ud504] \u2705 \uc774\uc804 \ub2ec\ub85c \uc774\ub3d9"),h()}},{minSwipeDistance:50,preventDefaultTouchmoveEvent:!1});(0,i.useEffect)(()=>{console.log("[\ubaa8\ubc14\uc77c \uc2a4\uc640\uc774\ud504] \ud578\ub4e4\ub7ec \uc0c1\ud0dc:",{onTouchStart:!!f.onTouchStart,onTouchMove:!!f.onTouchMove,onTouchEnd:!!f.onTouchEnd,containerElement:!!document.querySelector(".mobile-calendar-container")})},[f]),(0,i.useEffect)(()=>{const e=setTimeout(()=>{d(!1)},300);return()=>clearTimeout(e)},[o,a,c,l]);const m=new Date(o,a),g=m.getFullYear(),v=m.getMonth(),y=new Date(g,v,1),b=new Date(g,v+1,0),_=new Date(y);_.setDate(y.getDate()-y.getDay());const w=new Date(b);w.setDate(b.getDate()+(6-b.getDay()));const x=[],C=new Date(_);for(;C<=w;)x.push(new Date(C)),C.setDate(C.getDate()+1);const k=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)},E=(0,i.useMemo)(()=>{const e=[];return n.forEach(t=>{const n=l.filter(e=>e.employeeId===t.id).sort((e,t)=>new Date(e.date)-new Date(t.date));let r=[],i=null;n.forEach((e,s)=>{const o=new Date(e.date);if("\uc5c5\ubb34"!==e.type){if(i){const n=new Date(i.endDate),s=new Date(n);s.setDate(s.getDate()+1),o.getTime()===s.getTime()?(i.endDate=e.date,i.vacations.push(e),i.isConsecutive=!0):(r.push((0,Ee.A)((0,Ee.A)({},i),{},{vacations:[...i.vacations]})),i={employeeId:t.id,employeeName:t.name,startDate:e.date,endDate:e.date,type:e.type,vacations:[e],isConsecutive:!1})}else i={employeeId:t.id,employeeName:t.name,startDate:e.date,endDate:e.date,type:e.type,vacations:[e],isConsecutive:!1};s===n.length-1&&i&&r.push((0,Ee.A)((0,Ee.A)({},i),{},{vacations:[...i.vacations]}))}else r.push({employeeId:t.id,employeeName:t.name,startDate:e.date,endDate:e.date,type:e.type,vacations:[e],isConsecutive:!1})}),r.forEach(t=>{t.vacations.length>1&&t.isConsecutive&&e.push(t)})}),e},[l,n,c]),S=(e,t)=>{const n=k(e);return E.find(e=>e&&e.employeeId===t&&n>=e.startDate&&n<=e.endDate)};return u?(0,Te.jsx)(wr,{}):(0,Te.jsxs)("div",(0,Ee.A)((0,Ee.A)({className:"mobile-calendar-container"},f),{},{children:[(0,Te.jsx)("div",{className:"mobile-weekdays",children:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map((e,t)=>(0,Te.jsx)("div",{className:"mobile-weekday ".concat(0===t?"sunday":""," ").concat(6===t?"saturday":""),children:e},e))}),(0,Te.jsx)("div",{className:"mobile-calendar-grid",children:x.map((e,r)=>{const i=e.getMonth()===v,s=e.toDateString()===(new Date).toDateString(),o=e.getDay(),a=(e=>{const t=k(e),r=n.map(e=>e.id);let i=l.filter(e=>e.date===t&&r.includes(e.employeeId)),s=i.filter(e=>!["\uc624\uc804","\uc624\ud6c4"].includes(e.type));const o=i.filter(e=>["\uc624\uc804","\uc624\ud6c4"].includes(e.type));o.forEach(n=>{const r=S(e,n.employeeId);if(r&&r.isConsecutive){const e=r.startDate===t,i=r.vacations.every(e=>l.some(t=>t.id===e.id&&t.date===e.date&&t.employeeId===e.employeeId)),o=r.vacations.length>=2,a=s.some(e=>e.employeeId===n.employeeId);e&&i&&o&&!a&&s.push((0,Ee.A)((0,Ee.A)({},n),{},{type:"\uc5f0\ud734",isVirtualForConsecutiveRender:!0}))}}),s.sort((t,n)=>{const r=S(e,t.employeeId),i=S(e,n.employeeId),s=r?(new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5+1:1,o=i?(new Date(i.endDate).getTime()-new Date(i.startDate).getTime())/864e5+1:1;return s!==o?o-s:t.employeeId-n.employeeId});const a=[],u=[];s.forEach(t=>{const n=S(e,t.employeeId),r=n?new Date(n.startDate+"T00:00:00"):new Date(t.date+"T00:00:00"),i=n?new Date(n.endDate+"T23:59:59"):new Date(t.date+"T23:59:59");let s=-1;for(let e=0;e<a.length;e++)if(!a[e]||new Date(a[e]).getTime()<r.getTime()){s=e;break}-1===s&&(s=a.length),a[s]=i,u.push((0,Ee.A)((0,Ee.A)({},t),{},{trackIndex:s}))});const d=e=>e.filter(e=>{const t=c.find(t=>t.id===e.employeeId);return!!t&&(!n||0===n.length||n.some(e=>e.id===t.id))});return{fullDay:d(u).map(e=>{var t;return(0,Ee.A)((0,Ee.A)({},e),{},{employeeName:(null===(t=c.find(t=>t.id===e.employeeId))||void 0===t?void 0:t.name)||"\uc54c \uc218 \uc5c6\uc74c"})}),halfDay:d(o).map(e=>{var t;return(0,Ee.A)((0,Ee.A)({},e),{},{employeeName:(null===(t=c.find(t=>t.id===e.employeeId))||void 0===t?void 0:t.name)||"\uc54c \uc218 \uc5c6\uc74c"})})}})(e),u=(e=>{const n=Cr.formatDate(e);return t.find(e=>e.date===n)||null})(e);return(0,Te.jsx)(Er,{date:e,isCurrentMonth:i,isToday:s,dayOfWeek:o,vacations:a,holiday:u,getConsecutiveGroupForDate:S,employees:c},r)})})]}))},Nr=e=>{let{holidays:t,filteredEmployees:n}=e;const r=Vt(),{state:s={},actions:o}=r||{},{selectedYear:a=(new Date).getFullYear(),selectedMonth:l=(new Date).getMonth(),vacations:c=[],employees:u=[]}=s,d=(0,i.useRef)(null),[h,p]=(0,i.useState)(0),[f,m]=(0,i.useState)(!0),g=(()=>{const[e,t]=(0,i.useState)(()=>{if("undefined"!==typeof window){const e=window.innerWidth,t=e<=768;return console.log("[Calendar] \ucd08\uae30 isMobile:",t,"viewport:",e),t}return!1});return(0,i.useEffect)(()=>{const e=()=>{const e=window.innerWidth,n=e<=768;t(n),console.log("[Calendar] isMobile \uc5c5\ub370\uc774\ud2b8:",n,"viewport:",e)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e})();(0,i.useEffect)(()=>{console.log("[\uc2a4\uc640\uc774\ud504] isMobile:",g,"viewport:",window.innerWidth)},[g]);const v=(0,i.useCallback)(()=>{console.log("[\uc2a4\uc640\uc774\ud504] \uc774\uc804 \ub2ec\ub85c \uc774\ub3d9 \uc2e4\ud589"),0===l?o.setSelectedDate(a-1,11):o.setSelectedDate(a,l-1)},[a,l,o]),y=(0,i.useCallback)(()=>{console.log("[\uc2a4\uc640\uc774\ud504] \ub2e4\uc74c \ub2ec\ub85c \uc774\ub3d9 \uc2e4\ud589"),11===l?o.setSelectedDate(a+1,0):o.setSelectedDate(a,l+1)},[a,l,o]);(0,i.useEffect)(()=>{const e=e=>{"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"SELECT"!==e.target.tagName&&("ArrowLeft"===e.key?(console.log("[\ud0a4\ubcf4\ub4dc] \uc774\uc804 \ub2ec\ub85c \uc774\ub3d9"),e.preventDefault(),v()):"ArrowRight"===e.key&&(console.log("[\ud0a4\ubcf4\ub4dc] \ub2e4\uc74c \ub2ec\ub85c \uc774\ub3d9"),e.preventDefault(),y()))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[v,y]);const b=kr({onSwipeLeft:()=>{g&&(console.log("[\ubaa8\ubc14\uc77c \uc2a4\uc640\uc774\ud504] \u2705 \ub2e4\uc74c \ub2ec\ub85c \uc774\ub3d9"),y())},onSwipeRight:()=>{g&&(console.log("[\ubaa8\ubc14\uc77c \uc2a4\uc640\uc774\ud504] \u2705 \uc774\uc804 \ub2ec\ub85c \uc774\ub3d9"),v())}},{minSwipeDistance:50,preventDefaultTouchmoveEvent:!1});(0,i.useEffect)(()=>{console.log("[\ub370\uc2a4\ud06c\ud1b1 \uc2a4\uc640\uc774\ud504] \ud578\ub4e4\ub7ec \uc0c1\ud0dc:",{onTouchStart:!!b.onTouchStart,onTouchMove:!!b.onTouchMove,onTouchEnd:!!b.onTouchEnd,isMobile:g})},[b,g]),(0,i.useEffect)(()=>{d.current&&p(d.current.offsetWidth)},[a,l]),(0,i.useEffect)(()=>{const e=setTimeout(()=>{m(!1)},500);return()=>clearTimeout(e)},[a,l,u,c]);const _=new Date(a,l),w=_.getFullYear(),x=_.getMonth(),C=new Date(w,x,1),k=new Date(w,x+1,0),E=new Date(C);E.setDate(C.getDate()-C.getDay());const S=new Date(k);S.setDate(k.getDate()+(6-k.getDay()));const N=[],T=new Date(E);for(;T<=S;)N.push(new Date(T)),T.setDate(T.getDate()+1);const I=(0,i.useMemo)(()=>{const e=[];return console.log("[Calendar] \ud83d\udd04 \uc5f0\uc18d\ud734\uac00 \uadf8\ub8f9 \uc7ac\uacc4\uc0b0 \uc2dc\uc791"),console.log("[Calendar] \ud83d\udcca \ud604\uc7ac \ud734\uac00 \ub370\uc774\ud130:",c.length,"\uac1c"),console.log("[Calendar] \ud83d\udc65 \ud544\ud130\ub41c \uc9c1\uc6d0 \uc218:",n.length,"\uba85"),n.forEach(t=>{const n=c.filter(e=>e.employeeId===t.id).sort((e,t)=>new Date(e.date)-new Date(t.date));n.length>0&&console.log("[Calendar] \ud83d\udc64 ".concat(t.name," (ID: ").concat(t.id,") \ud734\uac00:"),n.map(e=>({date:e.date,type:e.type})));let r=[],i=null;n.forEach((e,s)=>{const o=new Date(e.date);if("\uc5c5\ubb34"!==e.type){if(i){const n=new Date(i.endDate),s=new Date(n);s.setDate(s.getDate()+1),o.getTime()===s.getTime()?(i.endDate=e.date,i.vacations.push(e),i.isConsecutive=!0):(r.push((0,Ee.A)((0,Ee.A)({},i),{},{vacations:[...i.vacations]})),i={employeeId:t.id,employeeName:t.name,startDate:e.date,endDate:e.date,type:e.type,vacations:[e],isConsecutive:!1})}else i={employeeId:t.id,employeeName:t.name,startDate:e.date,endDate:e.date,type:e.type,vacations:[e],isConsecutive:!1};s===n.length-1&&i&&r.push((0,Ee.A)((0,Ee.A)({},i),{},{vacations:[...i.vacations]}))}else r.push({employeeId:t.id,employeeName:t.name,startDate:e.date,endDate:e.date,type:e.type,vacations:[e],isConsecutive:!1})}),r.forEach(t=>{t.vacations.length>1&&t.isConsecutive?(console.log("[Calendar] \u2705 \uc5f0\uc18d\ud734\uac00 \uadf8\ub8f9 \uc0dd\uc131: ".concat(t.employeeName," ").concat(t.startDate,"~").concat(t.endDate," (").concat(t.vacations.length,"\uc77c)")),e.push(t)):1===t.vacations.length&&console.log("[Calendar] \u26aa \ub2e8\uc77c\ud734\uac00: ".concat(t.employeeName," ").concat(t.startDate," ").concat(t.type))})}),e},[c,n]),P=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)},A=(e,t)=>{const n=P(e);return I.find(e=>e&&e.employeeId===t&&e.startDate&&e.endDate&&e.vacations&&e.vacations.length>0&&n>=e.startDate&&n<=e.endDate)};return f?(0,Te.jsx)(wr,{}):g?(0,Te.jsx)(Sr,{holidays:t,filteredEmployees:n}):(0,Te.jsxs)("div",(0,Ee.A)((0,Ee.A)({style:{backgroundColor:"var(--background-primary, white)",borderRadius:g?"0":"12px",padding:"0",boxShadow:g?"none":"0 4px 6px rgba(0,0,0,0.1)",border:g?"none":"1px solid var(--border-color, #e5e7eb)",width:g?"100vw":"auto",height:g?"100%":"auto",margin:"0",position:g?"absolute":"static",left:"0",top:"0",right:"0",bottom:"0"},tabIndex:0},g?b:{}),{},{children:[!g&&(0,Te.jsxs)("div",{className:"desktop-date-navigation",style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px",padding:"16px",backgroundColor:"var(--background-secondary, #f8f9fa)",borderRadius:"12px",border:"1px solid var(--border-color, #e0e0e0)"},children:[(0,Te.jsx)("button",{onClick:()=>o.setSelectedDate(w,x-1),style:{width:"40px",height:"40px",backgroundColor:"var(--background-primary, #ffffff)",border:"1px solid var(--border-color, #e0e0e0)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-secondary, #666)",transition:"all 0.2s ease"},onMouseOver:e=>{e.target.style.backgroundColor="var(--background-hover, #f0f0f0)",e.target.style.color="var(--text-primary, #1a1a1a)"},onMouseOut:e=>{e.target.style.backgroundColor="var(--background-primary, #ffffff)",e.target.style.color="var(--text-secondary, #666)"},children:(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),(0,Te.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",margin:"0 20px"},children:[(0,Te.jsx)("select",{value:w,onChange:e=>o.setSelectedDate(parseInt(e.target.value),x),style:{backgroundColor:"var(--background-primary, #ffffff)",border:"1px solid var(--border-color, #e0e0e0)",borderRadius:"8px",padding:"8px 12px",fontSize:"16px",fontWeight:"600",color:"var(--text-primary, #1a1a1a)",cursor:"pointer",minWidth:"80px"},children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-5+t).map(e=>(0,Te.jsxs)("option",{value:e,children:[e,"\ub144"]},e))}),(0,Te.jsx)("select",{value:x,onChange:e=>o.setSelectedDate(w,parseInt(e.target.value)),style:{backgroundColor:"var(--background-primary, #ffffff)",border:"1px solid var(--border-color, #e0e0e0)",borderRadius:"8px",padding:"8px 12px",fontSize:"16px",fontWeight:"600",color:"var(--text-primary, #1a1a1a)",cursor:"pointer",minWidth:"80px"},children:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"].map((e,t)=>(0,Te.jsx)("option",{value:t,children:e},t))})]}),(0,Te.jsx)("button",{onClick:()=>o.setSelectedDate(w,x+1),style:{width:"40px",height:"40px",backgroundColor:"var(--background-primary, #ffffff)",border:"1px solid var(--border-color, #e0e0e0)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-secondary, #666)",transition:"all 0.2s ease"},onMouseOver:e=>{e.target.style.backgroundColor="var(--background-hover, #f0f0f0)",e.target.style.color="var(--text-primary, #1a1a1a)"},onMouseOut:e=>{e.target.style.backgroundColor="var(--background-primary, #ffffff)",e.target.style.color="var(--text-secondary, #666)"},children:(0,Te.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M9 18l6-6-6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),(0,Te.jsx)("div",{style:{display:"grid",gridTemplateColumns:g?"repeat(7, 1fr)":"repeat(7, 140px)",gap:"1px",marginBottom:"1px",justifyContent:"center"},children:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map((e,t)=>(0,Te.jsx)("div",{style:{padding:g?"8px 4px":"12px",textAlign:"center",fontWeight:"600",backgroundColor:"var(--background-secondary, #f8fafc)",color:0===t?"#dc2626":6===t?"#2563eb":"var(--text-primary, #374151)",fontSize:g?"12px":"14px",border:"1px solid var(--border-color, #e5e7eb)"},children:e},e))}),(0,Te.jsx)("div",{style:{display:"grid",gridTemplateColumns:g?"repeat(7, 1fr)":"repeat(7, 140px)",gap:"1px",backgroundColor:"var(--border-color, #e5e7eb)",justifyContent:"center"},children:N.map((e,r)=>{const i=e.getMonth()===x,s=e.toDateString()===(new Date).toDateString(),o=e.getDay(),a=(e=>{const t=P(e),r=n.map(e=>e.id);let i=c.filter(e=>e.date===t&&r.includes(e.employeeId)),s=i.filter(e=>!["\uc624\uc804","\uc624\ud6c4"].includes(e.type));const o=i.filter(e=>["\uc624\uc804","\uc624\ud6c4"].includes(e.type));o.forEach(n=>{const r=A(e,n.employeeId);if(r&&r.isConsecutive){const e=r.startDate===t,i=r.vacations.every(e=>c.some(t=>t.id===e.id&&t.date===e.date&&t.employeeId===e.employeeId)),o=r.vacations.length>=2,a=s.some(e=>e.employeeId===n.employeeId);e&&i&&o&&!a&&(console.log("[Calendar] \u2705 \uac80\uc99d\ub41c \ubc18\ucc28 \uc5f0\uc18d\ud734\uac00 - \uc5f0\ud734 \ub9c9\ub300\ubc14 \ub80c\ub354\ub9c1: ".concat(t," ").concat(n.type)),s.push((0,Ee.A)((0,Ee.A)({},n),{},{type:"\uc5f0\ud734",isVirtualForConsecutiveRender:!0})))}}),s.sort((t,n)=>{const r=A(e,t.employeeId),i=A(e,n.employeeId),s=r&&r.isConsecutive,o=i&&i.isConsecutive;if(s&&!o)return-1;if(!s&&o)return 1;if(s&&o){const e=new Date(r.startDate),t=new Date(i.startDate);if(e.getTime()!==t.getTime())return e-t}return t.employeeId-n.employeeId});const a=[],l=[];s.forEach(t=>{const n=A(e,t.employeeId),r=n?n.startDate:t.date,i=n?n.endDate:t.date;let s=-1;for(let e=0;e<a.length;e++){if(!a[e]){s=e;break}if(a[e].endDate<r){s=e;break}}-1===s&&(s=a.length),a[s]={endDate:i,employeeId:t.employeeId,startDate:r},l.push((0,Ee.A)((0,Ee.A)({},t),{},{trackIndex:s}))});const d=e=>e.filter(e=>{const t=u.find(t=>t.id===e.employeeId);return!!t&&(!n||0===n.length||n.some(e=>e.id===t.id))});return{fullDay:d(l),halfDay:d(o)}})(e),l=(e=>{const n=Cr.formatDate(e);return t.find(e=>e.date===n)||null})(e);return(0,Te.jsx)(br,{date:e,dateString:P(e),isCurrentMonth:i,isSunday:0===o,isSaturday:6===o,isToday:s,holiday:l,vacations:a.fullDay,halfDayVacations:a.halfDay,employees:n,getConsecutiveGroupForDate:A,dayWidth:h,ref:0===r?d:null},r)})})]}))},Tr=e=>{let{isPulling:t,pullDistance:n,isRefreshing:r,threshold:i=100}=e;const s=Math.min(n/i,1),o=360*s,a=Math.min(n/50,1);return(0,Te.jsx)("div",{className:"pull-to-refresh ".concat(t?"pulling":""," ").concat(r?"refreshing":""),style:{transform:"translateY(".concat(Math.min(n,i+20),"px)"),opacity:a},children:(0,Te.jsx)("div",{className:"refresh-indicator",children:r?(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("div",{className:"refresh-spinner"}),(0,Te.jsx)("span",{className:"refresh-text",children:"\uc0c8\ub85c\uace0\uce68 \uc911..."})]}):(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("div",{className:"refresh-arrow",style:{transform:"rotate(".concat(o,"deg)"),color:s>=1?"#28a745":"#007bff"},children:(0,Te.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,Te.jsx)("path",{d:"M12 2l0 10M8 8l4 4 4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,Te.jsx)("span",{className:"refresh-text",children:s>=1?"\ub193\uc73c\uba74 \uc0c8\ub85c\uace0\uce68":"\uc544\ub798\ub85c \ub2f9\uaca8\uc11c \uc0c8\ub85c\uace0\uce68"})]})})})},Ir=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const[n,r]=(0,i.useState)(!1),[s,o]=(0,i.useState)(0),[a,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(0),[d,h]=(0,i.useState)(!0),p=(0,i.useCallback)(e=>{if(!d||window.scrollY>0)return;const t=e.touches[0];u(t.clientY)},[d]),f=(0,i.useCallback)(e=>{if(!d||window.scrollY>0||a)return;const n=e.touches[0].clientY-c;if(n>0&&0===window.scrollY){e.preventDefault();const i=Math.min(.5*n,1.5*t);o(i),r(i>20)}},[c,t,d,a]),m=(0,i.useCallback)(async()=>{if(d&&!a)if(s>=t){l(!0);try{await e()}catch(n){console.error("\uc0c8\ub85c\uace0\uce68 \uc2e4\ud328:",n)}finally{setTimeout(()=>{l(!1),o(0),r(!1)},500)}}else o(0),r(!1)},[s,t,e,d,a]);return(0,i.useEffect)(()=>{if(d)return document.addEventListener("touchstart",p,{passive:!1}),document.addEventListener("touchmove",f,{passive:!1}),document.addEventListener("touchend",m,{passive:!1}),()=>{document.removeEventListener("touchstart",p),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",m)}},[p,f,m,d]),(0,i.useEffect)(()=>{const e=()=>{h(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{isPulling:n,pullDistance:s,isRefreshing:a,isEnabled:d}},Pr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:768;const[t,n]=(0,i.useState)(()=>"undefined"!==typeof window&&window.innerWidth<=e);return(0,i.useEffect)(()=>{let r;const i=()=>{const r=window.innerWidth<=e;r!==t&&n(r)},s=()=>{r&&clearTimeout(r),r=setTimeout(i,100)};return window.addEventListener("resize",s,{passive:!0}),()=>{window.removeEventListener("resize",s),r&&clearTimeout(r)}},[e,t]),t},Ar=i.memo(()=>{const e=Vt(),{state:t={employees:[],vacations:[],teams:[],filters:{selectedEmployees:[]}},actions:n}=e||{},[r,s]=(0,i.useState)([]),o=Pr(),a=(0,i.useCallback)(async()=>{try{window.location.reload()}catch(e){console.error("\uc0c8\ub85c\uace0\uce68 \uc2e4\ud328:",e)}},[]),{isPulling:l,pullDistance:c,isRefreshing:u,isEnabled:d}=Ir(a,80),h=(0,i.useMemo)(()=>{if(!t.filters.selectedEmployees||0===t.filters.selectedEmployees.length)return t.employees;return t.employees.filter(e=>t.filters.selectedEmployees.includes(e.id))},[t.employees,t.filters.selectedEmployees]);return(0,i.useEffect)(()=>{(async()=>{try{const e=t.selectedYear,n=t.selectedMonth+1,r=await Cr.getHolidaysForMonth(e,n);s(r)}catch(e){console.error("\uacf5\ud734\uc77c \ub85c\ub4dc \uc2e4\ud328:",e),s([])}})()},[t.selectedYear,t.selectedMonth]),(0,Te.jsxs)(Te.Fragment,{children:[d&&(0,Te.jsx)(Tr,{isPulling:l,pullDistance:c,isRefreshing:u,threshold:80}),(0,Te.jsxs)("div",{className:"main-content",children:[(0,Te.jsx)("div",{className:"filter-sidebar desktop-filter",children:(0,Te.jsx)(pr,{})}),t.ui.mobileFilterOpen&&(0,Te.jsxs)("div",{className:"modal-overlay",children:[(0,Te.jsx)("div",{className:"modal-backdrop",onClick:()=>{n.toggleMobileFilter()}}),(0,Te.jsxs)("div",{className:"modal-container mobile-filter-modal",children:[(0,Te.jsxs)("div",{className:"modal-header",children:[(0,Te.jsx)("h3",{children:"\ud544\ud130 \uc124\uc815"}),(0,Te.jsx)("button",{className:"modal-close-btn",onClick:()=>{n.toggleMobileFilter()},"aria-label":"\ub2eb\uae30",children:(0,Te.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Te.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,Te.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,Te.jsx)("div",{className:"modal-content mobile-filter-content",children:(0,Te.jsx)(pr,{})})]})]}),(0,Te.jsxs)("div",{className:"calendar-container",children:[o?(0,Te.jsx)(Sr,{holidays:r,filteredEmployees:h}):(0,Te.jsx)(Nr,{holidays:r,filteredEmployees:h}),(0,Te.jsxs)("div",{className:"statistics-grid",children:[(0,Te.jsxs)("div",{className:"stat-card",children:[(0,Te.jsx)("h4",{children:"\ud45c\uc2dc \uc911\uc778 \uc9c1\uc6d0"}),(0,Te.jsxs)("div",{className:"stat-number employee-count",children:[h.length,"\uba85"]})]}),(0,Te.jsxs)("div",{className:"stat-card",children:[(0,Te.jsx)("h4",{children:"\uc774\ubc88 \ub2ec \ud734\uac00"}),(0,Te.jsxs)("div",{className:"stat-number vacation-count",children:[t.vacations.filter(e=>{const n=new Date(e.date);return n.getFullYear()===t.selectedYear&&n.getMonth()===t.selectedMonth}).length,"\uac1c"]})]}),(0,Te.jsxs)("div",{className:"stat-card",children:[(0,Te.jsx)("h4",{children:"\uc774\ubc88 \ub2ec \uacf5\ud734\uc77c"}),(0,Te.jsxs)("div",{className:"stat-number holiday-count",children:[r.length,"\uc77c"]}),r.length>0&&(0,Te.jsx)("div",{className:"holiday-list",children:r.map(e=>e.name).join(", ")})]})]})]}),(0,Te.jsx)(mr,{isOpen:"batchInput"===t.ui.activeModal,onClose:()=>n.setModal(null)}),(0,Te.jsx)(vr,{isOpen:"employeeManager"===t.ui.activeModal,onClose:()=>n.setModal(null)}),("vacation"===t.ui.activeModal||"editVacation"===t.ui.activeModal)&&(0,Te.jsx)(lr,{}),"dayVacations"===t.ui.activeModal&&(0,Te.jsx)(cr,{isOpen:!0,onClose:()=>n.setModal(null),data:t.ui.modalProps})]})]})});Ar.displayName="MainContent";const Dr=Ar;const jr=function(){const{state:e}=Vt(),{currentUser:t,logout:n}=Ae();return(0,Te.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"var(--background-secondary, #f8fafc)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:[(0,Te.jsx)(sr,{user:t,onLogout:n}),(0,Te.jsx)("main",{id:"main-content",tabIndex:"-1",children:(0,Te.jsx)(Dr,{})}),e.ui.loading&&(0,Te.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,Te.jsx)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",textAlign:"center"},children:(0,Te.jsx)("div",{children:"\ub85c\ub529 \uc911..."})})}),e.ui.error&&(0,Te.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px 16px",borderRadius:"8px",zIndex:1e3},children:e.ui.error})]})},Rr=()=>{const{notifications:e,removeNotification:t}=Ve();return 0===e.length?null:(0,Te.jsx)("div",{className:"notification-container",children:e.map(e=>{return(0,Te.jsxs)("div",{className:"notification notification--".concat(e.type),onClick:()=>t(e.id),children:[(0,Te.jsx)("div",{className:"notification__icon",children:(r=e.type,{success:"\u2705",error:"\u274c",warning:"\u26a0\ufe0f",info:"\u2139\ufe0f"}[r]||"\u2139\ufe0f")}),(0,Te.jsxs)("div",{className:"notification__content",children:[(0,Te.jsxs)("div",{className:"notification__header",children:[(0,Te.jsx)("h4",{className:"notification__title",children:e.title}),(0,Te.jsx)("span",{className:"notification__time",children:(n=e.createdAt,new Date(n).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}))})]}),e.message&&(0,Te.jsx)("p",{className:"notification__message",children:e.message}),e.employee&&(0,Te.jsxs)("div",{className:"notification__employee",children:[(0,Te.jsx)("span",{className:"notification__employee-name",children:e.employee.name}),e.employee.team&&(0,Te.jsxs)("span",{className:"notification__employee-team",children:["(",e.employee.team,")"]})]}),e.date&&(0,Te.jsxs)("div",{className:"notification__date",children:["\ud83d\udcc5 ",new Date(e.date).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"short"})]})]}),(0,Te.jsx)("button",{className:"notification__close",onClick:n=>{n.stopPropagation(),t(e.id)},title:"\uc54c\ub9bc \ub2eb\uae30",children:"\xd7"})]},e.id);var n,r})})};class Mr extends i.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary \uce90\uce58:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,Te.jsxs)("div",{style:{padding:"20px",textAlign:"center",backgroundColor:"#f8f9fa",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,Te.jsx)("h2",{style:{color:"#dc3545",marginBottom:"20px"},children:"\ud83d\udea8 \uc571\uc5d0\uc11c \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"}),(0,Te.jsx)("p",{style:{color:"#6c757d",marginBottom:"20px"},children:"\ud398\uc774\uc9c0\ub97c \uc0c8\ub85c\uace0\uce68\ud558\uac70\ub098 \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\ubcf4\uc138\uc694."}),(0,Te.jsx)("button",{onClick:()=>window.location.reload(),style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:"pointer",fontSize:"16px"},children:"\ud398\uc774\uc9c0 \uc0c8\ub85c\uace0\uce68"}),!1]}):this.props.children}}const Or=Mr;var Lr=n(705);let Fr=-1;const Vr=e=>{addEventListener("pageshow",t=>{t.persisted&&(Fr=t.timeStamp,e(t))},!0)},Ur=(e,t,n,r)=>{let i,s;return o=>{t.value>=0&&(o||r)&&(s=t.value-(null!==i&&void 0!==i?i:0),(s||void 0===i)&&(i=t.value,t.delta=s,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},Br=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},zr=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Wr=()=>{var e;const t=zr();return null!==(e=null===t||void 0===t?void 0:t.activationStart)&&void 0!==e?e:0},Hr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=zr();let r="navigate";return Fr>=0?r="back-forward-cache":n&&(document.prerendering||Wr()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:"v5-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},qr=new WeakMap;function Kr(e,t){return qr.get(e)||qr.set(e,new t),qr.get(e)}class Yr{constructor(){(0,Lr.A)(this,"t",void 0),(0,Lr.A)(this,"i",0),(0,Lr.A)(this,"o",[])}h(e){var t;if(e.hadRecentInput)return;const n=this.o[0],r=this.o.at(-1);this.i&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),null===(t=this.t)||void 0===t||t.call(this,e)}}const Gr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});return r.observe((0,Ee.A)({type:e,buffered:!0},n)),r}}catch(r){}},Qr=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let $r=-1;const Jr=new Set,Xr=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,Zr=e=>{if("hidden"===document.visibilityState){if("visibilitychange"===e.type)for(const e of Jr)e();isFinite($r)||($r="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("prerenderingchange",Zr,!0))}},ei=()=>{if($r<0){var e;const t=Wr(),n=document.prerendering||null===(e=globalThis.performance.getEntriesByType("visibility-state").filter(e=>"hidden"===e.name&&e.startTime>t)[0])||void 0===e?void 0:e.startTime;$r=null!==n&&void 0!==n?n:Xr(),addEventListener("visibilitychange",Zr,!0),addEventListener("prerenderingchange",Zr,!0),Vr(()=>{setTimeout(()=>{$r=Xr()})})}return{get firstHiddenTime(){return $r},onHidden(e){Jr.add(e)}}},ti=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},ni=[1800,3e3],ri=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ti(()=>{const n=ei();let r,i=Hr("FCP");const s=Gr("paint",e=>{for(const t of e)"first-contentful-paint"===t.name&&(s.disconnect(),t.startTime<n.firstHiddenTime&&(i.value=Math.max(t.startTime-Wr(),0),i.entries.push(t),r(!0)))});s&&(r=Ur(e,i,ni,t.reportAllChanges),Vr(n=>{i=Hr("FCP"),r=Ur(e,i,ni,t.reportAllChanges),Br(()=>{i.value=performance.now()-n.timeStamp,r(!0)})}))})},ii=[.1,.25];let si=0,oi=1/0,ai=0;const li=e=>{for(const t of e)t.interactionId&&(oi=Math.min(oi,t.interactionId),ai=Math.max(ai,t.interactionId),si=ai?(ai-oi)/7+1:0)};let ci;const ui=()=>{var e;return ci?si:null!==(e=performance.interactionCount)&&void 0!==e?e:0};let di=0;class hi{constructor(){(0,Lr.A)(this,"u",[]),(0,Lr.A)(this,"l",new Map),(0,Lr.A)(this,"m",void 0),(0,Lr.A)(this,"p",void 0)}v(){di=ui(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((ui()-di)/50));return this.u[e]}h(e){var t;if(null!==(t=this.m)&&void 0!==t&&t.call(this,e),!e.interactionId&&"first-input"!==e.entryType)return;const n=this.u.at(-1);let r=this.l.get(e.interactionId);if(r||this.u.length<10||e.duration>n.P){var i;if(r?e.duration>r.P?(r.entries=[e],r.P=e.duration):e.duration===r.P&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],P:e.duration},this.l.set(r.id,r),this.u.push(r)),this.u.sort((e,t)=>t.P-e.P),this.u.length>10){const e=this.u.splice(10);for(const t of e)this.l.delete(t.id)}null===(i=this.p)||void 0===i||i.call(this,r)}}}const pi=e=>{const t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=Qr(e),addEventListener("visibilitychange",e,{once:!0,capture:!0}),t(()=>{e(),removeEventListener("visibilitychange",e,{capture:!0})}))},fi=[200,500],mi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const n=ei();ti(()=>{var r;"interactionCount"in performance||ci||(ci=Gr("event",li,{type:"event",buffered:!0,durationThreshold:0}));let i,s=Hr("INP");const o=Kr(t,hi),a=e=>{pi(()=>{for(const n of e)o.h(n);const t=o.L();t&&t.P!==s.value&&(s.value=t.P,s.entries=t.entries,i())})},l=Gr("event",a,{durationThreshold:null!==(r=t.durationThreshold)&&void 0!==r?r:40});i=Ur(e,s,fi,t.reportAllChanges),l&&(l.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{a(l.takeRecords()),i(!0)}),Vr(()=>{o.v(),s=Hr("INP"),i=Ur(e,s,fi,t.reportAllChanges)}))})};class gi{constructor(){(0,Lr.A)(this,"m",void 0)}h(e){var t;null===(t=this.m)||void 0===t||t.call(this,e)}}const vi=[2500,4e3],yi=[800,1800],bi=e=>{document.prerendering?ti(()=>bi(e)):"complete"!==document.readyState?addEventListener("load",()=>bi(e),!0):setTimeout(e)};const _i=new class{constructor(){this.metrics={CLS:null,INP:null,FCP:null,LCP:null,TTFB:null},this.observers=[],this.isMonitoring=!1,this.bindMethods()}bindMethods(){this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.getMetrics=this.getMetrics.bind(this),this.onMetricUpdate=this.onMetricUpdate.bind(this),this.measureCustomMetric=this.measureCustomMetric.bind(this)}start(){if(this.isMonitoring)console.warn("Performance monitoring is already active");else{this.isMonitoring=!0;try{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ei();ri(Qr(()=>{let r,i=Hr("CLS",0);const s=Kr(t,Yr),o=e=>{for(const t of e)s.h(t);s.i>i.value&&(i.value=s.i,i.entries=s.o,r())},a=Gr("layout-shift",o);a&&(r=Ur(e,i,ii,t.reportAllChanges),n.onHidden(()=>{o(a.takeRecords()),r(!0)}),Vr(()=>{s.i=0,i=Hr("CLS",0),r=Ur(e,i,ii,t.reportAllChanges),Br(()=>r())}),setTimeout(r))}))}(this.onMetricUpdate),mi(this.onMetricUpdate),ri(this.onMetricUpdate),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ti(()=>{const n=ei();let r,i=Hr("LCP");const s=Kr(t,gi),o=e=>{t.reportAllChanges||(e=e.slice(-1));for(const t of e)s.h(t),t.startTime<n.firstHiddenTime&&(i.value=Math.max(t.startTime-Wr(),0),i.entries=[t],r())},a=Gr("largest-contentful-paint",o);if(a){r=Ur(e,i,vi,t.reportAllChanges);const n=Qr(()=>{o(a.takeRecords()),a.disconnect(),r(!0)}),s=e=>{e.isTrusted&&(pi(n),removeEventListener(e.type,s,{capture:!0}))};for(const e of["keydown","click","visibilitychange"])addEventListener(e,s,{capture:!0});Vr(n=>{i=Hr("LCP"),r=Ur(e,i,vi,t.reportAllChanges),Br(()=>{i.value=performance.now()-n.timeStamp,r(!0)})})}})}(this.onMetricUpdate),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Hr("TTFB"),r=Ur(e,n,yi,t.reportAllChanges);bi(()=>{const i=zr();i&&(n.value=Math.max(i.responseStart-Wr(),0),n.entries=[i],r(!0),Vr(()=>{n=Hr("TTFB",0),r=Ur(e,n,yi,t.reportAllChanges),r(!0)}))})}(this.onMetricUpdate),this.observeNavigationTiming(),this.observeResourceTiming(),this.observeLongTasks(),console.log("\u2705 Performance monitoring started")}catch(e){console.error("\u274c Failed to start performance monitoring:",e),this.isMonitoring=!1}}}stop(){this.isMonitoring&&(this.observers.forEach(e=>{try{e.disconnect()}catch(t){console.warn("Failed to disconnect observer:",t)}}),this.observers=[],this.isMonitoring=!1,console.log("\ud83d\uded1 Performance monitoring stopped"))}onMetricUpdate(e){this.metrics[e.name]=e.value,console.log("\ud83d\udcca ".concat(e.name,": ").concat(Math.round(e.value)).concat(this.getMetricUnit(e.name))),this.checkPerformanceThresholds(e),window.dispatchEvent(new CustomEvent("performance-metric-update",{detail:{metric:e,allMetrics:this.metrics}}))}getMetricUnit(e){switch(e){case"CLS":default:return"";case"INP":case"FCP":case"LCP":case"TTFB":return"ms"}}checkPerformanceThresholds(e){const t={CLS:{good:.1,poor:.25},INP:{good:200,poor:500},FCP:{good:1800,poor:3e3},LCP:{good:2500,poor:4e3},TTFB:{good:800,poor:1800}}[e.name];if(!t)return;let n;n=e.value<=t.good?"\u2705 Good":e.value<=t.poor?"\u26a0\ufe0f Needs Improvement":"\u274c Poor",console.log("".concat(e.name," Status: ").concat(n)),e.value>t.poor&&this.logPerformanceAlert(e)}logPerformanceAlert(e){var t;console.group("\ud83d\udea8 ".concat(e.name," \uc131\ub2a5 \uac1c\uc120 \ud544\uc694")),console.log("\ud604\uc7ac \uac12: ".concat(Math.round(e.value)).concat(this.getMetricUnit(e.name))),console.log("\uac1c\uc120 \ubc29\ubc95:"),null===(t={CLS:["- \uc774\ubbf8\uc9c0\uc640 \ube44\ub514\uc624 \uc694\uc18c\uc5d0 \uba85\uc2dc\uc801\uc778 \ud06c\uae30 \uc124\uc815","- \ub3d9\uc801 \ucf58\ud150\uce20\ub97c \uae30\uc874 \ucf58\ud150\uce20 \uc704\uc5d0 \uc0bd\uc785\ud558\uc9c0 \uc54a\uae30","- \uc6f9 \ud3f0\ud2b8 \ub85c\ub529 \ucd5c\uc801\ud654 (font-display: swap \uc0ac\uc6a9)"],INP:["- \uc774\ubca4\ud2b8 \ud578\ub4e4\ub7ec \ucd5c\uc801\ud654","- \uba54\uc778 \uc2a4\ub808\ub4dc \uc791\uc5c5 \ubd84\uc0b0","- \ucf54\ub4dc \ubd84\ud560 \ubc0f \uc9c0\uc5f0 \ub85c\ub529 \uad6c\ud604"],FCP:["- \uc11c\ubc84 \uc751\ub2f5 \uc2dc\uac04 \uac1c\uc120","- \ub80c\ub354\ub9c1 \ucc28\ub2e8 \ub9ac\uc18c\uc2a4 \ucd5c\uc18c\ud654","- \uc911\uc694\ud55c \ub9ac\uc18c\uc2a4 \ud504\ub9ac\ub85c\ub4dc"],LCP:["- \uc774\ubbf8\uc9c0 \ucd5c\uc801\ud654 \ubc0f WebP \ud615\uc2dd \uc0ac\uc6a9","- CSS \ubc0f JavaScript \ucd5c\uc801\ud654","- \uc11c\ubc84 \uc751\ub2f5 \uc2dc\uac04 \uac1c\uc120"],TTFB:["- \uc11c\ubc84 \uc131\ub2a5 \ucd5c\uc801\ud654","- CDN \uc0ac\uc6a9","- \uce90\uc2f1 \uc804\ub7b5 \uac1c\uc120"]}[e.name])||void 0===t||t.forEach(e=>console.log(e)),console.groupEnd()}observeNavigationTiming(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"navigation"===e.entryType&&console.log("\ud83d\ude80 Navigation Timing:",{DNSLookup:Math.round(e.domainLookupEnd-e.domainLookupStart),Connection:Math.round(e.connectEnd-e.connectStart),Request:Math.round(e.responseStart-e.requestStart),Response:Math.round(e.responseEnd-e.responseStart),DOMProcessing:Math.round(e.domContentLoadedEventStart-e.responseEnd),LoadComplete:Math.round(e.loadEventEnd-e.navigationStart)})})});e.observe({entryTypes:["navigation"]}),this.observers.push(e)}catch(e){console.warn("Navigation timing observer not supported:",e)}}observeResourceTiming(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{const t=e.getEntries().filter(e=>e.duration>1e3);t.length>0&&(console.group("\u26a0\ufe0f \ub290\ub9b0 \ub9ac\uc18c\uc2a4 \uac10\uc9c0"),t.forEach(e=>{console.log("".concat(e.name,": ").concat(Math.round(e.duration),"ms"))}),console.groupEnd())});e.observe({entryTypes:["resource"]}),this.observers.push(e)}catch(e){console.warn("Resource timing observer not supported:",e)}}observeLongTasks(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"longtask"===e.entryType&&e.duration>50&&console.warn("\ud83d\udc0c Long Task detected: ".concat(Math.round(e.duration),"ms"))})});e.observe({entryTypes:["longtask"]}),this.observers.push(e)}catch(e){console.warn("Long task observer not supported:",e)}}measureCustomMetric(e,t,n){if(!t||!n)return void console.error("Invalid time values for custom metric");const r=n-t;return console.log("\u23f1\ufe0f Custom Metric [".concat(e,"]: ").concat(Math.round(r),"ms")),r}getMetrics(){return(0,Ee.A)({},this.metrics)}measureComponentRender(e){const t=performance.now();return{end:()=>{const n=performance.now()-t;return n>16.67&&console.warn("\ud83c\udfad Slow Component Render [".concat(e,"]: ").concat(n.toFixed(2),"ms")),n}}}logMemoryUsage(){if("memory"in performance){const e=performance.memory;console.log("\ud83d\udcbe Memory Usage:",{used:"".concat(Math.round(e.usedJSHeapSize/1024/1024),"MB"),total:"".concat(Math.round(e.totalJSHeapSize/1024/1024),"MB"),limit:"".concat(Math.round(e.jsHeapSizeLimit/1024/1024),"MB")})}}generateReport(){const e=this.getMetrics();return this.logMemoryUsage(),console.group("\ud83d\udcca Performance Report"),console.log("Web Vitals:",e),console.log("Monitoring Status:",this.isMonitoring?"\u2705 Active":"\u274c Inactive"),console.log("Report Generated:",(new Date).toISOString()),console.groupEnd(),{metrics:e,timestamp:Date.now(),isMonitoring:this.isMonitoring}}},wi=_i,{start:xi,stop:Ci,getMetrics:ki,measureCustomMetric:Ei,measureComponentRender:Si,generateReport:Ni}=_i;function Ti(e){let{children:t}=e;const{isLoggedIn:n}=Ae();return n?t:(0,Te.jsx)(fe,{to:"/login"})}function Ii(){const{isLoggedIn:e}=Ae(),[t,n]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(window.location.search.includes("perf=true")){wi.start();const e=setInterval(()=>{wi.generateReport()},1e4);return()=>{clearInterval(e),wi.stop()}}},[]);const o=()=>{s(!0),n(!1)},a=()=>{s(!1),n(!1)},l=()=>{n(!1)},c=()=>{n(!0)};return r?(0,Te.jsxs)(Fe,{children:[(0,Te.jsx)(Qt,{onLogout:a}),(0,Te.jsx)(Rr,{})]}):t?(0,Te.jsxs)(Fe,{children:[(0,Te.jsx)(Ht,{onAdminLogin:o,onBackToLogin:l}),(0,Te.jsx)(Rr,{})]}):e?(0,Te.jsxs)(Fe,{children:[(0,Te.jsx)("a",{href:"#main-content",className:"skip-navigation",onKeyDown:e=>{var t;"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),null===(t=document.getElementById("main-content"))||void 0===t||t.focus())},children:"\uba54\uc778 \ucf58\ud150\uce20\ub85c \uac74\ub108\ub6f0\uae30"}),(0,Te.jsxs)(Ft,{children:[(0,Te.jsxs)(ve,{children:[(0,Te.jsx)(me,{path:"/login",element:(0,Te.jsx)(Wt,{onShowAdminLogin:c})}),(0,Te.jsx)(me,{path:"/",element:(0,Te.jsxs)(Ti,{children:[(0,Te.jsx)(jr,{}),!1]})}),(0,Te.jsx)(me,{path:"*",element:(0,Te.jsx)(fe,{to:"/",replace:!0})})]}),(0,Te.jsx)(Rr,{})]})]}):(0,Te.jsxs)(Fe,{children:[(0,Te.jsx)("a",{href:"#main-content",className:"skip-navigation",onKeyDown:e=>{var t;"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),null===(t=document.getElementById("main-content"))||void 0===t||t.focus())},children:"\uba54\uc778 \ucf58\ud150\uce20\ub85c \uac74\ub108\ub6f0\uae30"}),(0,Te.jsx)(Wt,{onShowAdminLogin:c}),(0,Te.jsx)(Rr,{})]})}function Pi(){return(0,Te.jsx)(Or,{children:(0,Te.jsx)(xe,{basename:"/vacation-manager-react",children:(0,Te.jsx)(zt,{children:(0,Te.jsx)(Pe,{children:(0,Te.jsx)(Or,{children:(0,Te.jsx)(Ii,{})})})})})})}o.createRoot(document.getElementById("root")).render((0,Te.jsx)(i.StrictMode,{children:(0,Te.jsx)(Pi,{})}))})();